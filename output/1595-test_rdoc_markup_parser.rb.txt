#Source[
   #List[
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['rdoc/test_case']
         ]
      ]
      $statement: #Class[
         $name: #NameExpr['TestRDocMarkupParser']
         $super: #Field[
            $recv: #NameExpr['RDoc']
            $name: #NameExpr['TestCase']
         ]
         $body: #BlockExpr[
            $main: #List[
               $statement: #FuncDecl[
                  $name: #NameExpr['setup']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #Super['super']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@RMP']
                           $right: #Field[
                              $recv: #NameExpr['@RM']
                              $name: #NameExpr['Parser']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_build_heading']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['parser']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@RMP']
                              $recv: #NameExpr['new']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #ApplyExpr[
                              $recv: #NameExpr['parser']
                              $recv: #NameExpr['tokens']
                           ]
                           $recv: #NameExpr['replace']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #Array[
                                       $index: #List[
                                          $expression: #NameExpr['TEXT']
                                          $expression: #StringExpr['heading three']
                                          $expression: #IntExpr['4']
                                          $expression: #IntExpr['0']
                                       ]
                                    ]
                                    $expression: #Array[
                                       $index: #List[
                                          $expression: #NameExpr['NEWLINE']
                                          $expression: #StringExpr['\\n']
                                          $expression: #IntExpr['17']
                                          $expression: #IntExpr['0']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['@RM']
                                    $name: #NameExpr['Heading']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #IntExpr['3']
                                    $expression: #StringExpr['heading three']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['parser']
                                 $recv: #NameExpr['build_heading']
                                 $param: #List[
                                    $expression: #IntExpr['3']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_char_pos']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['parser']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@RMP']
                              $recv: #NameExpr['new']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['s']
                           $right: #ApplyExpr[
                              $base: #NameExpr['parser']
                              $recv: #NameExpr['setup_scanner']
                              $param: #List[
                                 $expression: #StringExpr['cät']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['s']
                           $recv: #NameExpr['scan']
                           $param: #List[
                              $expression: #Regex['/\\S+/']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['3']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['parser']
                                 $recv: #NameExpr['char_pos']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['s']
                                       $recv: #NameExpr['pos']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_get']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['parser']
                           $right: #NameExpr['util_parser']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['HEADER']
                                    $expression: #IntExpr['1']
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['parser']
                                 $recv: #NameExpr['get']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['7']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['parser']
                                    $recv: #NameExpr['tokens']
                                 ]
                                 $recv: #NameExpr['length']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_bullet']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['* l1\n* l2\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['List']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['BULLET']
                                       $variadic: #Variadic[
                                          $base: #Array[
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l1']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l2']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_bullet_utf_8']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['* 新しい機能\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['List']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['BULLET']
                                       $variadic: #Variadic[
                                          $base: #Array[
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['新しい機能']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_bullet_verbatim_heading']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['* l1\n    v\n\n= H\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['List']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['BULLET']
                                       $variadic: #Variadic[
                                          $base: #Array[
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l1']
                                                         ]
                                                      ]
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Verbatim']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['v\\n']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Heading']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #IntExpr['1']
                                       $expression: #StringExpr['H']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_bullet_heading']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['* = l1\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['List']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['BULLET']
                                       $variadic: #Variadic[
                                          $base: #Array[
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Heading']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #IntExpr['1']
                                                            $expression: #StringExpr['l1']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_bullet_indent']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['* l1\n  * l1.1\n* l2\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['List']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['BULLET']
                                       $variadic: #Variadic[
                                          $base: #Array[
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l1']
                                                         ]
                                                      ]
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['List']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #NameExpr['BULLET']
                                                            $variadic: #Variadic[
                                                               $base: #Array[
                                                                  $index: #List[
                                                                     $expression: #ApplyExpr[
                                                                        $recv: #Field[
                                                                           $recv: #NameExpr['@RM']
                                                                           $name: #NameExpr['ListItem']
                                                                        ]
                                                                        $recv: #NameExpr['new']
                                                                        $param: #List[
                                                                           $expression: #Nil['nil']
                                                                           $expression: #ApplyExpr[
                                                                              $recv: #Field[
                                                                                 $recv: #NameExpr['@RM']
                                                                                 $name: #NameExpr['Paragraph']
                                                                              ]
                                                                              $recv: #NameExpr['new']
                                                                              $param: #List[
                                                                                 $expression: #StringExpr['l1.1']
                                                                              ]
                                                                           ]
                                                                        ]
                                                                     ]
                                                                  ]
                                                               ]
                                                            ]
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l2']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_bullet_paragraph']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['now is\n* l1\n* l2\nthe time\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['now is']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['List']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['BULLET']
                                       $variadic: #Variadic[
                                          $base: #Array[
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l1']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l2']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['the time']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_bullet_multiline']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['* l1\n  l1+\n* l2\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['list']
                                    $param: #List[
                                       $expression: #NameExpr['BULLET']
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #Nil['nil']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['l1 ']
                                                   $expression: #StringExpr['l1+']
                                                ]
                                             ]
                                          ]
                                       ]
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #Nil['nil']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['l2']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_bullet_multiparagraph']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['* l1\n\n  l1+\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['List']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['BULLET']
                                       $variadic: #Variadic[
                                          $base: #Array[
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l1']
                                                         ]
                                                      ]
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['BlankLine']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                      ]
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l1+']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_bullet_indent_verbatim']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['* l1\n  * l1.1\n    text\n      code\n        code\n\n    text\n* l2\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['list']
                                    $param: #List[
                                       $expression: #NameExpr['BULLET']
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #Nil['nil']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['l1']
                                                ]
                                             ]
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['list']
                                                $param: #List[
                                                   $expression: #NameExpr['BULLET']
                                                   $expression: #ApplyExpr[
                                                      #Self['self']
                                                      $recv: #NameExpr['item']
                                                      $param: #List[
                                                         $expression: #Nil['nil']
                                                         $expression: #ApplyExpr[
                                                            #Self['self']
                                                            $recv: #NameExpr['para']
                                                            $param: #List[
                                                               $expression: #StringExpr['l1.1 ']
                                                               $expression: #StringExpr['text']
                                                            ]
                                                         ]
                                                         $expression: #ApplyExpr[
                                                            #Self['self']
                                                            $recv: #NameExpr['verb']
                                                            $param: #List[
                                                               $expression: #StringExpr['code\\n']
                                                               $expression: #StringExpr['  code\\n']
                                                            ]
                                                         ]
                                                         $expression: #ApplyExpr[
                                                            #Self['self']
                                                            $recv: #NameExpr['para']
                                                            $param: #List[
                                                               $expression: #StringExpr['text']
                                                            ]
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #Nil['nil']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['l2']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_dash']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['- one\n- two\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['List']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['BULLET']
                                       $variadic: #Variadic[
                                          $base: #Array[
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['one']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['two']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_heading']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #StringExpr['= heading one']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Heading']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #IntExpr['1']
                                       $expression: #StringExpr['heading one']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_heading_three']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #StringExpr['=== heading three']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Heading']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #IntExpr['3']
                                       $expression: #StringExpr['heading three']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_heading_bullet']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #StringExpr['= * heading one']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Heading']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #IntExpr['1']
                                       $expression: #StringExpr['* heading one']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_heading_empty']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['===\n* bullet\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Heading']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #IntExpr['3']
                                       $expression: #StringExpr['']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['BlankLine']
                                    ]
                                    $recv: #NameExpr['new']
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['List']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['BULLET']
                                       $variadic: #Variadic[
                                          $base: #Array[
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['bullet']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_heading_heading']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #StringExpr['= =']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Heading']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #IntExpr['1']
                                       $expression: #StringExpr['=']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_heading_lalpha']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #StringExpr['= b. heading one']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Heading']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #IntExpr['1']
                                       $expression: #StringExpr['b. heading one']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_heading_label']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #StringExpr['= [heading one]']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Heading']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #IntExpr['1']
                                       $expression: #StringExpr['[heading one]']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_heading_note']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #StringExpr['= heading one::']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Heading']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #IntExpr['1']
                                       $expression: #StringExpr['heading one::']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_heading_number']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #StringExpr['= 5. heading one']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Heading']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #IntExpr['1']
                                       $expression: #StringExpr['5. heading one']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_heading_ualpha']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #StringExpr['= B. heading one']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Heading']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #IntExpr['1']
                                       $expression: #StringExpr['B. heading one']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_label']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['[one] item one\n[two] item two\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['list']
                                    $param: #List[
                                       $expression: #NameExpr['LABEL']
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #ParcentNotation['%w[one]']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['item one']
                                                ]
                                             ]
                                          ]
                                       ]
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #ParcentNotation['%w[two]']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['item two']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_label_bullet']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['[cat] l1\n      * l1.1\n[dog] l2\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['list']
                                    $param: #List[
                                       $expression: #NameExpr['LABEL']
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #ParcentNotation['%w[cat]']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['l1']
                                                ]
                                             ]
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['list']
                                                $param: #List[
                                                   $expression: #NameExpr['BULLET']
                                                   $expression: #ApplyExpr[
                                                      #Self['self']
                                                      $recv: #NameExpr['item']
                                                      $param: #List[
                                                         $expression: #Nil['nil']
                                                         $expression: #ApplyExpr[
                                                            #Self['self']
                                                            $recv: #NameExpr['para']
                                                            $param: #List[
                                                               $expression: #StringExpr['l1.1']
                                                            ]
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #ParcentNotation['%w[dog]']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['l2']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_label_multi_label']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['[one]\n[two] some description\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['list']
                                    $param: #List[
                                       $expression: #NameExpr['LABEL']
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #ParcentNotation['%w[one two]']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['some description']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_label_multi_line']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['[cat] l1\n      continuation\n[dog] l2\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['list']
                                    $param: #List[
                                       $expression: #NameExpr['LABEL']
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #ParcentNotation['%w[cat]']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['l1 ']
                                                   $expression: #StringExpr['continuation']
                                                ]
                                             ]
                                          ]
                                       ]
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #ParcentNotation['%w[dog]']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['l2']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_label_newline']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['[one]\n  item one\n[two]\n  item two\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['list']
                                    $param: #List[
                                       $expression: #NameExpr['LABEL']
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #ParcentNotation['%w[one]']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['item one']
                                                ]
                                             ]
                                          ]
                                       ]
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #ParcentNotation['%w[two]']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['item two']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_lalpha']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['a. l1\nb. l2\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['List']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['LALPHA']
                                       $variadic: #Variadic[
                                          $base: #Array[
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l1']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l2']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_lalpha_ualpha']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['a. l1\nb. l2\nA. l3\nA. l4\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['List']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['LALPHA']
                                       $variadic: #Variadic[
                                          $base: #Array[
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l1']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l2']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['List']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['UALPHA']
                                       $variadic: #Variadic[
                                          $base: #Array[
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l3']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l4']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_lalpha_utf_8']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['a. 新しい機能\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['List']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['LALPHA']
                                       $variadic: #Variadic[
                                          $base: #Array[
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['新しい機能']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_line_break']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #StringExpr['now is\\nthe time  \\nfor all']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['para']
                                    $param: #List[
                                       $expression: #StringExpr['now is ']
                                       $expression: #StringExpr['the time']
                                    ]
                                 ]
                                 $expression: #NameExpr['blank_line']
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['para']
                                    $param: #List[
                                       $expression: #StringExpr['for all']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_list_list_1']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['10. para 1\n\n    [label 1]\n      para 1.1\n\n        code\n\n      para 1.2\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['list']
                                    $param: #List[
                                       $expression: #NameExpr['NUMBER']
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #Nil['nil']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['para 1']
                                                ]
                                             ]
                                             $expression: #NameExpr['blank_line']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['list']
                                                $param: #List[
                                                   $expression: #NameExpr['LABEL']
                                                   $expression: #ApplyExpr[
                                                      #Self['self']
                                                      $recv: #NameExpr['item']
                                                      $param: #List[
                                                         $expression: #ParcentNotation['%w[label\\ 1]']
                                                         $expression: #ApplyExpr[
                                                            #Self['self']
                                                            $recv: #NameExpr['para']
                                                            $param: #List[
                                                               $expression: #StringExpr['para 1.1']
                                                            ]
                                                         ]
                                                         $expression: #NameExpr['blank_line']
                                                         $expression: #ApplyExpr[
                                                            #Self['self']
                                                            $recv: #NameExpr['verb']
                                                            $param: #List[
                                                               $expression: #StringExpr['code\\n']
                                                            ]
                                                         ]
                                                         $expression: #ApplyExpr[
                                                            #Self['self']
                                                            $recv: #NameExpr['para']
                                                            $param: #List[
                                                               $expression: #StringExpr['para 1.2']
                                                            ]
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_list_list_2']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['6. para\n\n   label 1::  text 1\n   label 2::  text 2\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['list']
                                    $param: #List[
                                       $expression: #NameExpr['NUMBER']
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #Nil['nil']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['para']
                                                ]
                                             ]
                                             $expression: #NameExpr['blank_line']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['list']
                                                $param: #List[
                                                   $expression: #NameExpr['NOTE']
                                                   $expression: #ApplyExpr[
                                                      #Self['self']
                                                      $recv: #NameExpr['item']
                                                      $param: #List[
                                                         $expression: #ParcentNotation['%w[label\\ 1]']
                                                         $expression: #ApplyExpr[
                                                            #Self['self']
                                                            $recv: #NameExpr['para']
                                                            $param: #List[
                                                               $expression: #StringExpr['text 1']
                                                            ]
                                                         ]
                                                      ]
                                                   ]
                                                   $expression: #ApplyExpr[
                                                      #Self['self']
                                                      $recv: #NameExpr['item']
                                                      $param: #List[
                                                         $expression: #ParcentNotation['%w[label\\ 2]']
                                                         $expression: #ApplyExpr[
                                                            #Self['self']
                                                            $recv: #NameExpr['para']
                                                            $param: #List[
                                                               $expression: #StringExpr['text 2']
                                                            ]
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_list_verbatim']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['* one\n    verb1\n    verb2\n* two\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['List']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['BULLET']
                                       $variadic: #Variadic[
                                          $base: #Array[
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['one']
                                                         ]
                                                      ]
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Verbatim']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['verb1\\n']
                                                            $expression: #StringExpr['verb2\\n']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['two']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_lists']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['now is\n* l1\n1. n1\n2. n2\n* l2\nthe time\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['now is']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['List']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['BULLET']
                                       $variadic: #Variadic[
                                          $base: #Array[
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l1']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['List']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['NUMBER']
                                       $variadic: #Variadic[
                                          $base: #Array[
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['n1']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['n2']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['List']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['BULLET']
                                       $variadic: #Variadic[
                                          $base: #Array[
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l2']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['the time']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_note']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['one:: item one\ntwo:: item two\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['list']
                                    $param: #List[
                                       $expression: #NameExpr['NOTE']
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #ParcentNotation['%w[one]']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['item one']
                                                ]
                                             ]
                                          ]
                                       ]
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #ParcentNotation['%w[two]']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['item two']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_note_empty']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['one::\ntwo::\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['list']
                                    $param: #List[
                                       $expression: #NameExpr['NOTE']
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #ParcentNotation['%w[one two]']
                                             $expression: #NameExpr['blank_line']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_note_note']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['one:: two::\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['list']
                                    $param: #List[
                                       $expression: #NameExpr['NOTE']
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #ParcentNotation['%w[one]']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['list']
                                                $param: #List[
                                                   $expression: #NameExpr['NOTE']
                                                   $expression: #ApplyExpr[
                                                      #Self['self']
                                                      $recv: #NameExpr['item']
                                                      $param: #List[
                                                         $expression: #ParcentNotation['%w[two]']
                                                         $expression: #NameExpr['blank_line']
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_number_bullet']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['1. l1\n   * l1.1\n2. l2\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['list']
                                    $param: #List[
                                       $expression: #NameExpr['NUMBER']
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #Nil['nil']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['l1']
                                                ]
                                             ]
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['list']
                                                $param: #List[
                                                   $expression: #NameExpr['BULLET']
                                                   $expression: #ApplyExpr[
                                                      #Self['self']
                                                      $recv: #NameExpr['item']
                                                      $param: #List[
                                                         $expression: #Nil['nil']
                                                         $expression: #ApplyExpr[
                                                            #Self['self']
                                                            $recv: #NameExpr['para']
                                                            $param: #List[
                                                               $expression: #StringExpr['l1.1']
                                                            ]
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['item']
                                          $param: #List[
                                             $expression: #Nil['nil']
                                             $expression: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['para']
                                                $param: #List[
                                                   $expression: #StringExpr['l2']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_paragraph']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['now is the time\n\nfor all good men\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['now is the time']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['BlankLine']
                                    ]
                                    $recv: #NameExpr['new']
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['for all good men']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_paragraph_multiline']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #StringExpr['now is the time\\nfor all good men']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['@RM']
                                 $name: #NameExpr['Paragraph']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #StringExpr['now is the time ']
                                 $expression: #StringExpr['for all good men']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['expected']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_paragraph_verbatim']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['now is the time\n  code _line_ here\nfor all good men\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['now is the time']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['code _line_ here\\n']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['for all good men']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_rule']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['now is the time\n\n---\n\nfor all good men\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['now is the time']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['BlankLine']
                                    ]
                                    $recv: #NameExpr['new']
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Rule']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['BlankLine']
                                    ]
                                    $recv: #NameExpr['new']
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['for all good men']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_ualpha']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['A. l1\nB. l2\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['List']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['UALPHA']
                                       $variadic: #Variadic[
                                          $base: #Array[
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l1']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                                $expression: #ApplyExpr[
                                                   $recv: #Field[
                                                      $recv: #NameExpr['@RM']
                                                      $name: #NameExpr['ListItem']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Nil['nil']
                                                      $expression: #ApplyExpr[
                                                         $recv: #Field[
                                                            $recv: #NameExpr['@RM']
                                                            $name: #NameExpr['Paragraph']
                                                         ]
                                                         $recv: #NameExpr['new']
                                                         $param: #List[
                                                            $expression: #StringExpr['l2']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_trailing_cr']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['Text']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #StringExpr['Text\\r']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['now is\n   code\nthe time\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['now is']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['code\\n']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['the time']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim_bullet']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['  * blah\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['* blah\\n']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim_dash']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['  - blah\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['- blah\\n']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim_fold']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['now is\n   code\n\n\n   code1\n\nthe time\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['now is']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['code\\n']
                                       $expression: #StringExpr['\\n']
                                       $expression: #StringExpr['code1\\n']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['the time']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim_heading']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['text\n   ===   heading three\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['text']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['===   heading three\\n']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim_heading2']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #StringExpr['text\\n   code\\n=== heading three']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['text']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['code\\n']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Heading']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #IntExpr['3']
                                       $expression: #StringExpr['heading three']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim_label']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['  [blah] blah\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['[blah] blah\\n']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim_lalpha']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['  b. blah\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['b. blah\\n']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim_markup_example']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['text\n   code\n   === heading three\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['text']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['code\\n']
                                       $expression: #StringExpr['=== heading three\\n']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim_merge']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['now is\n   code\n\n   code1\nthe time\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['now is']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['code\\n']
                                       $expression: #StringExpr['\\n']
                                       $expression: #StringExpr['code1\\n']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['the time']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim_merge2']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['now is\n   code\n\n   code1\n\n   code2\nthe time\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['now is']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['code\\n']
                                       $expression: #StringExpr['\\n']
                                       $expression: #StringExpr['code1\\n']
                                       $expression: #StringExpr['\\n']
                                       $expression: #StringExpr['code2\\n']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['the time']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim_multiline']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['now is\n   code\n   code1\nthe time\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['now is']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['code\\n']
                                       $expression: #StringExpr['code1\\n']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['the time']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim_multilevel']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['now is the time\n  code\n more code\nfor all good men\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['now is the time']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr[' code\\n']
                                       $expression: #StringExpr['more code\\n']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['for all good men']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim_note']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['  blah:: blah\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['blah:: blah\\n']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim_number']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['  2. blah\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['2. blah\\n']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim_rule']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['text\n\n  --- lib/blah.rb.orig\n  +++ lib/blah.rb\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['text']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['BlankLine']
                                    ]
                                    $recv: #NameExpr['new']
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['--- lib/blah.rb.orig\\n']
                                       $expression: #StringExpr['+++ lib/blah.rb\\n']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim_rule2']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['text\n\n  ---\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['text']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['BlankLine']
                                    ]
                                    $recv: #NameExpr['new']
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['---']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim_trim']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['now is\n   code\n\n   code1\n\nthe time\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['now is']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['code\\n']
                                       $expression: #StringExpr['\\n']
                                       $expression: #StringExpr['code1\\n']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['the time']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_verbatim_ualpha']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['  B. blah\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['B. blah\\n']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #NameExpr['str']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_whitespace']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['hello']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #StringExpr['hello']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['hello ']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #StringExpr['  hello ']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['hello          ']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #StringExpr['                 hello          ']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['1']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['2\\n']
                                       $expression: #StringExpr[' 3']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #StringExpr['1\\n 2\\n  3']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['1\\n']
                                       $expression: #StringExpr[' 2\\n']
                                       $expression: #StringExpr['  3']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #StringExpr['  1\\n   2\\n    3']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['1']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['2\\n']
                                       $expression: #StringExpr[' 3\\n']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['1']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['2']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #StringExpr['1\\n 2\\n  3\\n1\\n 2']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['1\\n']
                                       $expression: #StringExpr[' 2\\n']
                                       $expression: #StringExpr['  3\\n']
                                       $expression: #StringExpr['1\\n']
                                       $expression: #StringExpr[' 2']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #StringExpr['  1\\n   2\\n    3\\n  1\\n   2']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Verbatim']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['1\\n']
                                       $expression: #StringExpr[' 2\\n']
                                       $expression: #StringExpr['\\n']
                                       $expression: #StringExpr['  3']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@RMP']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #StringExpr['  1\\n   2\\n\\n    3']
                                    ]
                                 ]
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_peek_token']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['parser']
                           $right: #NameExpr['util_parser']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['HEADER']
                                    $expression: #IntExpr['1']
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['parser']
                                 $recv: #NameExpr['peek_token']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['8']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['parser']
                                    $recv: #NameExpr['tokens']
                                 ]
                                 $recv: #NameExpr['length']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_skip']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['parser']
                           $right: #NameExpr['util_parser']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['HEADER']
                                    $expression: #IntExpr['1']
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['parser']
                                 $recv: #NameExpr['skip']
                                 $param: #List[
                                    $expression: #NameExpr['HEADER']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['TEXT']
                                    $expression: #StringExpr['Heading']
                                    $expression: #IntExpr['2']
                                    $expression: #IntExpr['0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['parser']
                                 $recv: #NameExpr['get']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['NEWLINE']
                                    $expression: #StringExpr['\\n']
                                    $expression: #IntExpr['9']
                                    $expression: #IntExpr['0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['parser']
                                 $recv: #NameExpr['peek_token']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_raises']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['RDoc']
                                       $name: #NameExpr['Markup']
                                    ]
                                    $name: #NameExpr['Parser']
                                 ]
                                 $name: #NameExpr['ParseError']
                              ]
                           ]
                           $body: #Block[
                              $body: #ApplyExpr[
                                 $base: #NameExpr['parser']
                                 $recv: #NameExpr['skip']
                                 $param: #List[
                                    $expression: #NameExpr['NONE']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['NEWLINE']
                                    $expression: #StringExpr['\\n']
                                    $expression: #IntExpr['9']
                                    $expression: #IntExpr['0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['parser']
                                 $recv: #NameExpr['peek_token']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Nil['nil']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['parser']
                                 $recv: #NameExpr['skip']
                                 $param: #List[
                                    $expression: #NameExpr['NONE']
                                    $expression: #FalseExpr['false']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['NEWLINE']
                                    $expression: #StringExpr['\\n']
                                    $expression: #IntExpr['9']
                                    $expression: #IntExpr['0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['parser']
                                 $recv: #NameExpr['peek_token']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_bullet']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['* l1\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['BULLET']
                                       $expression: #StringExpr['*']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1']
                                       $expression: #IntExpr['2']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['4']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_bullet_indent']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['* l1\n  * l1.1\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['BULLET']
                                       $expression: #StringExpr['*']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1']
                                       $expression: #IntExpr['2']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['4']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['BULLET']
                                       $expression: #StringExpr['*']
                                       $expression: #IntExpr['2']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1.1']
                                       $expression: #IntExpr['4']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['8']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_heading']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['= Heading\n== Heading 2\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['HEADER']
                                       $expression: #IntExpr['1']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['Heading']
                                       $expression: #IntExpr['2']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['9']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['HEADER']
                                       $expression: #IntExpr['2']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['Heading 2']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['12']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_heading_empty']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['===\n* bullet\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['HEADER']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['BULLET']
                                       $expression: #StringExpr['*']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['bullet']
                                       $expression: #IntExpr['2']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['8']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_heading_heading']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['= =\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['HEADER']
                                       $expression: #IntExpr['1']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['=']
                                       $expression: #IntExpr['2']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_heading_no_space']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['=Heading\n==Heading 2\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['HEADER']
                                       $expression: #IntExpr['1']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['Heading']
                                       $expression: #IntExpr['1']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['8']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['HEADER']
                                       $expression: #IntExpr['2']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['Heading 2']
                                       $expression: #IntExpr['2']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['11']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_label']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['[cat] l1\n[dog] l1.1\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['LABEL']
                                       $expression: #StringExpr['cat']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1']
                                       $expression: #IntExpr['6']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['8']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['LABEL']
                                       $expression: #StringExpr['dog']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1.1']
                                       $expression: #IntExpr['6']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['10']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_label_note']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['[label]\n  note::\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['LABEL']
                                       $expression: #StringExpr['label']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['7']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NOTE']
                                       $expression: #StringExpr['note']
                                       $expression: #IntExpr['2']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['8']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_label_newline']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['[cat]\n  l1\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['LABEL']
                                       $expression: #StringExpr['cat']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['5']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1']
                                       $expression: #IntExpr['2']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['4']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_label_newline_windows']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['[cat]\\r\n  l1\\r\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['LABEL']
                                       $expression: #StringExpr['cat']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['6']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1']
                                       $expression: #IntExpr['2']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['5']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_lalpha']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['a. l1\nb. l1.1\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['LALPHA']
                                       $expression: #StringExpr['a']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['5']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['LALPHA']
                                       $expression: #StringExpr['b']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1.1']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['7']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_line_break']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #StringExpr['now is\\nthe time  \\nfor all\\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['now is']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['6']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['the time']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['BREAK']
                                       $expression: #StringExpr['  ']
                                       $expression: #IntExpr['8']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['10']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['for all']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['7']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_line_break_long']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #StringExpr['now is\\nthe time   \\nfor all\\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['now is']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['6']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['the time ']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['BREAK']
                                       $expression: #StringExpr['  ']
                                       $expression: #IntExpr['9']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['11']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['for all']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['7']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_line_break_no_short']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #StringExpr['now is\\nthe time \\nfor all\\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['now is']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['6']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['the time ']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['9']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['for all']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['7']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_note']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['cat:: l1\ndog:: l1.1\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NOTE']
                                       $expression: #StringExpr['cat']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1']
                                       $expression: #IntExpr['6']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['8']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NOTE']
                                       $expression: #StringExpr['dog']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1.1']
                                       $expression: #IntExpr['6']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['10']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_note_empty']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['cat::\ndog::\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NOTE']
                                       $expression: #StringExpr['cat']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['5']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NOTE']
                                       $expression: #StringExpr['dog']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['5']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_note_newline']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['cat::\n  l1\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NOTE']
                                       $expression: #StringExpr['cat']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['5']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1']
                                       $expression: #IntExpr['2']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['4']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_note_utf_8']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['cät:: l1a\n      l1b\ndøg:: l2a\n      l2b\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NOTE']
                                       $expression: #StringExpr['cät']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1a']
                                       $expression: #IntExpr['6']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['9']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1b']
                                       $expression: #IntExpr['6']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['9']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NOTE']
                                       $expression: #StringExpr['døg']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l2a']
                                       $expression: #IntExpr['6']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['9']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l2b']
                                       $expression: #IntExpr['6']
                                       $expression: #IntExpr['3']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['9']
                                       $expression: #IntExpr['3']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_note_newline_windows']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['cat::\\r\n  l1\\r\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NOTE']
                                       $expression: #StringExpr['cat']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['6']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1']
                                       $expression: #IntExpr['2']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['5']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_note_not']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['Cat::Dog\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['Cat::Dog']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['8']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_number']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['1. l1\n2. l1.1\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NUMBER']
                                       $expression: #StringExpr['1']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['5']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NUMBER']
                                       $expression: #StringExpr['2']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1.1']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['7']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_number_period']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['1. blah blah blah\n   l.\n2. blah blah blah blah\n   d.\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NUMBER']
                                       $expression: #StringExpr['1']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['blah blah blah']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['17']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l.']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['5']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NUMBER']
                                       $expression: #StringExpr['2']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['blah blah blah blah']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['22']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['d.']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['3']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['5']
                                       $expression: #IntExpr['3']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_number_period_continue']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['1. blah blah blah\n   l.  more stuff\n2. blah blah blah blah\n   d. other stuff\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NUMBER']
                                       $expression: #StringExpr['1']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['blah blah blah']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['17']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['LALPHA']
                                       $expression: #StringExpr['l']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['more stuff']
                                       $expression: #IntExpr['7']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['17']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NUMBER']
                                       $expression: #StringExpr['2']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['blah blah blah blah']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['22']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['LALPHA']
                                       $expression: #StringExpr['d']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['3']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['other stuff']
                                       $expression: #IntExpr['6']
                                       $expression: #IntExpr['3']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['17']
                                       $expression: #IntExpr['3']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_paragraphs']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['now is\nthe time\n\nfor all\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['now is']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['6']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['the time']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['8']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['for all']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['3']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['7']
                                       $expression: #IntExpr['3']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_rule']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['---\n\n--- blah ---\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['RULE']
                                       $expression: #IntExpr['1']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['--- blah ---']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['12']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_rule_windows']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['---\\r\n\n--- blah ---\\r\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['RULE']
                                       $expression: #IntExpr['1']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['4']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['--- blah ---']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['13']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_ualpha']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['A. l1\nB. l1.1\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['UALPHA']
                                       $expression: #StringExpr['A']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['5']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['UALPHA']
                                       $expression: #StringExpr['B']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['l1.1']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['7']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_verbatim_heading']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['Example heading:\n\n   === heading three\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['Example heading:']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['16']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['0']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['HEADER']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['heading three']
                                       $expression: #IntExpr['7']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['20']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_verbatim_rule']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['  Verbatim section here that is double-underlined\n  ===============================================\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['Verbatim section here that is double-underlined']
                                       $expression: #IntExpr['2']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['49']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['HEADER']
                                       $expression: #IntExpr['47']
                                       $expression: #IntExpr['2']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['49']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_tokenize_verbatim_rule_fancy']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['  A\n    b\n  ===============================================\n    c\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['A']
                                       $expression: #IntExpr['2']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['3']
                                       $expression: #IntExpr['0']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['b']
                                       $expression: #IntExpr['4']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['5']
                                       $expression: #IntExpr['1']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['HEADER']
                                       $expression: #IntExpr['47']
                                       $expression: #IntExpr['2']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['49']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['TEXT']
                                       $expression: #StringExpr['c']
                                       $expression: #IntExpr['4']
                                       $expression: #IntExpr['3']
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['NEWLINE']
                                       $expression: #StringExpr['\\n']
                                       $expression: #IntExpr['5']
                                       $expression: #IntExpr['3']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@RMP']
                                 $recv: #NameExpr['tokenize']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_token_pos']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['parser']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@RMP']
                              $recv: #NameExpr['new']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['s']
                           $right: #ApplyExpr[
                              $base: #NameExpr['parser']
                              $recv: #NameExpr['setup_scanner']
                              $param: #List[
                                 $expression: #StringExpr['cät']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['s']
                           $recv: #NameExpr['scan']
                           $param: #List[
                              $expression: #Regex['/\\S+/']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #IntExpr['3']
                                    $expression: #IntExpr['0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['parser']
                                 $recv: #NameExpr['token_pos']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['s']
                                       $recv: #NameExpr['pos']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_verbatim_normalize']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['v']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['@RM']
                                 $name: #NameExpr['Verbatim']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #StringExpr['foo\\n']
                                 $expression: #StringExpr['\\n']
                                 $expression: #StringExpr['\\n']
                                 $expression: #StringExpr['bar\\n']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['v']
                           $recv: #NameExpr['normalize']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['foo\\n']
                                    $expression: #StringExpr['\\n']
                                    $expression: #StringExpr['bar\\n']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['v']
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['v']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['@RM']
                                 $name: #NameExpr['Verbatim']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #StringExpr['foo\\n']
                                 $expression: #StringExpr['\\n']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['v']
                           $recv: #NameExpr['normalize']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['foo\\n']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['v']
                                 $recv: #NameExpr['parts']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_unget']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['parser']
                           $right: #NameExpr['util_parser']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['parser']
                           $recv: #NameExpr['get']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['parser']
                           $recv: #NameExpr['unget']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['HEADER']
                                    $expression: #IntExpr['1']
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['parser']
                                 $recv: #NameExpr['peek_token']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_raises']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['@RMP']
                                 $name: #NameExpr['Error']
                              ]
                           ]
                           $body: #Block[
                              $body: #ApplyExpr[
                                 $recv: #NameExpr['parser']
                                 $recv: #NameExpr['unget']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['8']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['parser']
                                    $recv: #NameExpr['tokens']
                                 ]
                                 $recv: #NameExpr['length']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['util_parser']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #HereDocument['= Heading\n\nSome text here\nsome more text over here\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@parser']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@RMP']
                              $recv: #NameExpr['new']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@parser']
                           $recv: #NameExpr['tokenize']
                           $param: #List[
                              $expression: #NameExpr['str']
                           ]
                        ]
                        $statement: #NameExpr['@parser']
                     ]
                  ]
               ]
            ]
         ]
      ]
   ]
   #Comsumed['comsumed']
]
