#Source[
   #List[
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['tsort']
         ]
      ]
      $statement: #Class[
         $name: #NestedName[
            $path: #Field[
               $recv: #NameExpr['RDoc']
               $name: #NameExpr['Parser']
            ]
            $name: #NameExpr['C']
         ]
         $super: #Field[
            $recv: #NameExpr['RDoc']
            $name: #NameExpr['Parser']
         ]
         $body: #BlockExpr[
            $main: #List[
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['parse_files_matching']
                  $param: #List[
                     $expression: #Regex['/\\.(?:([CcHh])\\1?|c([+xp])\\2|y)\\z/']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['include']
                  $param: #List[
                     $expression: #Field[
                        $recv: #NameExpr['RDoc']
                        $name: #NameExpr['Text']
                     ]
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_reader']
                  $param: #List[
                     $expression: #NameExpr['classes']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_accessor']
                  $param: #List[
                     $expression: #NameExpr['content']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_reader']
                  $param: #List[
                     $expression: #NameExpr['enclosure_dependencies']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_reader']
                  $param: #List[
                     $expression: #NameExpr['known_classes']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_reader']
                  $param: #List[
                     $expression: #NameExpr['missing_dependencies']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_reader']
                  $param: #List[
                     $expression: #NameExpr['singleton_classes']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_reader']
                  $param: #List[
                     $expression: #NameExpr['top_level']
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['initialize']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['top_level']
                     ]
                     $param: #Param[
                        $param: #NameExpr['file_name']
                     ]
                     $param: #Param[
                        $param: #NameExpr['content']
                     ]
                     $param: #Param[
                        $param: #NameExpr['options']
                     ]
                     $param: #Param[
                        $param: #NameExpr['stats']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #Super['super']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@known_classes']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['RDoc']
                                 $name: #NameExpr['KNOWN_CLASSES']
                              ]
                              $recv: #NameExpr['dup']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@content']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['handle_tab_width']
                              $param: #List[
                                 $command: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['handle_ifdefs_in']
                                    $param: #List[
                                       $expression: #NameExpr['@content']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@file_dir']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['dirname']
                              $param: #List[
                                 $expression: #NameExpr['@file_name']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@classes']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['load_variable_map']
                              $param: #List[
                                 $expression: #NameExpr['c_class_variables']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@singleton_classes']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['load_variable_map']
                              $param: #List[
                                 $expression: #NameExpr['c_singleton_class_variables']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@methods']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['Hash']
                              $recv: #NameExpr['new']
                              $body: #Block[
                                 $param: #MultipleLeftHandSideExpression[
                                    $item: #NameExpr['h']
                                    $item: #NameExpr['f']
                                 ]
                                 $body: #AssignExpr[
                                    $left: #Indexer[
                                       $base: #NameExpr['h']
                                       $index: #List[
                                          $expression: #NameExpr['f']
                                       ]
                                    ]
                                    $right: #ApplyExpr[
                                       $recv: #NameExpr['Hash']
                                       $recv: #NameExpr['new']
                                       $body: #Block[
                                          $param: #MultipleLeftHandSideExpression[
                                             $item: #NameExpr['i']
                                             $item: #NameExpr['m']
                                          ]
                                          $body: #AssignExpr[
                                             $left: #Indexer[
                                                $base: #NameExpr['i']
                                                $index: #List[
                                                   $expression: #NameExpr['m']
                                                ]
                                             ]
                                             $right: #Array['[]']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@missing_dependencies']
                           $right: #List['{}']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@enclosure_dependencies']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['Hash']
                              $recv: #NameExpr['new']
                              $body: #Block[
                                 $param: #MultipleLeftHandSideExpression[
                                    $item: #NameExpr['h']
                                    $item: #NameExpr['k']
                                 ]
                                 $body: #AssignExpr[
                                    $left: #Indexer[
                                       $base: #NameExpr['h']
                                       $index: #List[
                                          $expression: #NameExpr['k']
                                       ]
                                    ]
                                    $right: #Array['[]']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@enclosure_dependencies']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@missing_dependencies']
                              $expression: #NameExpr['@missing_dependencies']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@enclosure_dependencies']
                           $recv: #NameExpr['extend']
                           $param: #List[
                              $expression: #NameExpr['TSort']
                           ]
                        ]
                        $statement: #SFuncDecl[
                           $path: #NameExpr['@enclosure_dependencies']
                           $name: #NameExpr['tsort_each_node']
                           $param: #List[
                              $param: #ProcedureParam[
                                 $name: #NameExpr['block']
                              ]
                           ]
                           $body: #BlockExpr[
                              $main: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['each_key']
                                 $param: #List[
                                    $procedure: #Procedure[
                                       $base: #NameExpr['block']
                                    ]
                                 ]
                              ]
                              $rescue: #List[
                                 $rescue: #Rescue[
                                    $class: #Field[
                                       $recv: #NameExpr['TSort']
                                       $name: #NameExpr['Cyclic']
                                    ]
                                    $target: #NameExpr['e']
                                    $then: #List[
                                       $statement: #AssignExpr[
                                          $left: #NameExpr['cycle_vars']
                                          $right: #ApplyExpr[
                                             $recv: #ApplyExpr[
                                                $recv: #ApplyExpr[
                                                   $recv: #NameExpr['e']
                                                   $recv: #NameExpr['message']
                                                ]
                                                $recv: #NameExpr['scan']
                                                $param: #List[
                                                   $expression: #Regex['/"(.*?)"/']
                                                ]
                                             ]
                                             $recv: #NameExpr['flatten']
                                          ]
                                       ]
                                       $statement: #AssignExpr[
                                          $left: #NameExpr['cycle']
                                          $right: #ApplyExpr[
                                             $base: #ApplyExpr[
                                                $recv: #ApplyExpr[
                                                   $recv: #NameExpr['cycle_vars']
                                                   $recv: #NameExpr['sort']
                                                ]
                                                $recv: #NameExpr['map']
                                                $body: #Block[
                                                   $param: #NameExpr['var_name']
                                                   $body: #List[
                                                      $statement: #ApplyExpr[
                                                         #Self['self']
                                                         $recv: #NameExpr['delete']
                                                         $param: #List[
                                                            $expression: #NameExpr['var_name']
                                                         ]
                                                      ]
                                                      $statement: #MultipleAssign[
                                                         $left: #MultipleLeftHandSideExpression[
                                                            $item: #NameExpr['var_name']
                                                            $item: #NameExpr['type']
                                                            $item: #NameExpr['mod_name']
                                                         ]
                                                         $right: #Indexer[
                                                            $recv: #NameExpr['@missing_dependencies']
                                                            $index: #List[
                                                               $expression: #NameExpr['var_name']
                                                            ]
                                                         ]
                                                      ]
                                                      $statement: #StringExpr[
                                                         $inner: #NameExpr['type']
                                                         $inner: #NameExpr['mod_name']
                                                         $inner: #NameExpr['var_name']
                                                      ]
                                                   ]
                                                ]
                                             ]
                                             $recv: #NameExpr['join']
                                             $param: #List[
                                                $expression: #StringExpr[', ']
                                             ]
                                          ]
                                       ]
                                       $statement: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['warn']
                                          $param: #List[
                                             $expression: #StringExpr[
                                                $inner: #NameExpr['cycle']
                                             ]
                                          ]
                                       ]
                                       $statement: #Retry['retry']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #SFuncDecl[
                           $path: #NameExpr['@enclosure_dependencies']
                           $name: #NameExpr['tsort_each_child']
                           $param: #List[
                              $param: #Param[
                                 $param: #NameExpr['node']
                              ]
                              $param: #ProcedureParam[
                                 $name: #NameExpr['block']
                              ]
                           ]
                           $body: #BlockExpr[
                              $main: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['fetch']
                                    $param: #List[
                                       $expression: #NameExpr['node']
                                       $expression: #Array['[]']
                                    ]
                                 ]
                                 $recv: #NameExpr['each']
                                 $param: #List[
                                    $procedure: #Procedure[
                                       $base: #NameExpr['block']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['deduplicate_call_seq']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['@methods']
                        $recv: #NameExpr['each']
                        $body: #Block[
                           $param: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['var_name']
                              $item: #NameExpr['functions']
                           ]
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['class_name']
                                 $right: #Indexer[
                                    $recv: #NameExpr['@known_classes']
                                    $index: #List[
                                       $expression: #NameExpr['var_name']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['class_obj']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['find_class']
                                    $param: #List[
                                       $expression: #NameExpr['var_name']
                                       $expression: #NameExpr['class_name']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['functions']
                                 $recv: #NameExpr['each_value']
                                 $body: #Block[
                                    $param: #NameExpr['method_names']
                                    $body: #List[
                                       $statement: #IfExpr[
                                          $then: #Next['next']
                                          $cond: #EqExpr[
                                             $left: #ApplyExpr[
                                                $recv: #NameExpr['method_names']
                                                $recv: #NameExpr['length']
                                             ]
                                             $right: #IntExpr['1']
                                          ]
                                       ]
                                       $statement: #ApplyExpr[
                                          $recv: #NameExpr['method_names']
                                          $recv: #NameExpr['each']
                                          $body: #Block[
                                             $param: #NameExpr['method_name']
                                             $body: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['deduplicate_method_name']
                                                $param: #List[
                                                   $expression: #NameExpr['class_obj']
                                                   $expression: #NameExpr['method_name']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['deduplicate_method_name']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['class_obj']
                     ]
                     $param: #Param[
                        $param: #NameExpr['method_name']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #Unless[
                           $then: #RReturnStmt['return']
                           $cond: #AssignExpr[
                              $left: #NameExpr['method']
                              $right: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['class_obj']
                                    $recv: #NameExpr['method_list']
                                 ]
                                 $recv: #NameExpr['find']
                                 $body: #Block[
                                    $param: #NameExpr['m']
                                    $body: #EqExpr[
                                       $left: #ApplyExpr[
                                          $recv: #NameExpr['m']
                                          $recv: #NameExpr['name']
                                       ]
                                       $right: #NameExpr['method_name']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $then: #RReturnStmt['return']
                           $cond: #AssignExpr[
                              $left: #NameExpr['call_seq']
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['method']
                                 $recv: #NameExpr['call_seq']
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $then: #AssignExpr[
                              $left: #NameExpr['method_name']
                              $right: #Indexer[
                                 $recv: #NameExpr['method_name']
                                 $index: #List[
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['1']
                                 ]
                              ]
                           ]
                           $cond: #AssignExpr[
                              $left: #NameExpr['method_name']
                              $right: #ComplExpr[
                                 $expr: #Regex['/\\A\\[/']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['entries']
                           $right: #ApplyExpr[
                              $base: #NameExpr['call_seq']
                              $recv: #NameExpr['split']
                              $param: #List[
                                 $expression: #StringExpr['\\n']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['matching']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['entries']
                              $recv: #NameExpr['select']
                              $body: #Block[
                                 $param: #NameExpr['entry']
                                 $body: #OrExpr[
                                    $left: #AssignExpr[
                                       $left: #NameExpr['entry']
                                       $right: #ComplExpr[
                                          $expr: #Regex['/^\\w*\\.?#{Regexp.escape method_name}/']
                                       ]
                                    ]
                                    $right: #AssignExpr[
                                       $left: #NameExpr['entry']
                                       $right: #ComplExpr[
                                          $expr: #Regex['/\\s#{Regexp.escape method_name}\\s/']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['method']
                              $name: #NameExpr['call_seq']
                           ]
                           $right: #ApplyExpr[
                              $base: #NameExpr['matching']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #StringExpr['\\n']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['do_aliases']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['@content']
                        $recv: #NameExpr['scan']
                        $param: #List[
                           $expression: #Regex['/rb_define_alias\\s*\\(\n                   \\s*(\\w+),\n                   \\s*"(.+?)",\n                   \\s*"(.+?)"\n                   \\s*\\)/xm']
                        ]
                        $body: #Block[
                           $param: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['var_name']
                              $item: #NameExpr['new_name']
                              $item: #NameExpr['old_name']
                           ]
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['class_name']
                                 $right: #Indexer[
                                    $recv: #NameExpr['@known_classes']
                                    $index: #List[
                                       $expression: #NameExpr['var_name']
                                    ]
                                 ]
                              ]
                              $statement: #Unless[
                                 $cond: #NameExpr['class_name']
                                 $then: #List[
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['@options']
                                       $recv: #NameExpr['warn']
                                       $param: #List[
                                          $expression: #ModExpr[
                                             $left: #StringExpr['Enclosing class or module %p for alias %s %s is not known']
                                             $right: #Array[
                                                $index: #List[
                                                   $expression: #NameExpr['var_name']
                                                   $expression: #NameExpr['new_name']
                                                   $expression: #NameExpr['old_name']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                    $statement: #Next['next']
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['class_obj']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['find_class']
                                    $param: #List[
                                       $expression: #NameExpr['var_name']
                                       $expression: #NameExpr['class_name']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['al']
                                 $right: #ApplyExpr[
                                    $base: #Field[
                                       $recv: #NameExpr['RDoc']
                                       $name: #NameExpr['Alias']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['']
                                       $expression: #NameExpr['old_name']
                                       $expression: #NameExpr['new_name']
                                       $expression: #StringExpr['']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #Field[
                                    $base: #NameExpr['al']
                                    $name: #NameExpr['singleton']
                                 ]
                                 $right: #ApplyExpr[
                                    $base: #NameExpr['@singleton_classes']
                                    $recv: #NameExpr['key?']
                                    $param: #List[
                                       $expression: #NameExpr['var_name']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['comment']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['find_alias_comment']
                                    $param: #List[
                                       $expression: #NameExpr['var_name']
                                       $expression: #NameExpr['new_name']
                                       $expression: #NameExpr['old_name']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['comment']
                                 $recv: #NameExpr['normalize']
                              ]
                              $statement: #AssignExpr[
                                 $left: #Field[
                                    $base: #NameExpr['al']
                                    $name: #NameExpr['comment']
                                 ]
                                 $right: #NameExpr['comment']
                              ]
                              $statement: #ApplyExpr[
                                 $base: #NameExpr['al']
                                 $recv: #NameExpr['record_location']
                                 $param: #List[
                                    $expression: #NameExpr['@top_level']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $base: #NameExpr['class_obj']
                                 $recv: #NameExpr['add_alias']
                                 $param: #List[
                                    $expression: #NameExpr['al']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $base: #NameExpr['@stats']
                                 $recv: #NameExpr['add_alias']
                                 $param: #List[
                                    $expression: #NameExpr['al']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['do_attrs']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@content']
                           $recv: #NameExpr['scan']
                           $param: #List[
                              $expression: #Regex['/rb_attr\\s*\\(\n                   \\s*(\\w+),\n                   \\s*([\\w"()]+),\n                   \\s*([01]),\n                   \\s*([01]),\n                   \\s*\\w+\\);/xm']
                           ]
                           $body: #Block[
                              $param: #MultipleLeftHandSideExpression[
                                 $item: #NameExpr['var_name']
                                 $item: #NameExpr['attr_name']
                                 $item: #NameExpr['read']
                                 $item: #NameExpr['write']
                              ]
                              $body: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['handle_attr']
                                 $param: #List[
                                    $expression: #NameExpr['var_name']
                                    $expression: #NameExpr['attr_name']
                                    $expression: #NameExpr['read']
                                    $expression: #NameExpr['write']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@content']
                           $recv: #NameExpr['scan']
                           $param: #List[
                              $expression: #Regex['%r%rb_define_attr\\(\n                             \\s*([\\w\\.]+),\n                             \\s*"([^"]+)",\n                             \\s*(\\d+),\n                             \\s*(\\d+)\\s*\\);\n                %xm']
                           ]
                           $body: #Block[
                              $param: #MultipleLeftHandSideExpression[
                                 $item: #NameExpr['var_name']
                                 $item: #NameExpr['attr_name']
                                 $item: #NameExpr['read']
                                 $item: #NameExpr['write']
                              ]
                              $body: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['handle_attr']
                                 $param: #List[
                                    $expression: #NameExpr['var_name']
                                    $expression: #NameExpr['attr_name']
                                    $expression: #NameExpr['read']
                                    $expression: #NameExpr['write']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['do_boot_defclass']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['@content']
                        $recv: #NameExpr['scan']
                        $param: #List[
                           $expression: #Regex['/(\\w+)\\s*=\\s*boot_defclass\\s*\\(\\s*"(\\w+?)",\\s*(\\w+?)\\s*\\)/']
                        ]
                        $body: #Block[
                           $param: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['var_name']
                              $item: #NameExpr['class_name']
                              $item: #NameExpr['parent']
                           ]
                           $body: #List[
                              $statement: #IfExpr[
                                 $then: #AssignExpr[
                                    $left: #NameExpr['parent']
                                    $right: #Nil['nil']
                                 ]
                                 $cond: #EqExpr[
                                    $left: #NameExpr['parent']
                                    $right: #StringExpr['0']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['handle_class_module']
                                 $param: #List[
                                    $expression: #NameExpr['var_name']
                                    $expression: #NameExpr['class']
                                    $expression: #NameExpr['class_name']
                                    $expression: #NameExpr['parent']
                                    $expression: #Nil['nil']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['do_classes']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['do_boot_defclass']
                        $statement: #NameExpr['do_define_class']
                        $statement: #NameExpr['do_define_class_under']
                        $statement: #NameExpr['do_singleton_class']
                        $statement: #NameExpr['do_struct_define_without_accessor']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['do_constants']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@content']
                           $recv: #NameExpr['scan']
                           $param: #List[
                              $expression: #Regex['%r%\\Wrb_define_\n                   ( variable          |\n                     readonly_variable |\n                     const             |\n                     global_const        )\n               \\s*\\(\n                 (?:\\s*(\\w+),)?\n                 \\s*"(\\w+)",\n                 \\s*(.*?)\\s*\\)\\s*;\n                 %xm']
                           ]
                           $body: #Block[
                              $param: #MultipleLeftHandSideExpression[
                                 $item: #NameExpr['type']
                                 $item: #NameExpr['var_name']
                                 $item: #NameExpr['const_name']
                                 $item: #NameExpr['definition']
                              ]
                              $body: #List[
                                 $statement: #IfExpr[
                                    $then: #AssignExpr[
                                       $left: #NameExpr['var_name']
                                       $right: #StringExpr['rb_cObject']
                                    ]
                                    $cond: #OrExpr[
                                       $left: #NotExpr[
                                          $expr: #NameExpr['var_name']
                                       ]
                                       $right: #EqExpr[
                                          $left: #NameExpr['var_name']
                                          $right: #StringExpr['rb_mKernel']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['handle_constants']
                                    $param: #List[
                                       $expression: #NameExpr['type']
                                       $expression: #NameExpr['var_name']
                                       $expression: #NameExpr['const_name']
                                       $expression: #NameExpr['definition']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@content']
                           $recv: #NameExpr['scan']
                           $param: #List[
                              $expression: #Regex['%r%\n                  \\Wrb_curses_define_const\n                  \\s*\\(\n                    \\s*\n                    (\\w+)\n                    \\s*\n                  \\)\n                  \\s*;%xm']
                           ]
                           $body: #Block[
                              $param: #NameExpr['consts']
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['const']
                                    $right: #ApplyExpr[
                                       $recv: #NameExpr['consts']
                                       $recv: #NameExpr['first']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['handle_constants']
                                    $param: #List[
                                       $expression: #StringExpr['const']
                                       $expression: #StringExpr['mCurses']
                                       $expression: #NameExpr['const']
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['const']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@content']
                           $recv: #NameExpr['scan']
                           $param: #List[
                              $expression: #Regex['%r%\n                  \\Wrb_file_const\n                  \\s*\\(\n                    \\s*\n                    "([^"]+)",\n                    \\s*\n                    (.*?)\n                    \\s*\n                  \\)\n                  \\s*;%xm']
                           ]
                           $body: #Block[
                              $param: #MultipleLeftHandSideExpression[
                                 $item: #NameExpr['name']
                                 $item: #NameExpr['value']
                              ]
                              $body: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['handle_constants']
                                 $param: #List[
                                    $expression: #StringExpr['const']
                                    $expression: #StringExpr['rb_mFConst']
                                    $expression: #NameExpr['name']
                                    $expression: #NameExpr['value']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['do_define_class']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['@content']
                        $recv: #NameExpr['scan']
                        $param: #List[
                           $expression: #Regex['/([\\w\\.]+)\\s* = \\s*rb_define_class\\s*\n              \\(\n                 \\s*"(\\w+)",\n                 \\s*(\\w+)\\s*\n              \\)/mx']
                        ]
                        $body: #Block[
                           $param: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['var_name']
                              $item: #NameExpr['class_name']
                              $item: #NameExpr['parent']
                           ]
                           $body: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['handle_class_module']
                              $param: #List[
                                 $expression: #NameExpr['var_name']
                                 $expression: #NameExpr['class']
                                 $expression: #NameExpr['class_name']
                                 $expression: #NameExpr['parent']
                                 $expression: #Nil['nil']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['do_define_class_under']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['@content']
                        $recv: #NameExpr['scan']
                        $param: #List[
                           $expression: #Regex['/([\\w\\.]+)\\s* =                  # var_name\n                   \\s*rb_define_class_under\\s*\n                   \\(\n                     \\s* (\\w+),                    # under\n                     \\s* "(\\w+)",                  # class_name\n                     \\s*\n                     (?:\n                       ([\\w\\*\\s\\(\\)\\.\\->]+) |      # parent_name\n                       rb_path2class\\("([\\w:]+)"\\) # path\n                     )\n                     \\s*\n                   \\)\n                  /mx']
                        ]
                        $body: #Block[
                           $param: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['var_name']
                              $item: #NameExpr['under']
                              $item: #NameExpr['class_name']
                              $item: #NameExpr['parent_name']
                              $item: #NameExpr['path']
                           ]
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['parent']
                                 $right: #LOr[
                                    $left: #NameExpr['path']
                                    $right: #NameExpr['parent_name']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['handle_class_module']
                                 $param: #List[
                                    $expression: #NameExpr['var_name']
                                    $expression: #NameExpr['class']
                                    $expression: #NameExpr['class_name']
                                    $expression: #NameExpr['parent']
                                    $expression: #NameExpr['under']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['do_define_module']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['@content']
                        $recv: #NameExpr['scan']
                        $param: #List[
                           $expression: #Regex['/(\\w+)\\s* = \\s*rb_define_module\\s*\\(\\s*"(\\w+)"\\s*\\)/mx']
                        ]
                        $body: #Block[
                           $param: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['var_name']
                              $item: #NameExpr['class_name']
                           ]
                           $body: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['handle_class_module']
                              $param: #List[
                                 $expression: #NameExpr['var_name']
                                 $expression: #NameExpr['module']
                                 $expression: #NameExpr['class_name']
                                 $expression: #Nil['nil']
                                 $expression: #Nil['nil']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['do_define_module_under']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['@content']
                        $recv: #NameExpr['scan']
                        $param: #List[
                           $expression: #Regex['/(\\w+)\\s* = \\s*rb_define_module_under\\s*\n              \\(\n                 \\s*(\\w+),\n                 \\s*"(\\w+)"\n              \\s*\\)/mx']
                        ]
                        $body: #Block[
                           $param: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['var_name']
                              $item: #NameExpr['in_module']
                              $item: #NameExpr['class_name']
                           ]
                           $body: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['handle_class_module']
                              $param: #List[
                                 $expression: #NameExpr['var_name']
                                 $expression: #NameExpr['module']
                                 $expression: #NameExpr['class_name']
                                 $expression: #Nil['nil']
                                 $expression: #NameExpr['in_module']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['do_includes']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['@content']
                        $recv: #NameExpr['scan']
                        $param: #List[
                           $expression: #Regex['/rb_include_module\\s*\\(\\s*(\\w+?),\\s*(\\w+?)\\s*\\)/']
                        ]
                        $body: #Block[
                           $param: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['c']
                              $item: #NameExpr['m']
                           ]
                           $body: #List[
                              $statement: #Unless[
                                 $then: #Next['next']
                                 $cond: #AssignExpr[
                                    $left: #NameExpr['cls']
                                    $right: #Indexer[
                                       $recv: #NameExpr['@classes']
                                       $index: #List[
                                          $expression: #NameExpr['c']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['m']
                                 $right: #LOr[
                                    $left: #Indexer[
                                       $recv: #NameExpr['@known_classes']
                                       $index: #List[
                                          $expression: #NameExpr['m']
                                       ]
                                    ]
                                    $right: #NameExpr['m']
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['comment']
                                 $right: #ApplyExpr[
                                    $base: #Field[
                                       $recv: #NameExpr['RDoc']
                                       $name: #NameExpr['Comment']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['']
                                       $expression: #NameExpr['@top_level']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['incl']
                                 $right: #ApplyExpr[
                                    $base: #NameExpr['cls']
                                    $recv: #NameExpr['add_include']
                                    $param: #List[
                                       $expression: #ApplyExpr[
                                          $recv: #Field[
                                             $recv: #NameExpr['RDoc']
                                             $name: #NameExpr['Include']
                                          ]
                                          $recv: #NameExpr['new']
                                          $param: #List[
                                             $expression: #NameExpr['m']
                                             $expression: #NameExpr['comment']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $base: #NameExpr['incl']
                                 $recv: #NameExpr['record_location']
                                 $param: #List[
                                    $expression: #NameExpr['@top_level']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['do_methods']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@content']
                           $recv: #NameExpr['scan']
                           $param: #List[
                              $expression: #Regex['%r%rb_define_\n                   (\n                      singleton_method |\n                      method           |\n                      module_function  |\n                      private_method\n                   )\n                   \\s*\\(\\s*([\\w\\.]+),\n                     \\s*"([^"]+)",\n                     \\s*(?:RUBY_METHOD_FUNC\\(|VALUEFUNC\\(|\\(METHOD\\))?(\\w+)\\)?,\n                     \\s*(-?\\w+)\\s*\\)\n                   (?:;\\s*/[*/]\\s+in\\s+(\\w+?\\.(?:cpp|c|y)))?\n                 %xm']
                           ]
                           $body: #Block[
                              $param: #MultipleLeftHandSideExpression[
                                 $item: #NameExpr['type']
                                 $item: #NameExpr['var_name']
                                 $item: #NameExpr['meth_name']
                                 $item: #NameExpr['function']
                                 $item: #NameExpr['param_count']
                                 $item: #NameExpr['source_file']
                              ]
                              $body: #List[
                                 $statement: #IfExpr[
                                    $then: #Next['next']
                                    $cond: #EqExpr[
                                       $left: #NameExpr['var_name']
                                       $right: #StringExpr['ruby_top_self']
                                    ]
                                 ]
                                 $statement: #IfExpr[
                                    $then: #Next['next']
                                    $cond: #EqExpr[
                                       $left: #NameExpr['var_name']
                                       $right: #StringExpr['nstr']
                                    ]
                                 ]
                                 $statement: #IfExpr[
                                    $then: #AssignExpr[
                                       $left: #NameExpr['var_name']
                                       $right: #StringExpr['rb_cObject']
                                    ]
                                    $cond: #EqExpr[
                                       $left: #NameExpr['var_name']
                                       $right: #StringExpr['rb_mKernel']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['handle_method']
                                    $param: #List[
                                       $expression: #NameExpr['type']
                                       $expression: #NameExpr['var_name']
                                       $expression: #NameExpr['meth_name']
                                       $expression: #NameExpr['function']
                                       $expression: #NameExpr['param_count']
                                       $expression: #NameExpr['source_file']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@content']
                           $recv: #NameExpr['scan']
                           $param: #List[
                              $expression: #Regex['%r%rb_define_global_function\\s*\\(\n                             \\s*"([^"]+)",\n                             \\s*(?:RUBY_METHOD_FUNC\\(|VALUEFUNC\\()?(\\w+)\\)?,\n                             \\s*(-?\\w+)\\s*\\)\n                (?:;\\s*/[*/]\\s+in\\s+(\\w+?\\.[cy]))?\n                %xm']
                           ]
                           $body: #Block[
                              $param: #MultipleLeftHandSideExpression[
                                 $item: #NameExpr['meth_name']
                                 $item: #NameExpr['function']
                                 $item: #NameExpr['param_count']
                                 $item: #NameExpr['source_file']
                              ]
                              $body: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['handle_method']
                                 $param: #List[
                                    $expression: #StringExpr['method']
                                    $expression: #StringExpr['rb_mKernel']
                                    $expression: #NameExpr['meth_name']
                                    $expression: #NameExpr['function']
                                    $expression: #NameExpr['param_count']
                                    $expression: #NameExpr['source_file']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@content']
                           $recv: #NameExpr['scan']
                           $param: #List[
                              $expression: #Regex['/define_filetest_function\\s*\\(\n                     \\s*"([^"]+)",\n                     \\s*(?:RUBY_METHOD_FUNC\\(|VALUEFUNC\\()?(\\w+)\\)?,\n                     \\s*(-?\\w+)\\s*\\)/xm']
                           ]
                           $body: #Block[
                              $param: #MultipleLeftHandSideExpression[
                                 $item: #NameExpr['meth_name']
                                 $item: #NameExpr['function']
                                 $item: #NameExpr['param_count']
                              ]
                              $body: #List[
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['handle_method']
                                    $param: #List[
                                       $expression: #StringExpr['method']
                                       $expression: #StringExpr['rb_mFileTest']
                                       $expression: #NameExpr['meth_name']
                                       $expression: #NameExpr['function']
                                       $expression: #NameExpr['param_count']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['handle_method']
                                    $param: #List[
                                       $expression: #StringExpr['singleton_method']
                                       $expression: #StringExpr['rb_cFile']
                                       $expression: #NameExpr['meth_name']
                                       $expression: #NameExpr['function']
                                       $expression: #NameExpr['param_count']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['do_missing']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $then: #RReturnStmt['return']
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['@missing_dependencies']
                              $recv: #NameExpr['empty?']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #NameExpr['@enclosure_dependencies']
                              $recv: #NameExpr['tsort']
                           ]
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['in_module']
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['arguments']
                                    $right: #ApplyExpr[
                                       $base: #NameExpr['@missing_dependencies']
                                       $recv: #NameExpr['delete']
                                       $param: #List[
                                          $expression: #NameExpr['in_module']
                                       ]
                                    ]
                                 ]
                                 $statement: #Unless[
                                    $then: #Next['next']
                                    $cond: #NameExpr['arguments']
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['handle_class_module']
                                    $param: #List[
                                       $variadic: #Variadic[
                                          $base: #NameExpr['arguments']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['do_modules']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['do_define_module']
                        $statement: #NameExpr['do_define_module_under']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['do_singleton_class']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['@content']
                        $recv: #NameExpr['scan']
                        $param: #List[
                           $expression: #Regex['/([\\w\\.]+)\\s* = \\s*rb_singleton_class\\s*\n                  \\(\n                    \\s*(\\w+)\n                  \\s*\\)/mx']
                        ]
                        $body: #Block[
                           $param: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['sclass_var']
                              $item: #NameExpr['class_var']
                           ]
                           $body: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['handle_singleton']
                              $param: #List[
                                 $expression: #NameExpr['sclass_var']
                                 $expression: #NameExpr['class_var']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['do_struct_define_without_accessor']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['@content']
                        $recv: #NameExpr['scan']
                        $param: #List[
                           $expression: #Regex['/([\\w\\.]+)\\s* = \\s*rb_struct_define_without_accessor\\s*\n              \\(\n                 \\s*"(\\w+)",  # Class name\n                 \\s*(\\w+),    # Parent class\n                 \\s*\\w+,      # Allocation function\n                 (\\s*"\\w+",)* # Attributes\n                 \\s*NULL\n              \\)/mx']
                        ]
                        $body: #Block[
                           $param: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['var_name']
                              $item: #NameExpr['class_name']
                              $item: #NameExpr['parent']
                           ]
                           $body: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['handle_class_module']
                              $param: #List[
                                 $expression: #NameExpr['var_name']
                                 $expression: #NameExpr['class']
                                 $expression: #NameExpr['class_name']
                                 $expression: #NameExpr['parent']
                                 $expression: #Nil['nil']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['find_alias_comment']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['class_name']
                     ]
                     $param: #Param[
                        $param: #NameExpr['new_name']
                     ]
                     $param: #Param[
                        $param: #NameExpr['old_name']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['content']
                           $right: #ComplExpr[
                              $expr: #Regex['%r%((?>/\\*.*?\\*/\\s+))\n                  rb_define_alias\\(\\s*#{Regexp.escape class_name}\\s*,\n                                   \\s*"#{Regexp.escape new_name}"\\s*,\n                                   \\s*"#{Regexp.escape old_name}"\\s*\\);%xm']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #Field[
                              $recv: #NameExpr['RDoc']
                              $name: #NameExpr['Comment']
                           ]
                           $recv: #NameExpr['new']
                           $param: #List[
                              $expression: #LOr[
                                 $left: #MatchedRegex['$1']
                                 $right: #StringExpr['']
                              ]
                              $expression: #NameExpr['@top_level']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['find_attr_comment']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['var_name']
                     ]
                     $param: #Param[
                        $param: #NameExpr['attr_name']
                     ]
                     $param: #OptionalParam[
                        $name: #NameExpr['read']
                        $default: #Nil['nil']
                     ]
                     $param: #OptionalParam[
                        $name: #NameExpr['write']
                        $default: #Nil['nil']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['attr_name']
                           $right: #ApplyExpr[
                              $base: #NameExpr['Regexp']
                              $recv: #NameExpr['escape']
                              $param: #List[
                                 $expression: #NameExpr['attr_name']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['rw']
                           $right: #IfExpr[
                              $cond: #AndExpr[
                                 $left: #NameExpr['read']
                                 $right: #NameExpr['write']
                              ]
                              $then: #Regex['/\\s*#{read}\\s*,\\s*#{write}\\s*/xm']
                              $else: #Regex['/.*?/m']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['comment']
                           $right: #IfExpr[
                              $cond: #AssignExpr[
                                 $left: #NameExpr['@content']
                                 $right: #ComplExpr[
                                    $expr: #Regex['%r%((?>/\\*.*?\\*/\\s+))\n                                rb_define_attr\\((?:\\s*#{var_name},)?\\s*\n                                                "#{attr_name}"\\s*,\n                                                #{rw}\\)\\s*;%xm']
                                 ]
                              ]
                              $then: #MatchedRegex['$1']
                              $else: #IfExpr[
                                 $cond: #AssignExpr[
                                    $left: #NameExpr['@content']
                                    $right: #ComplExpr[
                                       $expr: #Regex['%r%((?>/\\*.*?\\*/\\s+))\n                                   rb_attr\\(\\s*#{var_name}\\s*,\n                                            \\s*#{attr_name}\\s*,\n                                            #{rw},.*?\\)\\s*;%xm']
                                    ]
                                 ]
                                 $then: #MatchedRegex['$1']
                                 $else: #IfExpr[
                                    $cond: #AssignExpr[
                                       $left: #NameExpr['@content']
                                       $right: #ComplExpr[
                                          $expr: #Regex['%r%(/\\*.*?(?:\\s*\\*\\s*)?)\n                                   Document-attr:\\s#{attr_name}\\s*?\\n\n                                   ((?>(.|\\n)*?\\*/))%x']
                                       ]
                                    ]
                                    $then: #StringExpr[
                                       $inner: #MatchedRegex['$1']
                                       $inner: #MatchedRegex['$2']
                                    ]
                                    $else: #StringExpr['']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #Field[
                              $recv: #NameExpr['RDoc']
                              $name: #NameExpr['Comment']
                           ]
                           $recv: #NameExpr['new']
                           $param: #List[
                              $expression: #NameExpr['comment']
                              $expression: #NameExpr['@top_level']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['gen_body_table']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['file_content']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['table']
                           $right: #List['{}']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['file_content']
                           $recv: #NameExpr['scan']
                           $param: #List[
                              $expression: #Regex['%r{\n      ((?>/\\*.*?\\*/\\s*)?)\n      ((?:(?:\\w+)\\s+)?\n        (?:intern\\s+)?VALUE\\s+(\\w+)\n        \\s*(?:\\([^)]*\\))(?:[^;]|$))\n    | ((?>/\\*.*?\\*/\\s*))^\\s*(\\#\\s*define\\s+(\\w+)\\s+(\\w+))\n    | ^\\s*\\#\\s*define\\s+(\\w+)\\s+(\\w+)\n    }xm']
                           ]
                           $body: #Block[
                              $body: #Case[
                                 $body: #List[
                                    $when: #When[
                                       $cond: #List[
                                          $expression: #MatchedRegex['$1']
                                       ]
                                       $then: #IfExpr[
                                          $then: #AssignExpr[
                                             $left: #Indexer[
                                                $base: #NameExpr['table']
                                                $index: #List[
                                                   $expression: #MatchedRegex['$3']
                                                ]
                                             ]
                                             $right: #Array[
                                                $index: #List[
                                                   $expression: #NameExpr['func_def']
                                                   $expression: #MatchedRegex['$1']
                                                   $expression: #MatchedRegex['$2']
                                                   $expression: #ApplyExpr[
                                                      $recv: #BuiltInVariable['$~']
                                                      $recv: #NameExpr['offset']
                                                      $param: #List[
                                                         $expression: #IntExpr['2']
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                          $cond: #LOr[
                                             $left: #NotExpr[
                                                $expr: #Indexer[
                                                   $recv: #NameExpr['table']
                                                   $index: #List[
                                                      $expression: #MatchedRegex['$3']
                                                   ]
                                                ]
                                             ]
                                             $right: #NeExpr[
                                                $left: #Indexer[
                                                   $recv: #Indexer[
                                                      $recv: #NameExpr['table']
                                                      $index: #List[
                                                         $expression: #MatchedRegex['$3']
                                                      ]
                                                   ]
                                                   $index: #List[
                                                      $expression: #IntExpr['0']
                                                   ]
                                                ]
                                                $right: #NameExpr['func_def']
                                             ]
                                          ]
                                       ]
                                    ]
                                    $when: #When[
                                       $cond: #List[
                                          $expression: #MatchedRegex['$4']
                                       ]
                                       $then: #IfExpr[
                                          $then: #AssignExpr[
                                             $left: #Indexer[
                                                $base: #NameExpr['table']
                                                $index: #List[
                                                   $expression: #MatchedRegex['$6']
                                                ]
                                             ]
                                             $right: #Array[
                                                $index: #List[
                                                   $expression: #NameExpr['macro_def']
                                                   $expression: #MatchedRegex['$4']
                                                   $expression: #MatchedRegex['$5']
                                                   $expression: #ApplyExpr[
                                                      $recv: #BuiltInVariable['$~']
                                                      $recv: #NameExpr['offset']
                                                      $param: #List[
                                                         $expression: #IntExpr['5']
                                                      ]
                                                   ]
                                                   $expression: #MatchedRegex['$7']
                                                ]
                                             ]
                                          ]
                                          $cond: #LOr[
                                             $left: #NotExpr[
                                                $expr: #Indexer[
                                                   $recv: #NameExpr['table']
                                                   $index: #List[
                                                      $expression: #MatchedRegex['$6']
                                                   ]
                                                ]
                                             ]
                                             $right: #EqExpr[
                                                $left: #Indexer[
                                                   $recv: #Indexer[
                                                      $recv: #NameExpr['table']
                                                      $index: #List[
                                                         $expression: #MatchedRegex['$6']
                                                      ]
                                                   ]
                                                   $index: #List[
                                                      $expression: #IntExpr['0']
                                                   ]
                                                ]
                                                $right: #NameExpr['macro_alias']
                                             ]
                                          ]
                                       ]
                                    ]
                                    $when: #When[
                                       $cond: #List[
                                          $expression: #MatchedRegex['$8']
                                       ]
                                       $then: #LOrAssign[
                                          $left: #Indexer[
                                             $base: #NameExpr['table']
                                             $index: #List[
                                                $expression: #MatchedRegex['$8']
                                             ]
                                          ]
                                          $right: #Array[
                                             $index: #List[
                                                $expression: #NameExpr['macro_alias']
                                                $expression: #MatchedRegex['$9']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #NameExpr['table']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['find_body']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['class_name']
                     ]
                     $param: #Param[
                        $param: #NameExpr['meth_name']
                     ]
                     $param: #Param[
                        $param: #NameExpr['meth_obj']
                     ]
                     $param: #Param[
                        $param: #NameExpr['file_content']
                     ]
                     $param: #OptionalParam[
                        $name: #NameExpr['quiet']
                        $default: #FalseExpr['false']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $cond: #NameExpr['file_content']
                           $then: #List[
                              $statement: #LOrAssign[
                                 $left: #NameExpr['@body_table']
                                 $right: #List['{}']
                              ]
                              $statement: #LOrAssign[
                                 $left: #Indexer[
                                    $base: #NameExpr['@body_table']
                                    $index: #List[
                                       $expression: #NameExpr['file_content']
                                    ]
                                 ]
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['gen_body_table']
                                    $param: #List[
                                       $expression: #NameExpr['file_content']
                                    ]
                                 ]
                              ]
                              $statement: #MultipleAssign[
                                 $left: #MultipleLeftHandSideExpression[
                                    $item: #NameExpr['type']
                                    $item: #Variadic[
                                       $item: #NameExpr['args']
                                    ]
                                 ]
                                 $right: #Indexer[
                                    $recv: #Indexer[
                                       $recv: #NameExpr['@body_table']
                                       $index: #List[
                                          $expression: #NameExpr['file_content']
                                       ]
                                    ]
                                    $index: #List[
                                       $expression: #NameExpr['meth_name']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #Case[
                           $cond: #NameExpr['type']
                           $body: #List[
                              $when: #When[
                                 $cond: #List[
                                    $expression: #NameExpr['func_def']
                                 ]
                                 $then: #List[
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['comment']
                                       $right: #ApplyExpr[
                                          $base: #Field[
                                             $recv: #NameExpr['RDoc']
                                             $name: #NameExpr['Comment']
                                          ]
                                          $recv: #NameExpr['new']
                                          $param: #List[
                                             $expression: #Indexer[
                                                $recv: #NameExpr['args']
                                                $index: #List[
                                                   $expression: #IntExpr['0']
                                                ]
                                             ]
                                             $expression: #NameExpr['@top_level']
                                          ]
                                       ]
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['body']
                                       $right: #Indexer[
                                          $recv: #NameExpr['args']
                                          $index: #List[
                                             $expression: #IntExpr['1']
                                          ]
                                       ]
                                    ]
                                    $statement: #MultipleAssign[
                                       $left: #MultipleLeftHandSideExpression[
                                          $item: #NameExpr['offset']
                                       ]
                                       $right: #Indexer[
                                          $recv: #NameExpr['args']
                                          $index: #List[
                                             $expression: #IntExpr['2']
                                          ]
                                       ]
                                    ]
                                    $statement: #IfExpr[
                                       $then: #ApplyExpr[
                                          $recv: #NameExpr['comment']
                                          $recv: #NameExpr['remove_private']
                                       ]
                                       $cond: #NameExpr['comment']
                                    ]
                                    $statement: #IfExpr[
                                       $then: #AssignExpr[
                                          $left: #NameExpr['body']
                                          $right: #BuiltInVariable['$&']
                                       ]
                                       $cond: #Match[
                                          $left: #Regex['/#{Regexp.escape body}[^(]*?\\{.*?^\\}/m']
                                          $right: #NameExpr['file_content']
                                       ]
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['override_comment']
                                       $right: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['find_override_comment']
                                          $param: #List[
                                             $expression: #NameExpr['class_name']
                                             $expression: #NameExpr['meth_obj']
                                          ]
                                       ]
                                    ]
                                    $statement: #IfExpr[
                                       $then: #AssignExpr[
                                          $left: #NameExpr['comment']
                                          $right: #NameExpr['override_comment']
                                       ]
                                       $cond: #NameExpr['override_comment']
                                    ]
                                    $statement: #ApplyExpr[
                                       $recv: #NameExpr['comment']
                                       $recv: #NameExpr['normalize']
                                    ]
                                    $statement: #IfExpr[
                                       $then: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['find_modifiers']
                                          $param: #List[
                                             $expression: #NameExpr['comment']
                                             $expression: #NameExpr['meth_obj']
                                          ]
                                       ]
                                       $cond: #NameExpr['comment']
                                    ]
                                    $statement: #ApplyExpr[
                                       $recv: #NameExpr['meth_obj']
                                       $recv: #NameExpr['start_collecting_tokens']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['tk']
                                       $right: #ApplyExpr[
                                          $base: #Field[
                                             $recv: #Field[
                                                $recv: #NameExpr['RDoc']
                                                $name: #NameExpr['RubyToken']
                                             ]
                                             $name: #NameExpr['Token']
                                          ]
                                          $recv: #NameExpr['new']
                                          $param: #List[
                                             $expression: #Nil['nil']
                                             $expression: #IntExpr['1']
                                             $expression: #IntExpr['1']
                                          ]
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['tk']
                                       $recv: #NameExpr['set_text']
                                       $param: #List[
                                          $expression: #NameExpr['body']
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['meth_obj']
                                       $recv: #NameExpr['add_token']
                                       $param: #List[
                                          $expression: #NameExpr['tk']
                                       ]
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['meth_obj']
                                          $name: #NameExpr['comment']
                                       ]
                                       $right: #NameExpr['comment']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['meth_obj']
                                          $name: #NameExpr['offset']
                                       ]
                                       $right: #NameExpr['offset']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['meth_obj']
                                          $name: #NameExpr['line']
                                       ]
                                       $right: #AddExpr[
                                          $left: #ApplyExpr[
                                             $recv: #Indexer[
                                                $recv: #NameExpr['file_content']
                                                $index: #List[
                                                   $expression: #IntExpr['0']
                                                   $expression: #NameExpr['offset']
                                                ]
                                             ]
                                             $recv: #NameExpr['count']
                                             $param: #List[
                                                $expression: #StringExpr['\\n']
                                             ]
                                          ]
                                          $right: #IntExpr['1']
                                       ]
                                    ]
                                    $statement: #NameExpr['body']
                                 ]
                              ]
                              $when: #When[
                                 $cond: #List[
                                    $expression: #NameExpr['macro_def']
                                 ]
                                 $then: #List[
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['comment']
                                       $right: #ApplyExpr[
                                          $base: #Field[
                                             $recv: #NameExpr['RDoc']
                                             $name: #NameExpr['Comment']
                                          ]
                                          $recv: #NameExpr['new']
                                          $param: #List[
                                             $expression: #Indexer[
                                                $recv: #NameExpr['args']
                                                $index: #List[
                                                   $expression: #IntExpr['0']
                                                ]
                                             ]
                                             $expression: #NameExpr['@top_level']
                                          ]
                                       ]
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['body']
                                       $right: #Indexer[
                                          $recv: #NameExpr['args']
                                          $index: #List[
                                             $expression: #IntExpr['1']
                                          ]
                                       ]
                                    ]
                                    $statement: #MultipleAssign[
                                       $left: #MultipleLeftHandSideExpression[
                                          $item: #NameExpr['offset']
                                       ]
                                       $right: #Indexer[
                                          $recv: #NameExpr['args']
                                          $index: #List[
                                             $expression: #IntExpr['2']
                                          ]
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['find_body']
                                       $param: #List[
                                          $expression: #NameExpr['class_name']
                                          $expression: #Indexer[
                                             $recv: #NameExpr['args']
                                             $index: #List[
                                                $expression: #IntExpr['3']
                                             ]
                                          ]
                                          $expression: #NameExpr['meth_obj']
                                          $expression: #NameExpr['file_content']
                                          $expression: #TrueExpr['true']
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $recv: #NameExpr['comment']
                                       $recv: #NameExpr['normalize']
                                    ]
                                    $statement: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['find_modifiers']
                                       $param: #List[
                                          $expression: #NameExpr['comment']
                                          $expression: #NameExpr['meth_obj']
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $recv: #NameExpr['meth_obj']
                                       $recv: #NameExpr['start_collecting_tokens']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['tk']
                                       $right: #ApplyExpr[
                                          $base: #Field[
                                             $recv: #Field[
                                                $recv: #NameExpr['RDoc']
                                                $name: #NameExpr['RubyToken']
                                             ]
                                             $name: #NameExpr['Token']
                                          ]
                                          $recv: #NameExpr['new']
                                          $param: #List[
                                             $expression: #Nil['nil']
                                             $expression: #IntExpr['1']
                                             $expression: #IntExpr['1']
                                          ]
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['tk']
                                       $recv: #NameExpr['set_text']
                                       $param: #List[
                                          $expression: #NameExpr['body']
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['meth_obj']
                                       $recv: #NameExpr['add_token']
                                       $param: #List[
                                          $expression: #NameExpr['tk']
                                       ]
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['meth_obj']
                                          $name: #NameExpr['comment']
                                       ]
                                       $right: #NameExpr['comment']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['meth_obj']
                                          $name: #NameExpr['offset']
                                       ]
                                       $right: #NameExpr['offset']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['meth_obj']
                                          $name: #NameExpr['line']
                                       ]
                                       $right: #AddExpr[
                                          $left: #ApplyExpr[
                                             $recv: #Indexer[
                                                $recv: #NameExpr['file_content']
                                                $index: #List[
                                                   $expression: #IntExpr['0']
                                                   $expression: #NameExpr['offset']
                                                ]
                                             ]
                                             $recv: #NameExpr['count']
                                             $param: #List[
                                                $expression: #StringExpr['\\n']
                                             ]
                                          ]
                                          $right: #IntExpr['1']
                                       ]
                                    ]
                                    $statement: #NameExpr['body']
                                 ]
                              ]
                              $when: #When[
                                 $cond: #List[
                                    $expression: #NameExpr['macro_alias']
                                 ]
                                 $then: #List[
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['body']
                                       $right: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['find_body']
                                          $param: #List[
                                             $expression: #NameExpr['class_name']
                                             $expression: #Indexer[
                                                $recv: #NameExpr['args']
                                                $index: #List[
                                                   $expression: #IntExpr['0']
                                                ]
                                             ]
                                             $expression: #NameExpr['meth_obj']
                                             $expression: #NameExpr['file_content']
                                             $expression: #TrueExpr['true']
                                          ]
                                       ]
                                    ]
                                    $statement: #IfExpr[
                                       $then: #RReturnStmt[
                                          $expr: #List[
                                             $expression: #NameExpr['body']
                                          ]
                                       ]
                                       $cond: #NameExpr['body']
                                    ]
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['@options']
                                       $recv: #NameExpr['warn']
                                       $param: #List[
                                          $expression: #StringExpr[
                                             $inner: #NameExpr['meth_name']
                                          ]
                                       ]
                                    ]
                                    $statement: #FalseExpr['false']
                                 ]
                              ]
                           ]
                           $else: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['comment']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['find_override_comment']
                                    $param: #List[
                                       $expression: #NameExpr['class_name']
                                       $expression: #NameExpr['meth_obj']
                                    ]
                                 ]
                              ]
                              $statement: #IfExpr[
                                 $cond: #NameExpr['comment']
                                 $then: #List[
                                    $statement: #ApplyExpr[
                                       $recv: #NameExpr['comment']
                                       $recv: #NameExpr['normalize']
                                    ]
                                    $statement: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['find_modifiers']
                                       $param: #List[
                                          $expression: #NameExpr['comment']
                                          $expression: #NameExpr['meth_obj']
                                       ]
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['meth_obj']
                                          $name: #NameExpr['comment']
                                       ]
                                       $right: #NameExpr['comment']
                                    ]
                                    $statement: #StringExpr['']
                                 ]
                                 $else: #List[
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['@options']
                                       $recv: #NameExpr['warn']
                                       $param: #List[
                                          $expression: #StringExpr[
                                             $inner: #NameExpr['meth_name']
                                          ]
                                       ]
                                    ]
                                    $statement: #FalseExpr['false']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['find_class']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['raw_name']
                     ]
                     $param: #Param[
                        $param: #NameExpr['name']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #Unless[
                           $cond: #Indexer[
                              $recv: #NameExpr['@classes']
                              $index: #List[
                                 $expression: #NameExpr['raw_name']
                              ]
                           ]
                           $then: #List[
                              $statement: #IfExpr[
                                 $cond: #AssignExpr[
                                    $left: #NameExpr['raw_name']
                                    $right: #ComplExpr[
                                       $expr: #Regex['/^rb_m/']
                                    ]
                                 ]
                                 $then: #AssignExpr[
                                    $left: #NameExpr['container']
                                    $right: #ApplyExpr[
                                       $base: #NameExpr['@top_level']
                                       $recv: #NameExpr['add_module']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['RDoc']
                                             $name: #NameExpr['NormalModule']
                                          ]
                                          $expression: #NameExpr['name']
                                       ]
                                    ]
                                 ]
                                 $else: #AssignExpr[
                                    $left: #NameExpr['container']
                                    $right: #ApplyExpr[
                                       $base: #NameExpr['@top_level']
                                       $recv: #NameExpr['add_class']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['RDoc']
                                             $name: #NameExpr['NormalClass']
                                          ]
                                          $expression: #NameExpr['name']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $base: #NameExpr['container']
                                 $recv: #NameExpr['record_location']
                                 $param: #List[
                                    $expression: #NameExpr['@top_level']
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #Indexer[
                                    $base: #NameExpr['@classes']
                                    $index: #List[
                                       $expression: #NameExpr['raw_name']
                                    ]
                                 ]
                                 $right: #NameExpr['container']
                              ]
                           ]
                        ]
                        $statement: #Indexer[
                           $recv: #NameExpr['@classes']
                           $index: #List[
                              $expression: #NameExpr['raw_name']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['find_class_comment']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['class_name']
                     ]
                     $param: #Param[
                        $param: #NameExpr['class_mod']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['comment']
                           $right: #Nil['nil']
                        ]
                        $statement: #IfExpr[
                           $cond: #AssignExpr[
                              $left: #NameExpr['@content']
                              $right: #ComplExpr[
                                 $expr: #Regex['%r%\n        ((?>/\\*.*?\\*/\\s+))\n        (static\\s+)?\n        void\\s+\n        Init_#{class_name}\\s*(?:_\\(\\s*)?\\(\\s*(?:void\\s*)?\\)%xmi']
                              ]
                           ]
                           $then: #AssignExpr[
                              $left: #NameExpr['comment']
                              $right: #ApplyExpr[
                                 $recv: #MatchedRegex['$1']
                                 $recv: #NameExpr['sub']
                                 $param: #List[
                                    $expression: #Regex['%r%Document-(?:class|module):\\s+#{class_name}%']
                                    $expression: #StringExpr['']
                                 ]
                              ]
                           ]
                           $else: #IfExpr[
                              $cond: #AssignExpr[
                                 $left: #NameExpr['@content']
                                 $right: #ComplExpr[
                                    $expr: #Regex['%r%Document-(?:class|module):\\s+#{class_name}\\s*?\n                         (?:<\\s+[:,\\w]+)?\\n((?>.*?\\*/))%xm']
                                 ]
                              ]
                              $then: #AssignExpr[
                                 $left: #NameExpr['comment']
                                 $right: #StringExpr[
                                    $inner: #MatchedRegex['$1']
                                 ]
                              ]
                              $else: #IfExpr[
                                 $cond: #AssignExpr[
                                    $left: #NameExpr['@content']
                                    $right: #ComplExpr[
                                       $expr: #Regex['%r%((?>/\\*.*?\\*/\\s+))\n                         ([\\w\\.\\s]+\\s* = \\s+)?rb_define_(class|module)[\\t (]*?"(#{class_name})"%xm']
                                    ]
                                 ]
                                 $then: #AssignExpr[
                                    $left: #NameExpr['comment']
                                    $right: #MatchedRegex['$1']
                                 ]
                                 $else: #IfExpr[
                                    $cond: #AssignExpr[
                                       $left: #NameExpr['@content']
                                       $right: #ComplExpr[
                                          $expr: #Regex['%r%((?>/\\*.*?\\*/\\s+))\n                         ([\\w\\. \\t]+ = \\s+)?rb_define_(class|module)_under[\\t\\w, (]*?"(#{class_name.split(\'::\').last})"%xm']
                                       ]
                                    ]
                                    $then: #AssignExpr[
                                       $left: #NameExpr['comment']
                                       $right: #MatchedRegex['$1']
                                    ]
                                    $else: #AssignExpr[
                                       $left: #NameExpr['comment']
                                       $right: #StringExpr['']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['comment']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['RDoc']
                                 $name: #NameExpr['Comment']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #NameExpr['comment']
                                 $expression: #NameExpr['@top_level']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['comment']
                           $recv: #NameExpr['normalize']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['look_for_directives_in']
                           $param: #List[
                              $expression: #NameExpr['class_mod']
                              $expression: #NameExpr['comment']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['class_mod']
                           $recv: #NameExpr['add_comment']
                           $param: #List[
                              $expression: #NameExpr['comment']
                              $expression: #NameExpr['@top_level']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['gen_const_table']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['file_content']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['table']
                           $right: #List['{}']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@content']
                           $recv: #NameExpr['scan']
                           $param: #List[
                              $expression: #Regex['%r{\n      ((?>^\\s*/\\*.*?\\*/\\s+))\n        rb_define_(\\w+)\\((?:\\s*(?:\\w+),)?\\s*\n                           "(\\w+)"\\s*,\n                           .*?\\)\\s*;\n    | Document-(?:const|global|variable):\\s\n        ((?:\\w+::)*\\w+)\n        \\s*?\\n((?>.*?\\*/))\n    }mxi']
                           ]
                           $body: #Block[
                              $body: #Case[
                                 $body: #List[
                                    $when: #When[
                                       $cond: #List[
                                          $expression: #MatchedRegex['$1']
                                       ]
                                       $then: #AssignExpr[
                                          $left: #Indexer[
                                             $base: #NameExpr['table']
                                             $index: #List[
                                                $expression: #Array[
                                                   $index: #List[
                                                      $expression: #MatchedRegex['$2']
                                                      $expression: #MatchedRegex['$3']
                                                   ]
                                                ]
                                             ]
                                          ]
                                          $right: #MatchedRegex['$1']
                                       ]
                                    ]
                                    $when: #When[
                                       $cond: #List[
                                          $expression: #MatchedRegex['$4']
                                       ]
                                       $then: #AssignExpr[
                                          $left: #Indexer[
                                             $base: #NameExpr['table']
                                             $index: #List[
                                                $expression: #MatchedRegex['$4']
                                             ]
                                          ]
                                          $right: #AddExpr[
                                             $left: #StringExpr['/*\\n']
                                             $right: #MatchedRegex['$5']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #NameExpr['table']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['find_const_comment']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['type']
                     ]
                     $param: #Param[
                        $param: #NameExpr['const_name']
                     ]
                     $param: #OptionalParam[
                        $name: #NameExpr['class_name']
                        $default: #Nil['nil']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #LOrAssign[
                           $left: #NameExpr['@const_table']
                           $right: #List['{}']
                        ]
                        $statement: #LOrAssign[
                           $left: #Indexer[
                              $base: #NameExpr['@const_table']
                              $index: #List[
                                 $expression: #NameExpr['@content']
                              ]
                           ]
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['gen_const_table']
                              $param: #List[
                                 $expression: #NameExpr['@content']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['table']
                           $right: #Indexer[
                              $recv: #NameExpr['@const_table']
                              $index: #List[
                                 $expression: #NameExpr['@content']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['comment']
                           $right: #LOr[
                              $left: #LOr[
                                 $left: #LOr[
                                    $left: #Indexer[
                                       $recv: #NameExpr['table']
                                       $index: #List[
                                          $expression: #Array[
                                             $index: #List[
                                                $expression: #NameExpr['type']
                                                $expression: #NameExpr['const_name']
                                             ]
                                          ]
                                       ]
                                    ]
                                    $right: #ApplyExpr[
                                       $base: #NameExpr['class_name']
                                       $recv: #NameExpr['&']
                                       $param: #List[
                                          $expression: #Indexer[
                                             $recv: #NameExpr['table']
                                             $index: #List[
                                                $expression: #AddExpr[
                                                   $left: #AddExpr[
                                                      $left: #NameExpr['class_name']
                                                      $right: #StringExpr['::']
                                                   ]
                                                   $right: #NameExpr['const_name']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $right: #Indexer[
                                    $recv: #NameExpr['table']
                                    $index: #List[
                                       $expression: #NameExpr['const_name']
                                    ]
                                 ]
                              ]
                              $right: #StringExpr['']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #Field[
                              $recv: #NameExpr['RDoc']
                              $name: #NameExpr['Comment']
                           ]
                           $recv: #NameExpr['new']
                           $param: #List[
                              $expression: #NameExpr['comment']
                              $expression: #NameExpr['@top_level']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['find_modifiers']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['comment']
                     ]
                     $param: #Param[
                        $param: #NameExpr['meth_obj']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['comment']
                           $recv: #NameExpr['normalize']
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['comment']
                           $recv: #NameExpr['extract_call_seq']
                           $param: #List[
                              $expression: #NameExpr['meth_obj']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['look_for_directives_in']
                           $param: #List[
                              $expression: #NameExpr['meth_obj']
                              $expression: #NameExpr['comment']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['find_override_comment']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['class_name']
                     ]
                     $param: #Param[
                        $param: #NameExpr['meth_obj']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['name']
                           $right: #ApplyExpr[
                              $base: #NameExpr['Regexp']
                              $recv: #NameExpr['escape']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['meth_obj']
                                    $recv: #NameExpr['name']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['prefix']
                           $right: #ApplyExpr[
                              $base: #NameExpr['Regexp']
                              $recv: #NameExpr['escape']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['meth_obj']
                                    $recv: #NameExpr['name_prefix']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['comment']
                           $right: #IfExpr[
                              $cond: #AssignExpr[
                                 $left: #NameExpr['@content']
                                 $right: #ComplExpr[
                                    $expr: #Regex['%r%Document-method:\n                                \\s+#{class_name}#{prefix}#{name}\n                                \\s*?\\n((?>.*?\\*/))%xm']
                                 ]
                              ]
                              $then: #StringExpr[
                                 $inner: #MatchedRegex['$1']
                              ]
                              $else: #IfExpr[
                                 $cond: #AssignExpr[
                                    $left: #NameExpr['@content']
                                    $right: #ComplExpr[
                                       $expr: #Regex['%r%Document-method:\n                                   \\s#{name}\\s*?\\n((?>.*?\\*/))%xm']
                                    ]
                                 ]
                                 $then: #StringExpr[
                                    $inner: #MatchedRegex['$1']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $then: #RReturnStmt['return']
                           $cond: #NameExpr['comment']
                        ]
                        $statement: #ApplyExpr[
                           $base: #Field[
                              $recv: #NameExpr['RDoc']
                              $name: #NameExpr['Comment']
                           ]
                           $recv: #NameExpr['new']
                           $param: #List[
                              $expression: #NameExpr['comment']
                              $expression: #NameExpr['@top_level']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['handle_attr']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['var_name']
                     ]
                     $param: #Param[
                        $param: #NameExpr['attr_name']
                     ]
                     $param: #Param[
                        $param: #NameExpr['read']
                     ]
                     $param: #Param[
                        $param: #NameExpr['write']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['rw']
                           $right: #StringExpr['']
                        ]
                        $statement: #IfExpr[
                           $then: #LShiftExpr[
                              $left: #NameExpr['rw']
                              $right: #StringExpr['R']
                           ]
                           $cond: #EqExpr[
                              $left: #StringExpr['1']
                              $right: #NameExpr['read']
                           ]
                        ]
                        $statement: #IfExpr[
                           $then: #LShiftExpr[
                              $left: #NameExpr['rw']
                              $right: #StringExpr['W']
                           ]
                           $cond: #EqExpr[
                              $left: #StringExpr['1']
                              $right: #NameExpr['write']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['class_name']
                           $right: #Indexer[
                              $recv: #NameExpr['@known_classes']
                              $index: #List[
                                 $expression: #NameExpr['var_name']
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $then: #RReturnStmt['return']
                           $cond: #NameExpr['class_name']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['class_obj']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['find_class']
                              $param: #List[
                                 $expression: #NameExpr['var_name']
                                 $expression: #NameExpr['class_name']
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $then: #RReturnStmt['return']
                           $cond: #NameExpr['class_obj']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['comment']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['find_attr_comment']
                              $param: #List[
                                 $expression: #NameExpr['var_name']
                                 $expression: #NameExpr['attr_name']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['comment']
                           $recv: #NameExpr['normalize']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['name']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['attr_name']
                              $recv: #NameExpr['gsub']
                              $param: #List[
                                 $expression: #Regex['/rb_intern(?:_const)?\\("([^"]+)"\\)/']
                                 $expression: #StringExpr['\\1']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['attr']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['RDoc']
                                 $name: #NameExpr['Attr']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #StringExpr['']
                                 $expression: #NameExpr['name']
                                 $expression: #NameExpr['rw']
                                 $expression: #NameExpr['comment']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['attr']
                           $recv: #NameExpr['record_location']
                           $param: #List[
                              $expression: #NameExpr['@top_level']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['class_obj']
                           $recv: #NameExpr['add_attribute']
                           $param: #List[
                              $expression: #NameExpr['attr']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@stats']
                           $recv: #NameExpr['add_attribute']
                           $param: #List[
                              $expression: #NameExpr['attr']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['handle_class_module']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['var_name']
                     ]
                     $param: #Param[
                        $param: #NameExpr['type']
                     ]
                     $param: #Param[
                        $param: #NameExpr['class_name']
                     ]
                     $param: #Param[
                        $param: #NameExpr['parent']
                     ]
                     $param: #Param[
                        $param: #NameExpr['in_module']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['parent_name']
                           $right: #LOr[
                              $left: #Indexer[
                                 $recv: #NameExpr['@known_classes']
                                 $index: #List[
                                    $expression: #NameExpr['parent']
                                 ]
                              ]
                              $right: #NameExpr['parent']
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #NameExpr['in_module']
                           $then: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['enclosure']
                                 $right: #LOr[
                                    $left: #Indexer[
                                       $recv: #NameExpr['@classes']
                                       $index: #List[
                                          $expression: #NameExpr['in_module']
                                       ]
                                    ]
                                    $right: #ApplyExpr[
                                       $recv: #NameExpr['@store']
                                       $recv: #NameExpr['find_c_enclosure']
                                       $param: #List[
                                          $expression: #NameExpr['in_module']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #IfExpr[
                                 $cond: #AndExpr[
                                    $left: #ApplyExpr[
                                       $recv: #NameExpr['enclosure']
                                       $recv: #NameExpr['nil?']
                                    ]
                                    $right: #AssignExpr[
                                       $left: #NameExpr['enclosure']
                                       $right: #Indexer[
                                          $recv: #NameExpr['@known_classes']
                                          $index: #List[
                                             $expression: #NameExpr['in_module']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $then: #List[
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['enc_type']
                                       $right: #Conditional[
                                          $cond: #Match[
                                             $left: #Regex['/^rb_m/']
                                             $right: #NameExpr['in_module']
                                          ]
                                          $then: #NameExpr['module']
                                          $else: #NameExpr['class']
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['handle_class_module']
                                       $param: #List[
                                          $expression: #NameExpr['in_module']
                                          $expression: #NameExpr['enc_type']
                                          $expression: #NameExpr['enclosure']
                                          $expression: #Nil['nil']
                                          $expression: #Nil['nil']
                                       ]
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['enclosure']
                                       $right: #Indexer[
                                          $recv: #NameExpr['@classes']
                                          $index: #List[
                                             $expression: #NameExpr['in_module']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #Unless[
                                 $cond: #NameExpr['enclosure']
                                 $then: #List[
                                    $statement: #LShiftExpr[
                                       $left: #Indexer[
                                          $recv: #NameExpr['@enclosure_dependencies']
                                          $index: #List[
                                             $expression: #NameExpr['in_module']
                                          ]
                                       ]
                                       $right: #NameExpr['var_name']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Indexer[
                                          $base: #NameExpr['@missing_dependencies']
                                          $index: #List[
                                             $expression: #NameExpr['var_name']
                                          ]
                                       ]
                                       $right: #Array[
                                          $index: #List[
                                             $expression: #NameExpr['var_name']
                                             $expression: #NameExpr['type']
                                             $expression: #NameExpr['class_name']
                                             $expression: #NameExpr['parent']
                                             $expression: #NameExpr['in_module']
                                          ]
                                       ]
                                    ]
                                    $statement: #RReturnStmt['return']
                                 ]
                              ]
                           ]
                           $else: #AssignExpr[
                              $left: #NameExpr['enclosure']
                              $right: #NameExpr['@top_level']
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #EqExpr[
                              $left: #NameExpr['type']
                              $right: #NameExpr['class']
                           ]
                           $then: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['full_name']
                                 $right: #IfExpr[
                                    $cond: #StrictEquals[
                                       $left: #Field[
                                          $recv: #NameExpr['RDoc']
                                          $name: #NameExpr['ClassModule']
                                       ]
                                       $right: #NameExpr['enclosure']
                                    ]
                                    $then: #AddExpr[
                                       $left: #ApplyExpr[
                                          $recv: #NameExpr['enclosure']
                                          $recv: #NameExpr['full_name']
                                       ]
                                       $right: #StringExpr[
                                          $inner: #NameExpr['class_name']
                                       ]
                                    ]
                                    $else: #NameExpr['class_name']
                                 ]
                              ]
                              $statement: #IfExpr[
                                 $cond: #AssignExpr[
                                    $left: #NameExpr['@content']
                                    $right: #ComplExpr[
                                       $expr: #Regex['%r%Document-class:\\s+#{full_name}\\s*<\\s+([:,\\w]+)%']
                                    ]
                                 ]
                                 $then: #AssignExpr[
                                    $left: #NameExpr['parent_name']
                                    $right: #MatchedRegex['$1']
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['cm']
                                 $right: #ApplyExpr[
                                    $base: #NameExpr['enclosure']
                                    $recv: #NameExpr['add_class']
                                    $param: #List[
                                       $expression: #Field[
                                          $recv: #NameExpr['RDoc']
                                          $name: #NameExpr['NormalClass']
                                       ]
                                       $expression: #NameExpr['class_name']
                                       $expression: #NameExpr['parent_name']
                                    ]
                                 ]
                              ]
                           ]
                           $else: #AssignExpr[
                              $left: #NameExpr['cm']
                              $right: #ApplyExpr[
                                 $base: #NameExpr['enclosure']
                                 $recv: #NameExpr['add_module']
                                 $param: #List[
                                    $expression: #Field[
                                       $recv: #NameExpr['RDoc']
                                       $name: #NameExpr['NormalModule']
                                    ]
                                    $expression: #NameExpr['class_name']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['cm']
                           $recv: #NameExpr['record_location']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['enclosure']
                                 $recv: #NameExpr['top_level']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['find_class_comment']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['cm']
                                 $recv: #NameExpr['full_name']
                              ]
                              $expression: #NameExpr['cm']
                           ]
                        ]
                        $statement: #Case[
                           $cond: #NameExpr['cm']
                           $body: #List[
                              $when: #When[
                                 $cond: #List[
                                    $expression: #Field[
                                       $recv: #NameExpr['RDoc']
                                       $name: #NameExpr['NormalClass']
                                    ]
                                 ]
                                 $then: #ApplyExpr[
                                    $base: #NameExpr['@stats']
                                    $recv: #NameExpr['add_class']
                                    $param: #List[
                                       $expression: #NameExpr['cm']
                                    ]
                                 ]
                              ]
                              $when: #When[
                                 $cond: #List[
                                    $expression: #Field[
                                       $recv: #NameExpr['RDoc']
                                       $name: #NameExpr['NormalModule']
                                    ]
                                 ]
                                 $then: #ApplyExpr[
                                    $base: #NameExpr['@stats']
                                    $recv: #NameExpr['add_module']
                                    $param: #List[
                                       $expression: #NameExpr['cm']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Indexer[
                              $base: #NameExpr['@classes']
                              $index: #List[
                                 $expression: #NameExpr['var_name']
                              ]
                           ]
                           $right: #NameExpr['cm']
                        ]
                        $statement: #AssignExpr[
                           $left: #Indexer[
                              $base: #NameExpr['@known_classes']
                              $index: #List[
                                 $expression: #NameExpr['var_name']
                              ]
                           ]
                           $right: #ApplyExpr[
                              $recv: #NameExpr['cm']
                              $recv: #NameExpr['full_name']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@store']
                           $recv: #NameExpr['add_c_enclosure']
                           $param: #List[
                              $expression: #NameExpr['var_name']
                              $expression: #NameExpr['cm']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['handle_constants']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['type']
                     ]
                     $param: #Param[
                        $param: #NameExpr['var_name']
                     ]
                     $param: #Param[
                        $param: #NameExpr['const_name']
                     ]
                     $param: #Param[
                        $param: #NameExpr['definition']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['class_name']
                           $right: #Indexer[
                              $recv: #NameExpr['@known_classes']
                              $index: #List[
                                 $expression: #NameExpr['var_name']
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $then: #RReturnStmt['return']
                           $cond: #NameExpr['class_name']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['class_obj']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['find_class']
                              $param: #List[
                                 $expression: #NameExpr['var_name']
                                 $expression: #NameExpr['class_name']
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $cond: #NameExpr['class_obj']
                           $then: #List[
                              $statement: #ApplyExpr[
                                 $base: #NameExpr['@options']
                                 $recv: #NameExpr['warn']
                                 $param: #List[
                                    $expression: #ModExpr[
                                       $left: #StringExpr['Enclosing class or module %p is not known']
                                       $right: #Array[
                                          $index: #List[
                                             $expression: #NameExpr['const_name']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #RReturnStmt['return']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['comment']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['find_const_comment']
                              $param: #List[
                                 $expression: #NameExpr['type']
                                 $expression: #NameExpr['const_name']
                                 $expression: #NameExpr['class_name']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['comment']
                           $recv: #NameExpr['normalize']
                        ]
                        $statement: #IfExpr[
                           $cond: #EqExpr[
                              $left: #ApplyExpr[
                                 $recv: #NameExpr['type']
                                 $recv: #NameExpr['downcase']
                              ]
                              $right: #StringExpr['const']
                           ]
                           $then: #List[
                              $statement: #MultipleAssign[
                                 $left: #MultipleLeftHandSideExpression[
                                    $item: #NameExpr['no_match']
                                    $item: #NameExpr['new_definition']
                                    $item: #NameExpr['new_comment']
                                 ]
                                 $right: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #NameExpr['comment']
                                       $recv: #NameExpr['text']
                                    ]
                                    $recv: #NameExpr['split']
                                    $param: #List[
                                       $expression: #Regex['/(\\A.*):/']
                                    ]
                                 ]
                              ]
                              $statement: #IfExpr[
                                 $cond: #AndExpr[
                                    $left: #NameExpr['no_match']
                                    $right: #ApplyExpr[
                                       $recv: #NameExpr['no_match']
                                       $recv: #NameExpr['empty?']
                                    ]
                                 ]
                                 $then: #List[
                                    $statement: #IfExpr[
                                       $cond: #ApplyExpr[
                                          $recv: #NameExpr['new_definition']
                                          $recv: #NameExpr['empty?']
                                       ]
                                       $then: #AssignExpr[
                                          $left: #NameExpr['new_definition']
                                          $right: #NameExpr['definition']
                                       ]
                                       $else: #List[
                                          $statement: #ApplyExpr[
                                             $recv: #NameExpr['new_definition']
                                             $recv: #NameExpr['gsub!']
                                             $param: #List[
                                                $expression: #StringExpr['\\:']
                                                $expression: #StringExpr[':']
                                             ]
                                          ]
                                          $statement: #ApplyExpr[
                                             $recv: #NameExpr['new_definition']
                                             $recv: #NameExpr['gsub!']
                                             $param: #List[
                                                $expression: #StringExpr['\\\\']
                                                $expression: #StringExpr['\\\\']
                                             ]
                                          ]
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $recv: #NameExpr['new_definition']
                                       $recv: #NameExpr['sub!']
                                       $param: #List[
                                          $expression: #Regex['/\\A(\\s+)/']
                                          $expression: #StringExpr['']
                                       ]
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['new_comment']
                                       $right: #StringExpr[
                                          $inner: #MatchedRegex['$1']
                                          $inner: #ApplyExpr[
                                             $recv: #NameExpr['new_comment']
                                             $recv: #NameExpr['lstrip']
                                          ]
                                       ]
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['new_comment']
                                       $right: #ApplyExpr[
                                          $base: #Field[
                                             $recv: #NameExpr['RDoc']
                                             $name: #NameExpr['Comment']
                                          ]
                                          $recv: #NameExpr['new']
                                          $param: #List[
                                             $expression: #NameExpr['new_comment']
                                             $expression: #NameExpr['@top_level']
                                          ]
                                       ]
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['con']
                                       $right: #ApplyExpr[
                                          $base: #Field[
                                             $recv: #NameExpr['RDoc']
                                             $name: #NameExpr['Constant']
                                          ]
                                          $recv: #NameExpr['new']
                                          $param: #List[
                                             $expression: #NameExpr['const_name']
                                             $expression: #NameExpr['new_definition']
                                             $expression: #NameExpr['new_comment']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $else: #AssignExpr[
                                    $left: #NameExpr['con']
                                    $right: #ApplyExpr[
                                       $base: #Field[
                                          $recv: #NameExpr['RDoc']
                                          $name: #NameExpr['Constant']
                                       ]
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #NameExpr['const_name']
                                          $expression: #NameExpr['definition']
                                          $expression: #NameExpr['comment']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                           $else: #AssignExpr[
                              $left: #NameExpr['con']
                              $right: #ApplyExpr[
                                 $base: #Field[
                                    $recv: #NameExpr['RDoc']
                                    $name: #NameExpr['Constant']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #NameExpr['const_name']
                                    $expression: #NameExpr['definition']
                                    $expression: #NameExpr['comment']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['con']
                           $recv: #NameExpr['record_location']
                           $param: #List[
                              $expression: #NameExpr['@top_level']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@stats']
                           $recv: #NameExpr['add_constant']
                           $param: #List[
                              $expression: #NameExpr['con']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['class_obj']
                           $recv: #NameExpr['add_constant']
                           $param: #List[
                              $expression: #NameExpr['con']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['handle_ifdefs_in']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['body']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['body']
                        $recv: #NameExpr['gsub']
                        $param: #List[
                           $expression: #Regex['/^#ifdef HAVE_PROTOTYPES.*?#else.*?\\n(.*?)#endif.*?\\n/m']
                           $expression: #StringExpr['\\1']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['handle_method']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['type']
                     ]
                     $param: #Param[
                        $param: #NameExpr['var_name']
                     ]
                     $param: #Param[
                        $param: #NameExpr['meth_name']
                     ]
                     $param: #Param[
                        $param: #NameExpr['function']
                     ]
                     $param: #Param[
                        $param: #NameExpr['param_count']
                     ]
                     $param: #OptionalParam[
                        $name: #NameExpr['source_file']
                        $default: #Nil['nil']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['class_name']
                           $right: #Indexer[
                              $recv: #NameExpr['@known_classes']
                              $index: #List[
                                 $expression: #NameExpr['var_name']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['singleton']
                           $right: #ApplyExpr[
                              $base: #NameExpr['@singleton_classes']
                              $recv: #NameExpr['key?']
                              $param: #List[
                                 $expression: #NameExpr['var_name']
                              ]
                           ]
                        ]
                        $statement: #LShiftExpr[
                           $left: #Indexer[
                              $recv: #Indexer[
                                 $recv: #NameExpr['@methods']
                                 $index: #List[
                                    $expression: #NameExpr['var_name']
                                 ]
                              ]
                              $index: #List[
                                 $expression: #NameExpr['function']
                              ]
                           ]
                           $right: #NameExpr['meth_name']
                        ]
                        $statement: #Unless[
                           $then: #RReturnStmt['return']
                           $cond: #NameExpr['class_name']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['class_obj']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['find_class']
                              $param: #List[
                                 $expression: #NameExpr['var_name']
                                 $expression: #NameExpr['class_name']
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #NameExpr['class_obj']
                           $then: #List[
                              $statement: #IfExpr[
                                 $cond: #EqExpr[
                                    $left: #NameExpr['meth_name']
                                    $right: #StringExpr['initialize']
                                 ]
                                 $then: #List[
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['meth_name']
                                       $right: #StringExpr['new']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['singleton']
                                       $right: #TrueExpr['true']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['type']
                                       $right: #StringExpr['method']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['meth_obj']
                                 $right: #ApplyExpr[
                                    $base: #Field[
                                       $recv: #NameExpr['RDoc']
                                       $name: #NameExpr['AnyMethod']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['']
                                       $expression: #NameExpr['meth_name']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #Field[
                                    $base: #NameExpr['meth_obj']
                                    $name: #NameExpr['c_function']
                                 ]
                                 $right: #NameExpr['function']
                              ]
                              $statement: #AssignExpr[
                                 $left: #Field[
                                    $base: #NameExpr['meth_obj']
                                    $name: #NameExpr['singleton']
                                 ]
                                 $right: #LOr[
                                    $left: #NameExpr['singleton']
                                    $right: #ApplyExpr[
                                       $recv: #ParcentNotation['%w[singleton_method module_function]']
                                       $recv: #NameExpr['include?']
                                       $param: #List[
                                          $expression: #NameExpr['type']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #Rescue[
                                 $body: #AssignExpr[
                                    $left: #NameExpr['p_count']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['Integer']
                                       $param: #List[
                                          $expression: #NameExpr['param_count']
                                       ]
                                    ]
                                 ]
                                 $rescue: #MinusExpr[
                                    $expr: #IntExpr['1']
                                 ]
                              ]
                              $statement: #IfExpr[
                                 $cond: #NameExpr['source_file']
                                 $then: #List[
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['file_name']
                                       $right: #ApplyExpr[
                                          $base: #NameExpr['File']
                                          $recv: #NameExpr['join']
                                          $param: #List[
                                             $expression: #NameExpr['@file_dir']
                                             $expression: #NameExpr['source_file']
                                          ]
                                       ]
                                    ]
                                    $statement: #IfExpr[
                                       $cond: #ApplyExpr[
                                          $base: #NameExpr['File']
                                          $recv: #NameExpr['exist?']
                                          $param: #List[
                                             $expression: #NameExpr['file_name']
                                          ]
                                       ]
                                       $then: #AssignExpr[
                                          $left: #NameExpr['file_content']
                                          $right: #ApplyExpr[
                                             $base: #NameExpr['File']
                                             $recv: #NameExpr['read']
                                             $param: #List[
                                                $expression: #NameExpr['file_name']
                                             ]
                                          ]
                                       ]
                                       $else: #ApplyExpr[
                                          $base: #NameExpr['@options']
                                          $recv: #NameExpr['warn']
                                          $param: #List[
                                             $expression: #StringExpr[
                                                $inner: #NameExpr['source_file']
                                                $inner: #NameExpr['meth_name']
                                                $inner: #NameExpr['@file_name']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $else: #AssignExpr[
                                    $left: #NameExpr['file_content']
                                    $right: #NameExpr['@content']
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['body']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['find_body']
                                    $param: #List[
                                       $expression: #NameExpr['class_name']
                                       $expression: #NameExpr['function']
                                       $expression: #NameExpr['meth_obj']
                                       $expression: #NameExpr['file_content']
                                    ]
                                 ]
                              ]
                              $statement: #IfExpr[
                                 $cond: #AndExpr[
                                    $left: #NameExpr['body']
                                    $right: #ApplyExpr[
                                       $recv: #NameExpr['meth_obj']
                                       $recv: #NameExpr['document_self']
                                    ]
                                 ]
                                 $then: #List[
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['meth_obj']
                                          $name: #NameExpr['params']
                                       ]
                                       $right: #IfExpr[
                                          $cond: #LtExpr[
                                             $left: #NameExpr['p_count']
                                             $right: #MinusExpr[
                                                $expr: #IntExpr['1']
                                             ]
                                          ]
                                          $then: #StringExpr['(*args)']
                                          $else: #IfExpr[
                                             $cond: #EqExpr[
                                                $left: #NameExpr['p_count']
                                                $right: #MinusExpr[
                                                   $expr: #IntExpr['1']
                                                ]
                                             ]
                                             $then: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['rb_scan_args']
                                                $param: #List[
                                                   $expression: #NameExpr['body']
                                                ]
                                             ]
                                             $else: #StringExpr[
                                                $inner: #ApplyExpr[
                                                   $base: #ApplyExpr[
                                                      $recv: #ClosedRange[
                                                         #IntExpr['1']
                                                         #NameExpr['p_count']
                                                      ]
                                                      $recv: #NameExpr['map']
                                                      $body: #Block[
                                                         $param: #NameExpr['i']
                                                         $body: #StringExpr[
                                                            $inner: #NameExpr['i']
                                                         ]
                                                      ]
                                                   ]
                                                   $recv: #NameExpr['join']
                                                   $param: #List[
                                                      $expression: #StringExpr[', ']
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['meth_obj']
                                       $recv: #NameExpr['record_location']
                                       $param: #List[
                                          $expression: #NameExpr['@top_level']
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['class_obj']
                                       $recv: #NameExpr['add_method']
                                       $param: #List[
                                          $expression: #NameExpr['meth_obj']
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['@stats']
                                       $recv: #NameExpr['add_method']
                                       $param: #List[
                                          $expression: #NameExpr['meth_obj']
                                       ]
                                    ]
                                    $statement: #IfExpr[
                                       $then: #AssignExpr[
                                          $left: #Field[
                                             $base: #NameExpr['meth_obj']
                                             $name: #NameExpr['visibility']
                                          ]
                                          $right: #NameExpr['private']
                                       ]
                                       $cond: #EqExpr[
                                          $left: #StringExpr['private_method']
                                          $right: #NameExpr['type']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['handle_singleton']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['sclass_var']
                     ]
                     $param: #Param[
                        $param: #NameExpr['class_var']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['class_name']
                           $right: #Indexer[
                              $recv: #NameExpr['@known_classes']
                              $index: #List[
                                 $expression: #NameExpr['class_var']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Indexer[
                              $base: #NameExpr['@known_classes']
                              $index: #List[
                                 $expression: #NameExpr['sclass_var']
                              ]
                           ]
                           $right: #NameExpr['class_name']
                        ]
                        $statement: #AssignExpr[
                           $left: #Indexer[
                              $base: #NameExpr['@singleton_classes']
                              $index: #List[
                                 $expression: #NameExpr['sclass_var']
                              ]
                           ]
                           $right: #NameExpr['class_name']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['handle_tab_width']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['body']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #IfExpr[
                        $cond: #Match[
                           $left: #Regex['/\\t/']
                           $right: #NameExpr['body']
                        ]
                        $then: #List[
                           $statement: #AssignExpr[
                              $left: #NameExpr['tab_width']
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['@options']
                                 $recv: #NameExpr['tab_width']
                              ]
                           ]
                           $statement: #ApplyExpr[
                              $base: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['body']
                                    $recv: #NameExpr['split']
                                    $param: #List[
                                       $expression: #Regex['/\\n/']
                                    ]
                                 ]
                                 $recv: #NameExpr['map']
                                 $body: #Block[
                                    $param: #NameExpr['line']
                                    $body: #List[
                                       $statement: #While[
                                          $body: #IntExpr['1']
                                          $cond: #ApplyExpr[
                                             $base: #ApplyExpr[
                                                $recv: #NameExpr['line']
                                                $recv: #NameExpr['gsub!']
                                                $param: #List[
                                                   $expression: #Regex['/\\t+/']
                                                ]
                                                $body: #Block[
                                                   $body: #MulExpr[
                                                      $left: #StringExpr[' ']
                                                      $right: #SubExpr[
                                                         $left: #MulExpr[
                                                            $left: #NameExpr['tab_width']
                                                            $right: #ApplyExpr[
                                                               $recv: #BuiltInVariable['$&']
                                                               $recv: #NameExpr['length']
                                                            ]
                                                         ]
                                                         $right: #ModExpr[
                                                            $left: #ApplyExpr[
                                                               $recv: #BuiltInVariable['$`']
                                                               $recv: #NameExpr['length']
                                                            ]
                                                            $right: #NameExpr['tab_width']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                             $recv: #NameExpr['&']
                                             $param: #List[
                                                $expression: #BuiltInVariable['$~']
                                             ]
                                          ]
                                       ]
                                       $statement: #NameExpr['line']
                                    ]
                                 ]
                              ]
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #StringExpr['\\n']
                              ]
                           ]
                        ]
                        $else: #NameExpr['body']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['load_variable_map']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['map_name']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #Unless[
                           $then: #RReturnStmt[
                              $expr: #List[
                                 $expression: #List['{}']
                              ]
                           ]
                           $cond: #AssignExpr[
                              $left: #NameExpr['files']
                              $right: #Indexer[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@store']
                                    $recv: #NameExpr['cache']
                                 ]
                                 $index: #List[
                                    $expression: #NameExpr['map_name']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $then: #RReturnStmt[
                              $expr: #List[
                                 $expression: #List['{}']
                              ]
                           ]
                           $cond: #AssignExpr[
                              $left: #NameExpr['name_map']
                              $right: #Indexer[
                                 $recv: #NameExpr['files']
                                 $index: #List[
                                    $expression: #NameExpr['@file_name']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['class_map']
                           $right: #List['{}']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['name_map']
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #MultipleLeftHandSideExpression[
                                 $item: #NameExpr['variable']
                                 $item: #NameExpr['name']
                              ]
                              $body: #List[
                                 $statement: #Unless[
                                    $then: #Next['next']
                                    $cond: #AssignExpr[
                                       $left: #NameExpr['mod']
                                       $right: #ApplyExpr[
                                          $recv: #NameExpr['@store']
                                          $recv: #NameExpr['find_class_or_module']
                                          $param: #List[
                                             $expression: #NameExpr['name']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Indexer[
                                       $base: #NameExpr['class_map']
                                       $index: #List[
                                          $expression: #NameExpr['variable']
                                       ]
                                    ]
                                    $right: #IfExpr[
                                       $cond: #EqExpr[
                                          $left: #NameExpr['map_name']
                                          $right: #NameExpr['c_class_variables']
                                       ]
                                       $then: #NameExpr['mod']
                                       $else: #NameExpr['name']
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Indexer[
                                       $base: #NameExpr['@known_classes']
                                       $index: #List[
                                          $expression: #NameExpr['variable']
                                       ]
                                    ]
                                    $right: #NameExpr['name']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #NameExpr['class_map']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['look_for_directives_in']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['context']
                     ]
                     $param: #Param[
                        $param: #NameExpr['comment']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@preprocess']
                           $recv: #NameExpr['handle']
                           $param: #List[
                              $expression: #NameExpr['comment']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['context']
                                 $body: #Block[
                                    $param: #MultipleLeftHandSideExpression[
                                       $item: #NameExpr['directive']
                                       $item: #NameExpr['param']
                                    ]
                                    $body: #Case[
                                       $cond: #NameExpr['directive']
                                       $body: #List[
                                          $when: #When[
                                             $cond: #List[
                                                $expression: #StringExpr['main']
                                             ]
                                             $then: #List[
                                                $statement: #AssignExpr[
                                                   $left: #Field[
                                                      $base: #NameExpr['@options']
                                                      $name: #NameExpr['main_page']
                                                   ]
                                                   $right: #NameExpr['param']
                                                ]
                                                $statement: #StringExpr['']
                                             ]
                                          ]
                                          $when: #When[
                                             $cond: #List[
                                                $expression: #StringExpr['title']
                                             ]
                                             $then: #List[
                                                $statement: #IfExpr[
                                                   $then: #AssignExpr[
                                                      $left: #Field[
                                                         $base: #NameExpr['@options']
                                                         $name: #NameExpr['default_title']
                                                      ]
                                                      $right: #NameExpr['param']
                                                   ]
                                                   $cond: #ApplyExpr[
                                                      $base: #NameExpr['@options']
                                                      $recv: #NameExpr['respond_to?']
                                                      $param: #List[
                                                         $expression: #NameExpr['default_title=']
                                                      ]
                                                   ]
                                                ]
                                                $statement: #StringExpr['']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #NameExpr['comment']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['rb_scan_args']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['method_body']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['method_body']
                           $right: #ComplExpr[
                              $expr: #Regex['/rb_scan_args\\((.*?)\\)/m']
                           ]
                        ]
                        $statement: #Unless[
                           $then: #RReturnStmt[
                              $expr: #List[
                                 $expression: #StringExpr['(*args)']
                              ]
                           ]
                           $cond: #MatchedRegex['$1']
                        ]
                        $statement: #AssignExpr[
                           $left: #Indexer[
                              $base: #ApplyExpr[
                                 $recv: #MatchedRegex['$1']
                                 $recv: #NameExpr['split']
                                 $param: #List[
                                    $expression: #Regex['/,/']
                                 ]
                              ]
                              $index: #List[
                                 $expression: #IntExpr['2']
                              ]
                           ]
                           $right: #ComplExpr[
                              $expr: #Regex['/"(.*?)"/']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['format']
                           $right: #ApplyExpr[
                              $recv: #MatchedRegex['$1']
                              $recv: #NameExpr['split']
                              $param: #List[
                                 $expression: #Regex['//']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['lead']
                           $right: #AssignExpr[
                              $left: #NameExpr['opt']
                              $right: #AssignExpr[
                                 $left: #NameExpr['trail']
                                 $right: #IntExpr['0']
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #AssignExpr[
                              $left: #Field[
                                 $base: #NameExpr['format']
                                 $name: #NameExpr['first']
                              ]
                              $right: #ComplExpr[
                                 $expr: #Regex['/\\d/']
                              ]
                           ]
                           $then: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['lead']
                                 $right: #ApplyExpr[
                                    $recv: #BuiltInVariable['$&']
                                    $recv: #NameExpr['to_i']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['format']
                                 $recv: #NameExpr['shift']
                              ]
                              $statement: #IfExpr[
                                 $cond: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['format']
                                       $name: #NameExpr['first']
                                    ]
                                    $right: #ComplExpr[
                                       $expr: #Regex['/\\d/']
                                    ]
                                 ]
                                 $then: #List[
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['opt']
                                       $right: #ApplyExpr[
                                          $recv: #BuiltInVariable['$&']
                                          $recv: #NameExpr['to_i']
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $recv: #NameExpr['format']
                                       $recv: #NameExpr['shift']
                                    ]
                                    $statement: #IfExpr[
                                       $cond: #AssignExpr[
                                          $left: #Field[
                                             $base: #NameExpr['format']
                                             $name: #NameExpr['first']
                                          ]
                                          $right: #ComplExpr[
                                             $expr: #Regex['/\\d/']
                                          ]
                                       ]
                                       $then: #List[
                                          $statement: #AssignExpr[
                                             $left: #NameExpr['trail']
                                             $right: #ApplyExpr[
                                                $recv: #BuiltInVariable['$&']
                                                $recv: #NameExpr['to_i']
                                             ]
                                          ]
                                          $statement: #ApplyExpr[
                                             $recv: #NameExpr['format']
                                             $recv: #NameExpr['shift']
                                          ]
                                          $statement: #AssignExpr[
                                             $left: #NameExpr['block_arg']
                                             $right: #TrueExpr['true']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #AndExpr[
                              $left: #EqExpr[
                                 $left: #ApplyExpr[
                                    $recv: #NameExpr['format']
                                    $recv: #NameExpr['first']
                                 ]
                                 $right: #StringExpr['*']
                              ]
                              $right: #[
                                 $base: #NameExpr['block_arg']
                              ]
                           ]
                           $then: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['var']
                                 $right: #TrueExpr['true']
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['format']
                                 $recv: #NameExpr['shift']
                              ]
                              $statement: #IfExpr[
                                 $cond: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['format']
                                       $name: #NameExpr['first']
                                    ]
                                    $right: #ComplExpr[
                                       $expr: #Regex['/\\d/']
                                    ]
                                 ]
                                 $then: #List[
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['trail']
                                       $right: #ApplyExpr[
                                          $recv: #BuiltInVariable['$&']
                                          $recv: #NameExpr['to_i']
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $recv: #NameExpr['format']
                                       $recv: #NameExpr['shift']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #EqExpr[
                              $left: #ApplyExpr[
                                 $recv: #NameExpr['format']
                                 $recv: #NameExpr['first']
                              ]
                              $right: #StringExpr[':']
                           ]
                           $then: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['hash']
                                 $right: #TrueExpr['true']
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['format']
                                 $recv: #NameExpr['shift']
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #EqExpr[
                              $left: #ApplyExpr[
                                 $recv: #NameExpr['format']
                                 $recv: #NameExpr['first']
                              ]
                              $right: #StringExpr['&']
                           ]
                           $then: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['block']
                                 $right: #TrueExpr['true']
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['format']
                                 $recv: #NameExpr['shift']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['args']
                           $right: #Array['[]']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['position']
                           $right: #IntExpr['1']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #OpenRange[
                              #IntExpr['1']
                              #AddExpr[
                                 $left: #NameExpr['position']
                                 $right: #NameExpr['lead']
                              ]
                           ]
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['index']
                              $body: #LShiftExpr[
                                 $left: #NameExpr['args']
                                 $right: #StringExpr[
                                    $inner: #NameExpr['index']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AddAssign[
                           $left: #NameExpr['position']
                           $right: #NameExpr['lead']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #OpenRange[
                              #NameExpr['position']
                              #AddExpr[
                                 $left: #NameExpr['position']
                                 $right: #NameExpr['opt']
                              ]
                           ]
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['index']
                              $body: #LShiftExpr[
                                 $left: #NameExpr['args']
                                 $right: #StringExpr[
                                    $inner: #NameExpr['index']
                                    $inner: #NameExpr['index']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AddAssign[
                           $left: #NameExpr['position']
                           $right: #NameExpr['opt']
                        ]
                        $statement: #IfExpr[
                           $cond: #NameExpr['var']
                           $then: #List[
                              $statement: #LShiftExpr[
                                 $left: #NameExpr['args']
                                 $right: #StringExpr['*args']
                              ]
                              $statement: #AddAssign[
                                 $left: #NameExpr['position']
                                 $right: #IntExpr['1']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #OpenRange[
                              #NameExpr['position']
                              #AddExpr[
                                 $left: #NameExpr['position']
                                 $right: #NameExpr['trail']
                              ]
                           ]
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['index']
                              $body: #LShiftExpr[
                                 $left: #NameExpr['args']
                                 $right: #StringExpr[
                                    $inner: #NameExpr['index']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AddAssign[
                           $left: #NameExpr['position']
                           $right: #NameExpr['trail']
                        ]
                        $statement: #IfExpr[
                           $cond: #NameExpr['hash']
                           $then: #LShiftExpr[
                              $left: #NameExpr['args']
                              $right: #StringExpr[
                                 $inner: #NameExpr['position']
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $then: #LShiftExpr[
                              $left: #NameExpr['args']
                              $right: #StringExpr['&block']
                           ]
                           $cond: #NameExpr['block']
                        ]
                        $statement: #StringExpr[
                           $inner: #ApplyExpr[
                              $base: #NameExpr['args']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #StringExpr[', ']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['remove_commented_out_lines']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['@content']
                        $recv: #NameExpr['gsub!']
                        $param: #List[
                           $expression: #Regex['%r%//.*rb_define_%']
                           $expression: #StringExpr['//']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['scan']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['remove_commented_out_lines']
                        $statement: #NameExpr['do_modules']
                        $statement: #NameExpr['do_classes']
                        $statement: #NameExpr['do_missing']
                        $statement: #NameExpr['do_constants']
                        $statement: #NameExpr['do_methods']
                        $statement: #NameExpr['do_includes']
                        $statement: #NameExpr['do_aliases']
                        $statement: #NameExpr['do_attrs']
                        $statement: #NameExpr['deduplicate_call_seq']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@store']
                           $recv: #NameExpr['add_c_variables']
                           $param: #List[
                              $expression: #Self['self']
                           ]
                        ]
                        $statement: #NameExpr['@top_level']
                     ]
                  ]
               ]
            ]
         ]
      ]
   ]
   #Comsumed['comsumed']
]
