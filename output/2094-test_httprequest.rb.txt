#Source[
   #List[
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['webrick']
         ]
      ]
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['stringio']
         ]
      ]
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['test/unit']
         ]
      ]
      $statement: #Class[
         $name: #NameExpr['TestWEBrickHTTPRequest']
         $super: #Field[
            $recv: #Field[
               $recv: #NameExpr['Test']
               $name: #NameExpr['Unit']
            ]
            $name: #NameExpr['TestCase']
         ]
         $body: #BlockExpr[
            $main: #List[
               $statement: #FuncDecl[
                  $name: #NameExpr['teardown']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $recv: #Field[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['Utils']
                              ]
                              $name: #NameExpr['TimeoutHandler']
                           ]
                           $recv: #NameExpr['terminate']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #Super['super']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_simple_request']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['GET /\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #NameExpr['msg']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['meta_vars']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_09']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      GET /\n      foobar    # HTTP/0.9 request don\'t have header nor entity body.\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['msg']
                                       $recv: #NameExpr['gsub']
                                       $param: #List[
                                          $expression: #Regex['/^ {6}/']
                                          $expression: #StringExpr['']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['GET']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['request_method']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['/']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['unparsed_uri']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['WEBrick']
                                    $name: #NameExpr['HTTPVersion']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #StringExpr['0.9']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['http_version']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Indexer[
                                 $recv: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                                 $index: #List[
                                    $expression: #NameExpr['ServerName']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['host']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['80']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['port']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #FalseExpr['false']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['keep_alive?']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Nil['nil']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['body']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['req']
                                    $recv: #NameExpr['query']
                                 ]
                                 $recv: #NameExpr['empty?']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_10']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      GET / HTTP/1.0\n\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['msg']
                                       $recv: #NameExpr['gsub']
                                       $param: #List[
                                          $expression: #Regex['/^ {6}/']
                                          $expression: #StringExpr['']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['GET']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['request_method']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['/']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['unparsed_uri']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['WEBrick']
                                    $name: #NameExpr['HTTPVersion']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #StringExpr['1.0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['http_version']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Indexer[
                                 $recv: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                                 $index: #List[
                                    $expression: #NameExpr['ServerName']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['host']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['80']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['port']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #FalseExpr['false']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['keep_alive?']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Nil['nil']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['body']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['req']
                                    $recv: #NameExpr['query']
                                 ]
                                 $recv: #NameExpr['empty?']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_11']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      GET /path HTTP/1.1\n\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['msg']
                                       $recv: #NameExpr['gsub']
                                       $param: #List[
                                          $expression: #Regex['/^ {6}/']
                                          $expression: #StringExpr['']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['GET']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['request_method']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['/path']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['unparsed_uri']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['script_name']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['/path']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['path_info']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['WEBrick']
                                    $name: #NameExpr['HTTPVersion']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #StringExpr['1.1']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['http_version']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Indexer[
                                 $recv: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                                 $index: #List[
                                    $expression: #NameExpr['ServerName']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['host']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['80']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['port']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #TrueExpr['true']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['keep_alive?']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Nil['nil']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['body']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['req']
                                    $recv: #NameExpr['query']
                                 ]
                                 $recv: #NameExpr['empty?']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_request_uri_too_large']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      GET /#{"a"*2084} HTTP/1.1\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_raise']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['WEBrick']
                                    $name: #NameExpr['HTTPStatus']
                                 ]
                                 $name: #NameExpr['RequestURITooLarge']
                              ]
                           ]
                           $body: #Block[
                              $body: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['parse']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['StringIO']
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #ApplyExpr[
                                             $recv: #NameExpr['msg']
                                             $recv: #NameExpr['gsub']
                                             $param: #List[
                                                $expression: #Regex['/^ {6}/']
                                                $expression: #StringExpr['']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_headers']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      GET /path HTTP/1.1\n      Host: test.ruby-lang.org:8080\n      Connection: close\n      Accept: text/*;q=0.3, text/html;q=0.7, text/html;level=1,\n              text/html;level=2;q=0.4, */*;q=0.5\n      Accept-Encoding: compress;q=0.5\n      Accept-Encoding: gzip;q=1.0, identity; q=0.4, *;q=0\n      Accept-Language: en;q=0.5, *; q=0\n      Accept-Language: ja\n      Content-Type: text/plain\n      Content-Length: 7\n      X-Empty-Header:\n\n      foobar\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['msg']
                                       $recv: #NameExpr['gsub']
                                       $param: #List[
                                          $expression: #Regex['/^ {6}/']
                                          $expression: #StringExpr['']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['URI']
                                 $recv: #NameExpr['parse']
                                 $param: #List[
                                    $expression: #StringExpr['http://test.ruby-lang.org:8080/path']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['request_uri']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['test.ruby-lang.org']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['host']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['8080']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['port']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #FalseExpr['false']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['keep_alive?']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w(text/html;level=1 text/html */* text/html;level=2 text/*)']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['accept']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w(gzip compress identity *)']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['accept_encoding']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w(ja en *)']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['accept_language']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['7']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['content_length']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['text/plain']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['content_type']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['foobar\\n']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['body']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['']
                              $expression: #Indexer[
                                 $recv: #NameExpr['req']
                                 $index: #List[
                                    $expression: #StringExpr['x-empty-header']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Nil['nil']
                              $expression: #Indexer[
                                 $recv: #NameExpr['req']
                                 $index: #List[
                                    $expression: #StringExpr['x-no-header']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['req']
                                    $recv: #NameExpr['query']
                                 ]
                                 $recv: #NameExpr['empty?']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_header2']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      POST /foo/bar/../baz?q=a HTTP/1.0\n      Content-Length: 9\n      User-Agent:\n        FOO   BAR\n        BAZ\n\n      hogehoge\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['msg']
                                       $recv: #NameExpr['gsub']
                                       $param: #List[
                                          $expression: #Regex['/^ {6}/']
                                          $expression: #StringExpr['']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['POST']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['request_method']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['/foo/baz']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['path']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['script_name']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['/foo/baz']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['path_info']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['9']
                              $expression: #Indexer[
                                 $recv: #NameExpr['req']
                                 $index: #List[
                                    $expression: #StringExpr['content-length']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['FOO BAR BAZ']
                              $expression: #Indexer[
                                 $recv: #NameExpr['req']
                                 $index: #List[
                                    $expression: #StringExpr['user-agent']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['hogehoge\\n']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['body']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_headers3']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      GET /path HTTP/1.1\n      Host: test.ruby-lang.org\n\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['msg']
                                       $recv: #NameExpr['gsub']
                                       $param: #List[
                                          $expression: #Regex['/^ {6}/']
                                          $expression: #StringExpr['']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['URI']
                                 $recv: #NameExpr['parse']
                                 $param: #List[
                                    $expression: #StringExpr['http://test.ruby-lang.org/path']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['request_uri']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['test.ruby-lang.org']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['host']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['80']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['port']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      GET /path HTTP/1.1\n      Host: 192.168.1.1\n\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['msg']
                                       $recv: #NameExpr['gsub']
                                       $param: #List[
                                          $expression: #Regex['/^ {6}/']
                                          $expression: #StringExpr['']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['URI']
                                 $recv: #NameExpr['parse']
                                 $param: #List[
                                    $expression: #StringExpr['http://192.168.1.1/path']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['request_uri']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['192.168.1.1']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['host']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['80']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['port']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      GET /path HTTP/1.1\n      Host: [fe80::208:dff:feef:98c7]\n\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['msg']
                                       $recv: #NameExpr['gsub']
                                       $param: #List[
                                          $expression: #Regex['/^ {6}/']
                                          $expression: #StringExpr['']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['URI']
                                 $recv: #NameExpr['parse']
                                 $param: #List[
                                    $expression: #StringExpr['http://[fe80::208:dff:feef:98c7]/path']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['request_uri']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['[fe80::208:dff:feef:98c7]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['host']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['80']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['port']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      GET /path HTTP/1.1\n      Host: 192.168.1.1:8080\n\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['msg']
                                       $recv: #NameExpr['gsub']
                                       $param: #List[
                                          $expression: #Regex['/^ {6}/']
                                          $expression: #StringExpr['']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['URI']
                                 $recv: #NameExpr['parse']
                                 $param: #List[
                                    $expression: #StringExpr['http://192.168.1.1:8080/path']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['request_uri']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['192.168.1.1']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['host']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['8080']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['port']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      GET /path HTTP/1.1\n      Host: [fe80::208:dff:feef:98c7]:8080\n\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['msg']
                                       $recv: #NameExpr['gsub']
                                       $param: #List[
                                          $expression: #Regex['/^ {6}/']
                                          $expression: #StringExpr['']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['URI']
                                 $recv: #NameExpr['parse']
                                 $param: #List[
                                    $expression: #StringExpr['http://[fe80::208:dff:feef:98c7]:8080/path']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['request_uri']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['[fe80::208:dff:feef:98c7]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['host']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['8080']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['port']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_get_params']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['param']
                           $right: #StringExpr['foo=1;foo=2;foo=3;bar=x']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      GET /path?#{param} HTTP/1.1\n      Host: test.ruby-lang.org:8080\n\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['msg']
                                       $recv: #NameExpr['gsub']
                                       $param: #List[
                                          $expression: #Regex['/^ {6}/']
                                          $expression: #StringExpr['']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['query']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['req']
                              $recv: #NameExpr['query']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['1']
                              $expression: #Indexer[
                                 $recv: #NameExpr['query']
                                 $index: #List[
                                    $expression: #StringExpr['foo']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['1']
                                    $expression: #StringExpr['2']
                                    $expression: #StringExpr['3']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #Indexer[
                                    $recv: #NameExpr['query']
                                    $index: #List[
                                       $expression: #StringExpr['foo']
                                    ]
                                 ]
                                 $recv: #NameExpr['to_ary']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['1']
                                    $expression: #StringExpr['2']
                                    $expression: #StringExpr['3']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #Indexer[
                                    $recv: #NameExpr['query']
                                    $index: #List[
                                       $expression: #StringExpr['foo']
                                    ]
                                 ]
                                 $recv: #NameExpr['list']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['x']
                              $expression: #Indexer[
                                 $recv: #NameExpr['query']
                                 $index: #List[
                                    $expression: #StringExpr['bar']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['x']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #Indexer[
                                    $recv: #NameExpr['query']
                                    $index: #List[
                                       $expression: #StringExpr['bar']
                                    ]
                                 ]
                                 $recv: #NameExpr['list']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_post_params']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['param']
                           $right: #StringExpr['foo=1;foo=2;foo=3;bar=x']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      POST /path?foo=x;foo=y;foo=z;bar=1 HTTP/1.1\n      Host: test.ruby-lang.org:8080\n      Content-Length: #{param.size}\n      Content-Type: application/x-www-form-urlencoded\n\n      #{param}\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['msg']
                                       $recv: #NameExpr['gsub']
                                       $param: #List[
                                          $expression: #Regex['/^ {6}/']
                                          $expression: #StringExpr['']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['query']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['req']
                              $recv: #NameExpr['query']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['1']
                              $expression: #Indexer[
                                 $recv: #NameExpr['query']
                                 $index: #List[
                                    $expression: #StringExpr['foo']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['1']
                                    $expression: #StringExpr['2']
                                    $expression: #StringExpr['3']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #Indexer[
                                    $recv: #NameExpr['query']
                                    $index: #List[
                                       $expression: #StringExpr['foo']
                                    ]
                                 ]
                                 $recv: #NameExpr['to_ary']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['1']
                                    $expression: #StringExpr['2']
                                    $expression: #StringExpr['3']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #Indexer[
                                    $recv: #NameExpr['query']
                                    $index: #List[
                                       $expression: #StringExpr['foo']
                                    ]
                                 ]
                                 $recv: #NameExpr['list']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['x']
                              $expression: #Indexer[
                                 $recv: #NameExpr['query']
                                 $index: #List[
                                    $expression: #StringExpr['bar']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['x']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #Indexer[
                                    $recv: #NameExpr['query']
                                    $index: #List[
                                       $expression: #StringExpr['bar']
                                    ]
                                 ]
                                 $recv: #NameExpr['list']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_chunked']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['crlf']
                           $right: #StringExpr['\\x0d\\x0a']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      POST /path HTTP/1.1\n      Host: test.ruby-lang.org:8080\n      Transfer-Encoding: chunked\n\n']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['msg']
                           $recv: #NameExpr['gsub!']
                           $param: #List[
                              $expression: #Regex['/^ {6}/']
                              $expression: #StringExpr['']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['open']
                           $param: #List[
                              $expression: #File['__FILE__']
                           ]
                           $body: #Block[
                              $param: #NameExpr['io']
                              $body: #While[
                                 $cond: #AssignExpr[
                                    $left: #NameExpr['chunk']
                                    $right: #ApplyExpr[
                                       $recv: #NameExpr['io']
                                       $recv: #NameExpr['read']
                                       $param: #List[
                                          $expression: #IntExpr['100']
                                       ]
                                    ]
                                 ]
                                 $body: #List[
                                    $statement: #LShiftExpr[
                                       $left: #LShiftExpr[
                                          $left: #NameExpr['msg']
                                          $right: #ApplyExpr[
                                             $recv: #ApplyExpr[
                                                $recv: #NameExpr['chunk']
                                                $recv: #NameExpr['size']
                                             ]
                                             $recv: #NameExpr['to_s']
                                             $param: #List[
                                                $expression: #IntExpr['16']
                                             ]
                                          ]
                                       ]
                                       $right: #NameExpr['crlf']
                                    ]
                                    $statement: #LShiftExpr[
                                       $left: #LShiftExpr[
                                          $left: #NameExpr['msg']
                                          $right: #NameExpr['chunk']
                                       ]
                                       $right: #NameExpr['crlf']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #LShiftExpr[
                           $left: #LShiftExpr[
                              $left: #NameExpr['msg']
                              $right: #StringExpr['0']
                           ]
                           $right: #NameExpr['crlf']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #NameExpr['msg']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['File']
                                 $recv: #NameExpr['read']
                                 $param: #List[
                                    $expression: #File['__FILE__']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['body']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_forwarded']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      GET /foo HTTP/1.1\n      Host: localhost:10080\n      User-Agent: w3m/0.5.2\n      X-Forwarded-For: 123.123.123.123\n      X-Forwarded-Host: forward.example.com\n      X-Forwarded-Server: server.example.com\n      Connection: Keep-Alive\n\n']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['msg']
                           $recv: #NameExpr['gsub!']
                           $param: #List[
                              $expression: #Regex['/^ {6}/']
                              $expression: #StringExpr['']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #NameExpr['msg']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['server.example.com']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['server_name']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['http://forward.example.com/foo']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['req']
                                    $recv: #NameExpr['request_uri']
                                 ]
                                 $recv: #NameExpr['to_s']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['forward.example.com']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['host']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['80']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['port']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['123.123.123.123']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['remote_ip']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #NotExpr[
                                 $expr: #ApplyExpr[
                                    $recv: #NameExpr['req']
                                    $recv: #NameExpr['ssl?']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      GET /foo HTTP/1.1\n      Host: localhost:10080\n      User-Agent: w3m/0.5.2\n      X-Forwarded-For: 192.168.1.10, 172.16.1.1, 123.123.123.123\n      X-Forwarded-Host: forward.example.com:8080\n      X-Forwarded-Server: server.example.com\n      Connection: Keep-Alive\n\n']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['msg']
                           $recv: #NameExpr['gsub!']
                           $param: #List[
                              $expression: #Regex['/^ {6}/']
                              $expression: #StringExpr['']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #NameExpr['msg']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['server.example.com']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['server_name']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['http://forward.example.com:8080/foo']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['req']
                                    $recv: #NameExpr['request_uri']
                                 ]
                                 $recv: #NameExpr['to_s']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['forward.example.com']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['host']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['8080']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['port']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['123.123.123.123']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['remote_ip']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #NotExpr[
                                 $expr: #ApplyExpr[
                                    $recv: #NameExpr['req']
                                    $recv: #NameExpr['ssl?']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      GET /foo HTTP/1.1\n      Host: localhost:10080\n      Client-IP: 234.234.234.234\n      X-Forwarded-Proto: https, http\n      X-Forwarded-For: 192.168.1.10, 10.0.0.1, 123.123.123.123\n      X-Forwarded-Host: forward.example.com\n      X-Forwarded-Server: server.example.com\n      X-Requested-With: XMLHttpRequest\n      Connection: Keep-Alive\n\n']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['msg']
                           $recv: #NameExpr['gsub!']
                           $param: #List[
                              $expression: #Regex['/^ {6}/']
                              $expression: #StringExpr['']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #NameExpr['msg']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['server.example.com']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['server_name']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['https://forward.example.com/foo']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['req']
                                    $recv: #NameExpr['request_uri']
                                 ]
                                 $recv: #NameExpr['to_s']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['forward.example.com']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['host']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['443']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['port']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['234.234.234.234']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['remote_ip']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['ssl?']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      GET /foo HTTP/1.1\n      Host: localhost:10080\n      Client-IP: 234.234.234.234\n      X-Forwarded-Proto: https\n      X-Forwarded-For: 192.168.1.10\n      X-Forwarded-Host: forward1.example.com:1234, forward2.example.com:5678\n      X-Forwarded-Server: server1.example.com, server2.example.com\n      X-Requested-With: XMLHttpRequest\n      Connection: Keep-Alive\n\n']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['msg']
                           $recv: #NameExpr['gsub!']
                           $param: #List[
                              $expression: #Regex['/^ {6}/']
                              $expression: #StringExpr['']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #NameExpr['msg']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['server1.example.com']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['server_name']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['https://forward1.example.com:1234/foo']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['req']
                                    $recv: #NameExpr['request_uri']
                                 ]
                                 $recv: #NameExpr['to_s']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['forward1.example.com']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['host']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['1234']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['port']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['234.234.234.234']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['remote_ip']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['req']
                                 $recv: #NameExpr['ssl?']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_continue_sent']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      POST /path HTTP/1.1\n      Expect: 100-continue\n\n']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['msg']
                           $recv: #NameExpr['gsub!']
                           $param: #List[
                              $expression: #Regex['/^ {6}/']
                              $expression: #StringExpr['']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #NameExpr['msg']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #Indexer[
                                 $recv: #NameExpr['req']
                                 $index: #List[
                                    $expression: #StringExpr['expect']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['l']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['msg']
                              $recv: #NameExpr['size']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['continue']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_not_equal']
                           $param: #List[
                              $expression: #NameExpr['l']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['msg']
                                 $recv: #NameExpr['size']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_match']
                           $param: #List[
                              $expression: #Regex['/HTTP\\/1.1 100 continue\\r\\n\\r\\n\\z/']
                              $expression: #NameExpr['msg']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #NotExpr[
                                 $expr: #Indexer[
                                    $recv: #NameExpr['req']
                                    $index: #List[
                                       $expression: #StringExpr['expect']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_continue_not_sent']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      POST /path HTTP/1.1\n\n']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['msg']
                           $recv: #NameExpr['gsub!']
                           $param: #List[
                              $expression: #Regex['/^ {6}/']
                              $expression: #StringExpr['']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['req']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['WEBrick']
                                 $name: #NameExpr['HTTPRequest']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['WEBrick']
                                       $name: #NameExpr['Config']
                                    ]
                                    $name: #NameExpr['HTTP']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['parse']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #NameExpr['msg']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #NotExpr[
                                 $expr: #Indexer[
                                    $recv: #NameExpr['req']
                                    $index: #List[
                                       $expression: #StringExpr['expect']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['l']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['msg']
                              $recv: #NameExpr['size']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['req']
                           $recv: #NameExpr['continue']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['l']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['msg']
                                 $recv: #NameExpr['size']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_bad_messages']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['param']
                           $right: #StringExpr['foo=1;foo=2;foo=3;bar=x']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      POST /path?foo=x;foo=y;foo=z;bar=1 HTTP/1.1\n      Host: test.ruby-lang.org:8080\n      Content-Type: application/x-www-form-urlencoded\n\n      #{param}\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_raise']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['WEBrick']
                                    $name: #NameExpr['HTTPStatus']
                                 ]
                                 $name: #NameExpr['LengthRequired']
                              ]
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['req']
                                    $right: #ApplyExpr[
                                       $recv: #Field[
                                          $recv: #NameExpr['WEBrick']
                                          $name: #NameExpr['HTTPRequest']
                                       ]
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #Field[
                                                $recv: #NameExpr['WEBrick']
                                                $name: #NameExpr['Config']
                                             ]
                                             $name: #NameExpr['HTTP']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $recv: #NameExpr['req']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['StringIO']
                                          $recv: #NameExpr['new']
                                          $param: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #NameExpr['msg']
                                                $recv: #NameExpr['gsub']
                                                $param: #List[
                                                   $expression: #Regex['/^ {6}/']
                                                   $expression: #StringExpr['']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $recv: #NameExpr['req']
                                    $recv: #NameExpr['body']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      POST /path?foo=x;foo=y;foo=z;bar=1 HTTP/1.1\n      Host: test.ruby-lang.org:8080\n      Content-Length: 100000\n\n      body is too short.\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_raise']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['WEBrick']
                                    $name: #NameExpr['HTTPStatus']
                                 ]
                                 $name: #NameExpr['BadRequest']
                              ]
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['req']
                                    $right: #ApplyExpr[
                                       $recv: #Field[
                                          $recv: #NameExpr['WEBrick']
                                          $name: #NameExpr['HTTPRequest']
                                       ]
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #Field[
                                                $recv: #NameExpr['WEBrick']
                                                $name: #NameExpr['Config']
                                             ]
                                             $name: #NameExpr['HTTP']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $recv: #NameExpr['req']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['StringIO']
                                          $recv: #NameExpr['new']
                                          $param: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #NameExpr['msg']
                                                $recv: #NameExpr['gsub']
                                                $param: #List[
                                                   $expression: #Regex['/^ {6}/']
                                                   $expression: #StringExpr['']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $recv: #NameExpr['req']
                                    $recv: #NameExpr['body']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #HereDocument['      POST /path?foo=x;foo=y;foo=z;bar=1 HTTP/1.1\n      Host: test.ruby-lang.org:8080\n      Transfer-Encoding: foobar\n\n      body is too short.\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_raise']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['WEBrick']
                                    $name: #NameExpr['HTTPStatus']
                                 ]
                                 $name: #NameExpr['NotImplemented']
                              ]
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['req']
                                    $right: #ApplyExpr[
                                       $recv: #Field[
                                          $recv: #NameExpr['WEBrick']
                                          $name: #NameExpr['HTTPRequest']
                                       ]
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #Field[
                                                $recv: #NameExpr['WEBrick']
                                                $name: #NameExpr['Config']
                                             ]
                                             $name: #NameExpr['HTTP']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $recv: #NameExpr['req']
                                    $recv: #NameExpr['parse']
                                    $param: #List[
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['StringIO']
                                          $recv: #NameExpr['new']
                                          $param: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #NameExpr['msg']
                                                $recv: #NameExpr['gsub']
                                                $param: #List[
                                                   $expression: #Regex['/^ {6}/']
                                                   $expression: #StringExpr['']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $recv: #NameExpr['req']
                                    $recv: #NameExpr['body']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
            ]
         ]
      ]
   ]
   #Comsumed['comsumed']
]
