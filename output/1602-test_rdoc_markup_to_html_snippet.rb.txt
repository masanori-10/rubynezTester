#Source[
   #List[
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['rdoc/test_case']
         ]
      ]
      $statement: #Class[
         $name: #NameExpr['TestRDocMarkupToHtmlSnippet']
         $super: #Field[
            $recv: #Field[
               $recv: #NameExpr['RDoc']
               $name: #NameExpr['Markup']
            ]
            $name: #NameExpr['FormatterTestCase']
         ]
         $body: #BlockExpr[
            $main: #List[
               $statement: #NameExpr['add_visitor_tests']
               $statement: #FuncDecl[
                  $name: #NameExpr['setup']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #Super['super']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@to']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['RDoc']
                                    $name: #NameExpr['Markup']
                                 ]
                                 $name: #NameExpr['ToHtmlSnippet']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #NameExpr['@options']
                                 $expression: #IntExpr['100']
                                 $expression: #IntExpr['100']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@ellipsis']
                           $right: #ApplyExpr[
                              $base: #NameExpr['@to']
                              $recv: #NameExpr['to_html']
                              $param: #List[
                                 $expression: #StringExpr['...']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_blank_line']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_empty']
                        $param: #List[
                           $expression: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['res']
                              ]
                              $recv: #NameExpr['join']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_block_quote']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['\\n<blockquote><p>quote\\n</blockquote>\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['5']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_document']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>hello\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['5']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_heading']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>Hello\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['5']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_heading_1']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>Hello\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['5']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_heading_2']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>Hello\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['5']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_heading_3']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>Hello\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['5']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_heading_4']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>Hello\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['5']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_heading_b']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p><strong>Hello</strong>\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['5']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_heading_suppressed_crossref']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>Hello\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['5']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_end_bullet']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['list']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_end_label']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['list']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_end_lalpha']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['list']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_end_number']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['list']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_end_note']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['list']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_end_ualpha']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['list']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_item_end_bullet']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_item_end_label']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['4']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_item_end_lalpha']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_item_end_note']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['4']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_item_end_number']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_item_end_ualpha']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_item_start_bullet']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_item_start_label']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>cat &mdash; ']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['4']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_item_start_lalpha']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_item_start_note']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>cat &mdash; ']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['4']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_item_start_note_2']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['<p><code>teletype</code> &mdash; teletype description\n\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['29']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_item_start_note_multi_description']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['<p>label &mdash; description one\n<p>description two\n\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['37']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_item_start_note_multi_label']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['<p>one, two &mdash; two headers\n\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['18']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_item_start_number']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_item_start_ualpha']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_start_bullet']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['BULLET']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['list']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_start_label']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['LABEL']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['list']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_start_lalpha']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['LALPHA']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['list']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_start_note']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['NOTE']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['list']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_start_number']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['NUMBER']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['list']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_list_start_ualpha']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['UALPHA']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['list']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_paragraph']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>hi\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['2']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_paragraph_b']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>reg <strong>bold words</strong> reg\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['18']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_paragraph_br']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>one<br>two\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['6']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_paragraph_break']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>hello<br>\\nworld\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['11']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_paragraph_i']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>reg <em>italic words</em> reg\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['20']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_paragraph_plus']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>reg <code>teletype</code> reg\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['16']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_paragraph_star']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>reg <strong>bold</strong> reg\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['12']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_paragraph_underscore']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>reg <em>italic</em> reg\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['14']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_raw']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_rule']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['res']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['accept_verbatim']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['\\n<pre class=\\"ruby\\"><span class=\\"ruby-identifier\\">hi</span>\\n  <span class=\\"ruby-identifier\\">world</span>\\n</pre>\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['10']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['end_accepting']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #StringExpr['hi']
                           $expression: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['res']
                              ]
                              $recv: #NameExpr['join']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['start_accepting']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['res']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['in_list_entry']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['list']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['list_nested']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['<p>l1\n<p>l1.1\n\n<p>l2\n\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['8']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['list_verbatim']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['<p>list stuff\n\n<pre>* list\n  with\n\n  second\n\n  1. indented\n  2. numbered\n\n  third\n\n* second</pre>\n\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['end_accepting']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['81']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_accept_heading_7']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@to']
                           $recv: #NameExpr['start_accepting']
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@to']
                           $recv: #NameExpr['accept_heading']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['@RM']
                                    $name: #NameExpr['Heading']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #IntExpr['7']
                                    $expression: #StringExpr['Hello']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>Hello\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['5']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_accept_heading_aref_class']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@to']
                              $name: #NameExpr['code_object']
                           ]
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['RDoc']
                                 $name: #NameExpr['NormalClass']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #StringExpr['Foo']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@to']
                           $recv: #NameExpr['start_accepting']
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@to']
                           $recv: #NameExpr['accept_heading']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['@RM']
                                    $name: #NameExpr['Heading']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #IntExpr['1']
                                    $expression: #StringExpr['Hello']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>Hello\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['5']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_accept_heading_aref_method']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@to']
                              $name: #NameExpr['code_object']
                           ]
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['RDoc']
                                 $name: #NameExpr['AnyMethod']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Nil['nil']
                                 $expression: #StringExpr['foo']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@to']
                           $recv: #NameExpr['start_accepting']
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@to']
                           $recv: #NameExpr['accept_heading']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['@RM']
                                    $name: #NameExpr['Heading']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #IntExpr['1']
                                    $expression: #StringExpr['Hello']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>Hello\\n']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['5']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_accept_verbatim_ruby']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['options']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['RDoc']
                                 $name: #NameExpr['Options']
                              ]
                              $recv: #NameExpr['new']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['rdoc']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['RDoc']
                                 $name: #NameExpr['RDoc']
                              ]
                              $recv: #NameExpr['new']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['rdoc']
                              $name: #NameExpr['options']
                           ]
                           $right: #NameExpr['options']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #Field[
                                 $recv: #NameExpr['RDoc']
                                 $name: #NameExpr['RDoc']
                              ]
                              $name: #NameExpr['current']
                           ]
                           $right: #NameExpr['rdoc']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['verb']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['@RM']
                                 $name: #NameExpr['Verbatim']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #StringExpr['class C\\n']
                                 $expression: #StringExpr['end\\n']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@to']
                           $recv: #NameExpr['start_accepting']
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@to']
                           $recv: #NameExpr['accept_verbatim']
                           $param: #List[
                              $expression: #NameExpr['verb']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['\n<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">C</span>\n<span class="ruby-keyword">end</span>\n</pre>\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['11']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_accept_verbatim_ruby_error']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['options']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['RDoc']
                                 $name: #NameExpr['Options']
                              ]
                              $recv: #NameExpr['new']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['rdoc']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['RDoc']
                                 $name: #NameExpr['RDoc']
                              ]
                              $recv: #NameExpr['new']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['rdoc']
                              $name: #NameExpr['options']
                           ]
                           $right: #NameExpr['options']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #Field[
                                 $recv: #NameExpr['RDoc']
                                 $name: #NameExpr['RDoc']
                              ]
                              $name: #NameExpr['current']
                           ]
                           $right: #NameExpr['rdoc']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['verb']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['@RM']
                                 $name: #NameExpr['Verbatim']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #StringExpr['a % 09 # => blah\\n']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@to']
                           $recv: #NameExpr['start_accepting']
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@to']
                           $recv: #NameExpr['accept_verbatim']
                           $param: #List[
                              $expression: #NameExpr['verb']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['inner']
                           $right: #ApplyExpr[
                              $base: #NameExpr['CGI']
                              $recv: #NameExpr['escapeHTML']
                              $param: #List[
                                 $expression: #StringExpr['a % 09 # => blah']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['\n<pre>#{inner}</pre>\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['res']
                                 ]
                                 $recv: #NameExpr['join']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['16']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_add_paragraph']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['@to']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['RDoc']
                                    $name: #NameExpr['Markup']
                                 ]
                                 $name: #NameExpr['ToHtmlSnippet']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #NameExpr['@options']
                                 $expression: #IntExpr['0']
                                 $expression: #IntExpr['3']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_throws']
                           $param: #List[
                              $expression: #NameExpr['done']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['add_paragraph']
                                 ]
                                 $statement: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['add_paragraph']
                                 ]
                                 $statement: #ApplyExpr[
                                    $recv: #NameExpr['@to']
                                    $recv: #NameExpr['add_paragraph']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['3']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['paragraphs']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_convert_limit']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['rdoc']
                           $right: #HereDocument['= Hello\n\nThis is some text, it *will* be cut off after 100 characters and an ellipsis\nmust follow\n\nSo there you have it\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['<p>Hello\n<p>This is some text, it <strong>will</strong> be cut off after 100 characters\nand an ellipsis must follow\n<p>So there you #{@ellipsis}\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['actual']
                           $right: #ApplyExpr[
                              $base: #NameExpr['@to']
                              $recv: #NameExpr['convert']
                              $param: #List[
                                 $expression: #NameExpr['rdoc']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['actual']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['111']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                              $expression: #StringExpr['snippet character length']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_convert_limit_2']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['rdoc']
                           $right: #HereDocument['Outputs formatted RI data for the class or method +name+.\n\nReturns true if +name+ was found, false if it was not an alternative could\nbe guessed, raises an error if +name+ couldn\'t be guessed.\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['<p>Outputs formatted RI data for the class or method <code>name</code>.\n<p>Returns true if <code>name</code> was found, false if it was #{@ellipsis}\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['actual']
                           $right: #ApplyExpr[
                              $base: #NameExpr['@to']
                              $recv: #NameExpr['convert']
                              $param: #List[
                                 $expression: #NameExpr['rdoc']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['actual']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['159']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                              $expression: #StringExpr['snippet character length']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_convert_limit_paragraphs']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['@to']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['RDoc']
                                    $name: #NameExpr['Markup']
                                 ]
                                 $name: #NameExpr['ToHtmlSnippet']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #NameExpr['@options']
                                 $expression: #IntExpr['100']
                                 $expression: #IntExpr['3']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['rdoc']
                           $right: #HereDocument['= \\RDoc - Ruby Documentation System\n\n* {RDoc Project Page}[https://github.com/rdoc/rdoc/]\n* {RDoc Documentation}[http://docs.seattlerb.org/rdoc]\n* {RDoc Bug Tracker}[https://github.com/rdoc/rdoc/issues]\n\n== DESCRIPTION:\n\nRDoc produces HTML and command-line documentation for Ruby projects.  RDoc\nincludes the +rdoc+ and +ri+ tools for generating and displaying online\ndocumentation.\n\nSee RDoc for a description of RDoc\'s markup and basic use.\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['<p>RDoc - Ruby Documentation System\n<p>RDoc Project Page\n<p>RDoc Documentation\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['actual']
                           $right: #ApplyExpr[
                              $base: #NameExpr['@to']
                              $recv: #NameExpr['convert']
                              $param: #List[
                                 $expression: #NameExpr['rdoc']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['actual']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['67']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_convert_limit_in_tag']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['@to']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['RDoc']
                                    $name: #NameExpr['Markup']
                                 ]
                                 $name: #NameExpr['ToHtmlSnippet']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #NameExpr['@options']
                                 $expression: #IntExpr['4']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['rdoc']
                           $right: #StringExpr['* ab *c* d\\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #StringExpr[
                              $inner: #NameExpr['@ellipsis']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['actual']
                           $right: #ApplyExpr[
                              $base: #NameExpr['@to']
                              $recv: #NameExpr['convert']
                              $param: #List[
                                 $expression: #NameExpr['rdoc']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['4']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['actual']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_convert_limit_verbatim']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['rdoc']
                           $right: #HereDocument['= Hello There\n\nThis is some text, it *will* be cut off after 100 characters\n\n  This one is cut off in this verbatim section\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['<p>Hello There\n<p>This is some text, it <strong>will</strong> be cut off after 100 characters\n\n<pre>This one is cut off in this verbatim ...</pre>\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['actual']
                           $right: #ApplyExpr[
                              $base: #NameExpr['@to']
                              $recv: #NameExpr['convert']
                              $param: #List[
                                 $expression: #NameExpr['rdoc']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['actual']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['113']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_convert_limit_verbatim_2']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['rdoc']
                           $right: #HereDocument['Extracts the class, selector and method name parts from +name+ like\nFoo::Bar#baz.\n\nNOTE: Given Foo::Bar, Bar is considered a class even though it may be a\n      method\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['<p>Extracts the class, selector and method name parts from <code>name</code>\nlike Foo::Bar#baz.\n<p>NOTE: Given Foo::Bar, #{@ellipsis}\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['actual']
                           $right: #ApplyExpr[
                              $base: #NameExpr['@to']
                              $recv: #NameExpr['convert']
                              $param: #List[
                                 $expression: #NameExpr['rdoc']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['actual']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['101']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_convert_limit_verbatim_multiline']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['rdoc']
                           $right: #HereDocument['Look for directives in a normal comment block:\n\n  # :stopdoc:\n  # Don\'t display comment from this point forward\n\nThis routine modifies its +comment+ parameter.\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['inner']
                           $right: #ApplyExpr[
                              $base: #NameExpr['CGI']
                              $recv: #NameExpr['escapeHTML']
                              $param: #List[
                                 $expression: #StringExpr['# Don\'t display comment from this point forward']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['<p>Look for directives in a normal comment block:\n\n<pre class=\\"ruby\\"><span class=\\"ruby-comment\\"># :stopdoc:</span>\n<span class=\\"ruby-comment\\">#{inner}</span>\n</pre>\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['actual']
                           $right: #ApplyExpr[
                              $base: #NameExpr['@to']
                              $recv: #NameExpr['convert']
                              $param: #List[
                                 $expression: #NameExpr['rdoc']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['actual']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['105']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_convert_limit_over']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['@to']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['RDoc']
                                    $name: #NameExpr['Markup']
                                 ]
                                 $name: #NameExpr['ToHtmlSnippet']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #NameExpr['@options']
                                 $expression: #IntExpr['4']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['rdoc']
                           $right: #MulExpr[
                              $left: #StringExpr['* text\\n']
                              $right: #IntExpr['2']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #StringExpr['<p>text\\n']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['expected']
                           $recv: #NameExpr['chomp!']
                        ]
                        $statement: #LShiftExpr[
                           $left: #NameExpr['expected']
                           $right: #StringExpr[
                              $inner: #NameExpr['@ellipsis']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['actual']
                           $right: #ApplyExpr[
                              $base: #NameExpr['@to']
                              $recv: #NameExpr['convert']
                              $param: #List[
                                 $expression: #NameExpr['rdoc']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['4']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['actual']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_convert_string']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #StringExpr['&lt;&gt;']
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@to']
                              $recv: #NameExpr['convert_string']
                              $param: #List[
                                 $expression: #StringExpr['<>']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_convert_RDOCLINK_label_label']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['result']
                           $right: #ApplyExpr[
                              $base: #NameExpr['@to']
                              $recv: #NameExpr['convert']
                              $param: #List[
                                 $expression: #StringExpr['rdoc-label:label-One']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>One\\n']
                              $expression: #NameExpr['result']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['3']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_convert_RDOCLINK_label_foottext']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['result']
                           $right: #ApplyExpr[
                              $base: #NameExpr['@to']
                              $recv: #NameExpr['convert']
                              $param: #List[
                                 $expression: #StringExpr['rdoc-label:foottext-1']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>1\\n']
                              $expression: #NameExpr['result']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['1']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_convert_RDOCLINK_label_footmark']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['result']
                           $right: #ApplyExpr[
                              $base: #NameExpr['@to']
                              $recv: #NameExpr['convert']
                              $param: #List[
                                 $expression: #StringExpr['rdoc-label:footmark-1']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>1\\n']
                              $expression: #NameExpr['result']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['1']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_convert_RDOCLINK_ref']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['result']
                           $right: #ApplyExpr[
                              $base: #NameExpr['@to']
                              $recv: #NameExpr['convert']
                              $param: #List[
                                 $expression: #StringExpr['rdoc-ref:C']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>C\\n']
                              $expression: #NameExpr['result']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['1']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_convert_TIDYLINK_rdoc_label']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['result']
                           $right: #ApplyExpr[
                              $base: #NameExpr['@to']
                              $recv: #NameExpr['convert']
                              $param: #List[
                                 $expression: #StringExpr['{foo}[rdoc-label:foottext-1]']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>foo\\n']
                              $expression: #NameExpr['result']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['3']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_handle_special_HYPERLINK_link']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['special']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['RDoc']
                                    $name: #NameExpr['Markup']
                                 ]
                                 $name: #NameExpr['Special']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #IntExpr['0']
                                 $expression: #StringExpr['link:README.txt']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['link']
                           $right: #ApplyExpr[
                              $base: #NameExpr['@to']
                              $recv: #NameExpr['handle_special_HYPERLINK']
                              $param: #List[
                                 $expression: #NameExpr['special']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['README.txt']
                              $expression: #NameExpr['link']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_list_verbatim_2']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['str']
                           $right: #StringExpr['* one\\n    verb1\\n    verb2\\n* two\\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['<p>one\n\n<pre class=\\"ruby\\"><span class=\\"ruby-identifier\\">verb1</span>\n<span class=\\"ruby-identifier\\">verb2</span>\n</pre>\n<p>two\n\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@m']
                                 $recv: #NameExpr['convert']
                                 $param: #List[
                                    $expression: #NameExpr['str']
                                    $expression: #NameExpr['@to']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['17']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_on_tags']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['on']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['RDoc']
                                    $name: #NameExpr['Markup']
                                 ]
                                 $name: #NameExpr['AttrChanger']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #IntExpr['2']
                                 $expression: #IntExpr['0']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@to']
                           $recv: #NameExpr['on_tags']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #NameExpr['on']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['2']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['mask']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_off_tags']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['on']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['RDoc']
                                    $name: #NameExpr['Markup']
                                 ]
                                 $name: #NameExpr['AttrChanger']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #IntExpr['2']
                                 $expression: #IntExpr['0']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['off']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['RDoc']
                                    $name: #NameExpr['Markup']
                                 ]
                                 $name: #NameExpr['AttrChanger']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #IntExpr['0']
                                 $expression: #IntExpr['2']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@to']
                           $recv: #NameExpr['on_tags']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #NameExpr['on']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@to']
                           $recv: #NameExpr['off_tags']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #NameExpr['off']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['mask']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_html']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p><code>--</code>\\n']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['util_format']
                                 $param: #List[
                                    $expression: #StringExpr['<tt>--</tt>']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['2']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@to']
                                 $recv: #NameExpr['characters']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['util_format']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['text']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['paragraph']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['RDoc']
                                    $name: #NameExpr['Markup']
                                 ]
                                 $name: #NameExpr['Paragraph']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #NameExpr['text']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@to']
                           $recv: #NameExpr['start_accepting']
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@to']
                           $recv: #NameExpr['accept_paragraph']
                           $param: #List[
                              $expression: #NameExpr['paragraph']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@to']
                           $recv: #NameExpr['end_accepting']
                        ]
                     ]
                  ]
               ]
            ]
         ]
      ]
   ]
   #Comsumed['comsumed']
]
