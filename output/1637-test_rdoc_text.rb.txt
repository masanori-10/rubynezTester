#Source[
   #List[
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['rdoc/test_case']
         ]
      ]
      $statement: #Class[
         $name: #NameExpr['TestRDocText']
         $super: #Field[
            $recv: #NameExpr['RDoc']
            $name: #NameExpr['TestCase']
         ]
         $body: #BlockExpr[
            $main: #List[
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['include']
                  $param: #List[
                     $expression: #Field[
                        $recv: #NameExpr['RDoc']
                        $name: #NameExpr['Text']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['setup']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #Super['super']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@options']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['RDoc']
                                 $name: #NameExpr['Options']
                              ]
                              $recv: #NameExpr['new']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@top_level']
                           $right: #ApplyExpr[
                              $base: #NameExpr['@store']
                              $recv: #NameExpr['add_file']
                              $param: #List[
                                 $expression: #StringExpr['file.rb']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_encode_fallback']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['…']
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['RDoc']
                                    $name: #NameExpr['Text']
                                 ]
                                 $recv: #NameExpr['encode_fallback']
                                 $param: #List[
                                    $expression: #StringExpr['…']
                                    $expression: #Field[
                                       $recv: #NameExpr['Encoding']
                                       $name: #NameExpr['UTF_8']
                                    ]
                                    $expression: #StringExpr['...']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['...']
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['RDoc']
                                    $name: #NameExpr['Text']
                                 ]
                                 $recv: #NameExpr['encode_fallback']
                                 $param: #List[
                                    $expression: #StringExpr['…']
                                    $expression: #Field[
                                       $recv: #NameExpr['Encoding']
                                       $name: #NameExpr['US_ASCII']
                                    ]
                                    $expression: #StringExpr['...']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_expand_tabs']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['hello\\n  dave']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['expand_tabs']
                                 $param: #List[
                                    $expression: #StringExpr['hello\\n  dave']
                                 ]
                              ]
                              $expression: #StringExpr['spaces']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['hello\\n        dave']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['expand_tabs']
                                 $param: #List[
                                    $expression: #StringExpr['hello\\n\\tdave']
                                 ]
                              ]
                              $expression: #StringExpr['tab']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['hello\\n        dave']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['expand_tabs']
                                 $param: #List[
                                    $expression: #StringExpr['hello\\n \\tdave']
                                 ]
                              ]
                              $expression: #StringExpr['1 space tab']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['hello\\n        dave']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['expand_tabs']
                                 $param: #List[
                                    $expression: #StringExpr['hello\\n  \\tdave']
                                 ]
                              ]
                              $expression: #StringExpr['2 space tab']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['hello\\n        dave']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['expand_tabs']
                                 $param: #List[
                                    $expression: #StringExpr['hello\\n   \\tdave']
                                 ]
                              ]
                              $expression: #StringExpr['3 space tab']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['hello\\n        dave']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['expand_tabs']
                                 $param: #List[
                                    $expression: #StringExpr['hello\\n    \\tdave']
                                 ]
                              ]
                              $expression: #StringExpr['4 space tab']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['hello\\n        dave']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['expand_tabs']
                                 $param: #List[
                                    $expression: #StringExpr['hello\\n     \\tdave']
                                 ]
                              ]
                              $expression: #StringExpr['5 space tab']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['hello\\n        dave']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['expand_tabs']
                                 $param: #List[
                                    $expression: #StringExpr['hello\\n      \\tdave']
                                 ]
                              ]
                              $expression: #StringExpr['6 space tab']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['hello\\n        dave']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['expand_tabs']
                                 $param: #List[
                                    $expression: #StringExpr['hello\\n       \\tdave']
                                 ]
                              ]
                              $expression: #StringExpr['7 space tab']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['hello\\n                dave']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['expand_tabs']
                                 $param: #List[
                                    $expression: #StringExpr['hello\\n         \\tdave']
                                 ]
                              ]
                              $expression: #StringExpr['8 space tab']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['.               .']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['expand_tabs']
                                 $param: #List[
                                    $expression: #StringExpr['.\\t\\t.']
                                 ]
                              ]
                              $expression: #StringExpr['dot tab tab dot']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['a       a']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['Timeout']
                                 $recv: #NameExpr['timeout']
                                 $param: #List[
                                    $expression: #IntExpr['1']
                                 ]
                                 $body: #Block[
                                    $body: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['expand_tabs']
                                       $param: #List[
                                          $expression: #StringExpr['\\ra\\ta']
                                       ]
                                    ]
                                 ]
                              ]
                              $expression: #StringExpr['carriage return']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_expand_tabs_encoding']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['inn']
                           $right: #StringExpr['hello\\ns\\tdave']
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['inn']
                           $recv: #NameExpr['force_encoding']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Encoding']
                                 $name: #NameExpr['BINARY']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['out']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['expand_tabs']
                              $param: #List[
                                 $expression: #NameExpr['inn']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['hello\\ns       dave']
                              $expression: #NameExpr['out']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Encoding']
                                 $name: #NameExpr['BINARY']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['out']
                                 $recv: #NameExpr['encoding']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_flush_left']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['text']
                           $right: #HereDocument['\n  we don\'t worry too much.\n\n  The comments associated with\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['\nwe don\'t worry too much.\n\nThe comments associated with\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['flush_left']
                                 $param: #List[
                                    $expression: #NameExpr['text']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_flush_left_encoding']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['text']
                           $right: #HereDocument['\n  we don\'t worry too much.\n\n  The comments associated with\n']
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['text']
                           $recv: #NameExpr['force_encoding']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Encoding']
                                 $name: #NameExpr['US_ASCII']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['\nwe don\'t worry too much.\n\nThe comments associated with\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['result']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['flush_left']
                              $param: #List[
                                 $expression: #NameExpr['text']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['result']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Encoding']
                                 $name: #NameExpr['US_ASCII']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['result']
                                 $recv: #NameExpr['encoding']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_markup_string']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['out']
                           $right: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['markup']
                                 $param: #List[
                                    $expression: #StringExpr['hi']
                                 ]
                              ]
                              $recv: #NameExpr['gsub']
                              $param: #List[
                                 $expression: #StringExpr['\\n']
                                 $expression: #StringExpr['']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>hi</p>']
                              $expression: #NameExpr['out']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_markup_comment']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['out']
                           $right: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['markup']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['comment']
                                       $param: #List[
                                          $expression: #StringExpr['hi']
                                       ]
                                    ]
                                 ]
                              ]
                              $recv: #NameExpr['gsub']
                              $param: #List[
                                 $expression: #StringExpr['\\n']
                                 $expression: #StringExpr['']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>hi</p>']
                              $expression: #NameExpr['out']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_normalize_comment_hash']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['text']
                           $right: #HereDocument['##\n# we don\'t worry too much.\n#\n# The comments associated with\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['we don\'t worry too much.\n\nThe comments associated with\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['normalize_comment']
                                 $param: #List[
                                    $expression: #NameExpr['text']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_normalize_comment_stars_single_space']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['text']
                           $right: #HereDocument['/*\n * we don\'t worry too much.\n *\n * The comments associated with\n */\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['we don\'t worry too much.\n\nThe comments associated with\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['normalize_comment']
                                 $param: #List[
                                    $expression: #NameExpr['text']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_normalize_comment_stars_single_double_space']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['text']
                           $right: #HereDocument['/*\n *  we don\'t worry too much.\n *\n *  The comments associated with\n */\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['we don\'t worry too much.\n\nThe comments associated with\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['normalize_comment']
                                 $param: #List[
                                    $expression: #NameExpr['text']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_kind_of']
                        $param: #List[
                           $expression: #Field[
                              $recv: #Field[
                                 $recv: #NameExpr['RDoc']
                                 $name: #NameExpr['Markup']
                              ]
                              $name: #NameExpr['Document']
                           ]
                           $expression: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['parse']
                              $param: #List[
                                 $expression: #StringExpr['hi']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_comment']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['RDoc']
                                    $name: #NameExpr['Markup']
                                 ]
                                 $name: #NameExpr['Document']
                              ]
                              $recv: #NameExpr['new']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['expected']
                              $name: #NameExpr['file']
                           ]
                           $right: #NameExpr['@top_level']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['c']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['comment']
                              $param: #List[
                                 $expression: #StringExpr['']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['parsed']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['parse']
                              $param: #List[
                                 $expression: #NameExpr['c']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['parsed']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_same']
                           $param: #List[
                              $expression: #NameExpr['parsed']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['parse']
                                 $param: #List[
                                    $expression: #NameExpr['c']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_document']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['RDoc']
                                    $name: #NameExpr['Markup']
                                 ]
                                 $name: #NameExpr['Document']
                              ]
                              $recv: #NameExpr['new']
                           ]
                           $expression: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['parse']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #Field[
                                          $recv: #NameExpr['RDoc']
                                          $name: #NameExpr['Markup']
                                       ]
                                       $name: #NameExpr['Document']
                                    ]
                                    $recv: #NameExpr['new']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_empty']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['RDoc']
                                    $name: #NameExpr['Markup']
                                 ]
                                 $name: #NameExpr['Document']
                              ]
                              $recv: #NameExpr['new']
                           ]
                           $expression: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['parse']
                              $param: #List[
                                 $expression: #StringExpr['']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_empty_newline']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['RDoc']
                                    $name: #NameExpr['Markup']
                                 ]
                                 $name: #NameExpr['Document']
                              ]
                              $recv: #NameExpr['new']
                           ]
                           $expression: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['parse']
                              $param: #List[
                                 $expression: #StringExpr['#\\n']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_format_markdown']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['@RM']
                                 $name: #NameExpr['Document']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['it _works_']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['parsed']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['parse']
                              $param: #List[
                                 $expression: #StringExpr['it *works*']
                                 $expression: #StringExpr['markdown']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['parsed']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_format_rd']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['@RM']
                                 $name: #NameExpr['Document']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['@RM']
                                       $name: #NameExpr['Paragraph']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['it <em>works</em>']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['parsed']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['parse']
                              $param: #List[
                                 $expression: #StringExpr['it ((*works*))']
                                 $expression: #StringExpr['rd']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['parsed']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_format_tomdoc']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['code']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['verb']
                              $param: #List[
                                 $expression: #StringExpr['1 + 1']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['code']
                              $name: #NameExpr['format']
                           ]
                           $right: #NameExpr['ruby']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['doc']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['para']
                                    $param: #List[
                                       $expression: #StringExpr['It does a thing']
                                    ]
                                 ]
                                 $expression: #NameExpr['blank_line']
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['head']
                                    $param: #List[
                                       $expression: #IntExpr['3']
                                       $expression: #StringExpr['Examples']
                                    ]
                                 ]
                                 $expression: #NameExpr['blank_line']
                                 $expression: #NameExpr['code']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['text']
                           $right: #HereDocument['It does a thing\n\nExamples\n\n  1 + 1\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['parsed']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['parse']
                              $param: #List[
                                 $expression: #NameExpr['text']
                                 $expression: #StringExpr['tomdoc']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['parsed']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_parse_newline']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['RDoc']
                                    $name: #NameExpr['Markup']
                                 ]
                                 $name: #NameExpr['Document']
                              ]
                              $recv: #NameExpr['new']
                           ]
                           $expression: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['parse']
                              $param: #List[
                                 $expression: #StringExpr['\\n']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_snippet']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['text']
                           $right: #HereDocument['This is one-hundred characters or more of text in a single paragraph.  This\nparagraph will be cut off some point after the one-hundredth character.\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['<p>This is one-hundred characters or more of text in a single paragraph.  This\nparagraph will be cut off …\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['snippet']
                                 $param: #List[
                                    $expression: #NameExpr['text']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_snippet_comment']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['c']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['comment']
                              $param: #List[
                                 $expression: #StringExpr['This is a comment']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<p>This is a comment\\n']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['snippet']
                                 $param: #List[
                                    $expression: #NameExpr['c']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_snippet_short']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['text']
                           $right: #StringExpr['This is a comment']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr[
                                 $inner: #NameExpr['text']
                              ]
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['snippet']
                                 $param: #List[
                                    $expression: #NameExpr['text']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_strip_hashes']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['text']
                           $right: #HereDocument['##\n# we don\'t worry too much.\n#\n# The comments associated with\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['\n  we don\'t worry too much.\n\n  The comments associated with\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['strip_hashes']
                                 $param: #List[
                                    $expression: #NameExpr['text']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_strip_hashes_encoding']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['text']
                           $right: #HereDocument['##\n# we don\'t worry too much.\n#\n# The comments associated with\n']
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['text']
                           $recv: #NameExpr['force_encoding']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Encoding']
                                 $name: #NameExpr['CP852']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['\n  we don\'t worry too much.\n\n  The comments associated with\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['stripped']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['strip_hashes']
                              $param: #List[
                                 $expression: #NameExpr['text']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['stripped']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Encoding']
                                 $name: #NameExpr['CP852']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['stripped']
                                 $recv: #NameExpr['encoding']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_strip_newlines']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr[' ']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['strip_newlines']
                                 $param: #List[
                                    $expression: #StringExpr['\\n \\n']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['hi']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['strip_newlines']
                                 $param: #List[
                                    $expression: #StringExpr['\\n\\nhi']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['hi']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['strip_newlines']
                                 $param: #List[
                                    $expression: #StringExpr['hi\\n\\n']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['hi']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['strip_newlines']
                                 $param: #List[
                                    $expression: #StringExpr['\\n\\nhi\\n\\n']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_strip_newlines_encoding']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Encoding']
                                 $name: #NameExpr['UTF_8']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #StringExpr['']
                                 $recv: #NameExpr['encoding']
                              ]
                              $expression: #StringExpr['Encoding sanity check']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['text']
                           $right: #StringExpr[' \\n']
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['text']
                           $recv: #NameExpr['force_encoding']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Encoding']
                                 $name: #NameExpr['US_ASCII']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['stripped']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['strip_newlines']
                              $param: #List[
                                 $expression: #NameExpr['text']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr[' ']
                              $expression: #NameExpr['stripped']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Encoding']
                                 $name: #NameExpr['US_ASCII']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['stripped']
                                 $recv: #NameExpr['encoding']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_strip_stars']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['text']
                           $right: #HereDocument['/*\n * * we don\'t worry too much.\n *\n * The comments associated with\n */\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['\n   * we don\'t worry too much.\n\n   The comments associated with\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['strip_stars']
                                 $param: #List[
                                    $expression: #NameExpr['text']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_strip_stars_document_method']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['text']
                           $right: #HereDocument['/*\n * Document-method: Zlib::GzipFile#mtime=\n *\n * A comment\n */\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['\n   A comment\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['strip_stars']
                                 $param: #List[
                                    $expression: #NameExpr['text']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_strip_stars_encoding']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['text']
                           $right: #HereDocument['/*\n * * we don\'t worry too much.\n *\n * The comments associated with\n */\n']
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['text']
                           $recv: #NameExpr['force_encoding']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Encoding']
                                 $name: #NameExpr['CP852']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['\n   * we don\'t worry too much.\n\n   The comments associated with\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['result']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['strip_stars']
                              $param: #List[
                                 $expression: #NameExpr['text']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['result']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Encoding']
                                 $name: #NameExpr['CP852']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['result']
                                 $recv: #NameExpr['encoding']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_strip_stars_encoding2']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['text']
                           $right: #HereDocument['/*\n * * we don\'t worry too much.\n *\n * The comments associated with\n */\n']
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['text']
                           $recv: #NameExpr['force_encoding']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Encoding']
                                 $name: #NameExpr['BINARY']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['\n   * we don\'t worry too much.\n\n   The comments associated with\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['result']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['strip_stars']
                              $param: #List[
                                 $expression: #NameExpr['text']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['result']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Encoding']
                                 $name: #NameExpr['BINARY']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['result']
                                 $recv: #NameExpr['encoding']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_strip_stars_no_stars']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['text']
                           $right: #HereDocument['* we don\'t worry too much.\n\nThe comments associated with\n\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['* we don\'t worry too much.\n\nThe comments associated with\n\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['strip_stars']
                                 $param: #List[
                                    $expression: #NameExpr['text']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_html_apostrophe']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['‘a']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['\'a']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['a’']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['a\'']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['‘a’ ‘']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['\'a\' \'']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_html_backslash']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #StringExpr['S']
                           $expression: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['to_html']
                              $param: #List[
                                 $expression: #StringExpr['\\\\S']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_html_br']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #StringExpr['<br>']
                           $expression: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['to_html']
                              $param: #List[
                                 $expression: #StringExpr['<br>']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_html_copyright']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #StringExpr['©']
                           $expression: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['to_html']
                              $param: #List[
                                 $expression: #StringExpr['(c)']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_html_dash']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['-']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['-']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['–']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['--']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['—']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['---']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['—-']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['----']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_html_double_backtick']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['“a']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['``a']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['“a“']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['``a``']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_html_double_quote']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['“a']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['"a']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['“a”']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['"a"']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_html_double_quote_quot']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['“a']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['&quot;a']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['“a”']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['&quot;a&quot;']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_html_double_tick']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['”a']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['\'\'a']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['”a”']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['\'\'a\'\'']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_html_ellipsis']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['..']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['..']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['…']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['...']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['.…']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['....']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_html_encoding']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['s']
                           $right: #ApplyExpr[
                              $base: #StringExpr['...(c)']
                              $recv: #NameExpr['encode']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Encoding']
                                    $name: #NameExpr['Shift_JIS']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['html']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['to_html']
                              $param: #List[
                                 $expression: #NameExpr['s']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Encoding']
                                 $name: #NameExpr['Shift_JIS']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['html']
                                 $recv: #NameExpr['encoding']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #ApplyExpr[
                              $base: #StringExpr['…(c)']
                              $recv: #NameExpr['encode']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Encoding']
                                    $name: #NameExpr['Shift_JIS']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['html']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_html_html_tag']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #StringExpr['<a href="http://example">hi’s</a>']
                           $expression: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['to_html']
                              $param: #List[
                                 $expression: #StringExpr['<a href="http://example">hi\\\'s</a>']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_html_registered_trademark']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #StringExpr['®']
                           $expression: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['to_html']
                              $param: #List[
                                 $expression: #StringExpr['(r)']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_html_tt_tag']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<tt>hi\\\'s</tt>']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['<tt>hi\\\'s</tt>']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['<tt>hi\\\\\\\'s</tt>']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['to_html']
                                 $param: #List[
                                    $expression: #StringExpr['<tt>hi\\\\\\\\\\\'s</tt>']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_html_tt_tag_mismatch']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #MultipleAssign[
                           $left: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['_']
                              $item: #NameExpr['err']
                           ]
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['verbose_capture_io']
                              $body: #Block[
                                 $body: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #StringExpr['<tt>hi']
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['to_html']
                                          $param: #List[
                                             $expression: #StringExpr['<tt>hi']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['mismatched <tt> tag\\n']
                              $expression: #NameExpr['err']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['formatter']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $base: #Field[
                           $recv: #Field[
                              $recv: #NameExpr['RDoc']
                              $name: #NameExpr['Markup']
                           ]
                           $name: #NameExpr['ToHtml']
                        ]
                        $recv: #NameExpr['new']
                        $param: #List[
                           $expression: #NameExpr['@options']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['options']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #NameExpr['@options']
                  ]
               ]
            ]
         ]
      ]
   ]
   #Comsumed['comsumed']
]
