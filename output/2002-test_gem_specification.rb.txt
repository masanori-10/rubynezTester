#Source[
   #List[
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['benchmark']
         ]
      ]
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['rubygems/test_case']
         ]
      ]
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['pathname']
         ]
      ]
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['stringio']
         ]
      ]
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['rubygems/ext']
         ]
      ]
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['rubygems/specification']
         ]
      ]
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['rubygems/installer']
         ]
      ]
      $statement: #Class[
         $name: #NameExpr['TestGemSpecification']
         $super: #Field[
            $recv: #NameExpr['Gem']
            $name: #NameExpr['TestCase']
         ]
         $body: #BlockExpr[
            $main: #List[
               $statement: #AssignExpr[
                  $left: #NameExpr['LEGACY_YAML_SPEC']
                  $right: #HereDocument['--- !ruby/object:Gem::Specification\nrubygems_version: "1.0"\nname: keyedlist\nversion: !ruby/object:Gem::Version\n  version: 0.4.0\ndate: 2004-03-28 15:37:49.828000 +02:00\nplatform:\nsummary: A Hash which automatically computes keys.\nrequire_paths:\n  - lib\nfiles:\n  - lib/keyedlist.rb\nautorequire: keyedlist\nauthor: Florian Gross\nemail: flgr@ccan.de\nhas_rdoc: true\n']
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['LEGACY_RUBY_SPEC']
                  $right: #HereDocument['Gem::Specification.new do |s|\n  s.name = %q{keyedlist}\n  s.version = %q{0.4.0}\n  s.has_rdoc = true\n  s.summary = %q{A Hash which automatically computes keys.}\n  s.files = [%q{lib/keyedlist.rb}]\n  s.require_paths = [%q{lib}]\n  s.autorequire = %q{keyedlist}\n  s.author = %q{Florian Gross}\n  s.email = %q{flgr@ccan.de}\nend\n']
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['make_spec_c1']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@c1']
                        $right: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['util_spec']
                           $param: #List[
                              $expression: #StringExpr['a']
                              $expression: #StringExpr['1']
                           ]
                           $body: #Block[
                              $param: #NameExpr['s']
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['s']
                                       $name: #NameExpr['executable']
                                    ]
                                    $right: #StringExpr['exec']
                                 ]
                                 $statement: #LShiftExpr[
                                    $left: #ApplyExpr[
                                       $recv: #NameExpr['s']
                                       $recv: #NameExpr['extensions']
                                    ]
                                    $right: #StringExpr['ext/a/extconf.rb']
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['s']
                                       $name: #NameExpr['test_file']
                                    ]
                                    $right: #StringExpr['test/suite.rb']
                                 ]
                                 $statement: #LShiftExpr[
                                    $left: #ApplyExpr[
                                       $recv: #NameExpr['s']
                                       $recv: #NameExpr['requirements']
                                    ]
                                    $right: #StringExpr['A working computer']
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['s']
                                       $name: #NameExpr['rubyforge_project']
                                    ]
                                    $right: #StringExpr['example']
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['s']
                                       $name: #NameExpr['license']
                                    ]
                                    $right: #StringExpr['MIT']
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['s']
                                    $recv: #NameExpr['add_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['rake']
                                       $expression: #StringExpr['> 0.4']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['s']
                                    $recv: #NameExpr['add_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['jabber4r']
                                       $expression: #StringExpr['> 0.0.0']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['s']
                                    $recv: #NameExpr['add_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['pqa']
                                       $expression: #Array[
                                          $index: #List[
                                             $expression: #StringExpr['> 0.4']
                                             $expression: #StringExpr['<= 0.6']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $recv: #NameExpr['s']
                                    $recv: #NameExpr['mark_version']
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['s']
                                       $name: #NameExpr['files']
                                    ]
                                    $right: #ParcentNotation['%w[lib/code.rb]']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['ext_spec']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@ext']
                        $right: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['util_spec']
                           $param: #List[
                              $expression: #StringExpr['ext']
                              $expression: #StringExpr['1']
                           ]
                           $body: #Block[
                              $param: #NameExpr['s']
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['s']
                                       $name: #NameExpr['executable']
                                    ]
                                    $right: #StringExpr['exec']
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['s']
                                       $name: #NameExpr['test_file']
                                    ]
                                    $right: #StringExpr['test/suite.rb']
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['s']
                                       $name: #NameExpr['extensions']
                                    ]
                                    $right: #ParcentNotation['%w[ext/extconf.rb]']
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['s']
                                       $name: #NameExpr['license']
                                    ]
                                    $right: #StringExpr['MIT']
                                 ]
                                 $statement: #ApplyExpr[
                                    $recv: #NameExpr['s']
                                    $recv: #NameExpr['mark_version']
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['s']
                                       $name: #NameExpr['files']
                                    ]
                                    $right: #ParcentNotation['%w[lib/code.rb]']
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['s']
                                       $name: #NameExpr['installed_by_version']
                                    ]
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['v']
                                       $param: #List[
                                          $expression: #StringExpr['2.2']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['setup']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #Super['super']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@a1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['1']
                              ]
                              $body: #Block[
                                 $param: #NameExpr['s']
                                 $body: #List[
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['executable']
                                       ]
                                       $right: #StringExpr['exec']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['test_file']
                                       ]
                                       $right: #StringExpr['test/suite.rb']
                                    ]
                                    $statement: #LShiftExpr[
                                       $left: #ApplyExpr[
                                          $recv: #NameExpr['s']
                                          $recv: #NameExpr['requirements']
                                       ]
                                       $right: #StringExpr['A working computer']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['rubyforge_project']
                                       ]
                                       $right: #StringExpr['example']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['license']
                                       ]
                                       $right: #StringExpr['MIT']
                                    ]
                                    $statement: #ApplyExpr[
                                       $recv: #NameExpr['s']
                                       $recv: #NameExpr['mark_version']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['files']
                                       ]
                                       $right: #ParcentNotation['%w[lib/code.rb]']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@a2']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['2']
                              ]
                              $body: #Block[
                                 $param: #NameExpr['s']
                                 $body: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['s']
                                       $name: #NameExpr['files']
                                    ]
                                    $right: #ParcentNotation['%w[lib/code.rb]']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@a3']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['3']
                              ]
                              $body: #Block[
                                 $param: #NameExpr['s']
                                 $body: #AssignExpr[
                                    $left: #Indexer[
                                       $base: #ApplyExpr[
                                          $recv: #NameExpr['s']
                                          $recv: #NameExpr['metadata']
                                       ]
                                       $index: #List[
                                          $expression: #StringExpr['allowed_push_host']
                                       ]
                                    ]
                                    $right: #StringExpr['https://privategemserver.com']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@current_version']
                           $right: #Field[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $name: #NameExpr['CURRENT_SPECIFICATION_VERSION']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['load']
                           $param: #List[
                              $expression: #StringExpr['rubygems/syck_hack.rb']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_find_active_stub_by_path']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['1']
                                 $expression: #Nil['nil']
                                 $expression: #StringExpr['lib/foo.rb']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['spec']
                              $name: #NameExpr['activated']
                           ]
                           $right: #TrueExpr['true']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $name: #NameExpr['all']
                           ]
                           $right: #Array[
                              $index: #List[
                                 $expression: #NameExpr['spec']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #Field[
                              $recv: #NameExpr['Gem']
                              $name: #NameExpr['Specification']
                           ]
                           $recv: #NameExpr['find_active_stub_by_path']
                           $param: #List[
                              $expression: #StringExpr['foo']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['foo']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['foo']
                                 $expression: #StringExpr['1']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_activate']
                           $param: #List[
                              $expression: #ParcentNotation['%w[foo-1]']
                              $expression: #NameExpr['foo']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_ambiguous_direct']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['save_loaded_features']
                        $body: #Block[
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['a1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['b']
                                          $value: #StringExpr['> 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['1']
                                       $expression: #List[
                                          $hash: #Hash[
                                             $key: #StringExpr['c']
                                             $value: #StringExpr['>= 1']
                                          ]
                                       ]
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['2']
                                       $expression: #List[
                                          $hash: #Hash[
                                             $key: #StringExpr['c']
                                             $value: #StringExpr['>= 2']
                                          ]
                                       ]
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['1']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['2']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['reset']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['install_specs']
                                 $param: #List[
                                    $expression: #NameExpr['c1']
                                    $expression: #NameExpr['c2']
                                    $expression: #NameExpr['b1']
                                    $expression: #NameExpr['b2']
                                    $expression: #NameExpr['a1']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['a1']
                                 $recv: #NameExpr['activate']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(a-1)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #Array[
                                       $index: #List[
                                          $expression: #StringExpr['b (> 0)']
                                       ]
                                    ]
                                    $expression: #NameExpr['unresolved_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['d']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(a-1 b-2 c-2)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #Array['[]']
                                    $expression: #NameExpr['unresolved_names']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_find_in_unresolved_tree_is_not_exponentiental']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['save_loaded_features']
                        $body: #Block[
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['num_of_pkg']
                                 $right: #IntExpr['7']
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['num_of_version_per_pkg']
                                 $right: #IntExpr['3']
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['packages']
                                 $right: #ApplyExpr[
                                    $recv: #ClosedRange[
                                       #IntExpr['0']
                                       #NameExpr['num_of_pkg']
                                    ]
                                    $recv: #NameExpr['map']
                                    $body: #Block[
                                       $param: #NameExpr['pkgi']
                                       $body: #ApplyExpr[
                                          $recv: #ClosedRange[
                                             #IntExpr['0']
                                             #NameExpr['num_of_version_per_pkg']
                                          ]
                                          $recv: #NameExpr['map']
                                          $body: #Block[
                                             $param: #NameExpr['pkg_version']
                                             $body: #List[
                                                $statement: #AssignExpr[
                                                   $left: #NameExpr['deps']
                                                   $right: #Indexer[
                                                      $recv: #NameExpr['Hash']
                                                      $index: #List[
                                                         $expression: #ApplyExpr[
                                                            $recv: #ClosedRange[
                                                               #AddExpr[
                                                                  $left: #NameExpr['pkgi']
                                                                  $right: #IntExpr['1']
                                                               ]
                                                               #NameExpr['num_of_pkg']
                                                            ]
                                                            $recv: #NameExpr['map']
                                                            $body: #Block[
                                                               $param: #NameExpr['deppkgi']
                                                               $body: #Array[
                                                                  $index: #List[
                                                                     $expression: #StringExpr[
                                                                        $inner: #NameExpr['deppkgi']
                                                                     ]
                                                                     $expression: #StringExpr['>= 0']
                                                                  ]
                                                               ]
                                                            ]
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                                $statement: #ApplyExpr[
                                                   #Self['self']
                                                   $recv: #NameExpr['new_spec']
                                                   $param: #List[
                                                      $expression: #StringExpr[
                                                         $inner: #NameExpr['pkgi']
                                                      ]
                                                      $expression: #ApplyExpr[
                                                         $recv: #NameExpr['pkg_version']
                                                         $recv: #NameExpr['to_s']
                                                      ]
                                                      $expression: #NameExpr['deps']
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['base']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['pkg_base']
                                       $expression: #StringExpr['1']
                                       $expression: #List[
                                          $hash: #Hash[
                                             $key: #StringExpr['pkg0']
                                             $value: #StringExpr['>= 0']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['reset']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['install_specs']
                                 $param: #List[
                                    $variadic: #Variadic[
                                       $base: #ApplyExpr[
                                          $recv: #ApplyExpr[
                                             $recv: #NameExpr['packages']
                                             $recv: #NameExpr['flatten']
                                          ]
                                          $recv: #NameExpr['reverse']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['install_specs']
                                 $param: #List[
                                    $expression: #NameExpr['base']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['base']
                                 $recv: #NameExpr['activate']
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['tms']
                                 $right: #ApplyExpr[
                                    $recv: #NameExpr['Benchmark']
                                    $recv: #NameExpr['measure']
                                    $body: #Block[
                                       $body: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['assert_raises']
                                          $param: #List[
                                             $expression: #NameExpr['LoadError']
                                          ]
                                          $body: #Block[
                                             $body: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['require']
                                                $param: #List[
                                                   $expression: #StringExpr['no_such_file_foo']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_operator']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['tms']
                                       $recv: #NameExpr['total']
                                    ]
                                    $expression: #NameExpr['<=']
                                    $expression: #IntExpr['10']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_ambiguous_indirect']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['save_loaded_features']
                        $body: #Block[
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['a1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['b']
                                          $value: #StringExpr['> 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['c']
                                          $value: #StringExpr['>= 1']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['2']
                                       $hash: #Hash[
                                          $key: #StringExpr['c']
                                          $value: #StringExpr['>= 2']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['1']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['2']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['install_specs']
                                 $param: #List[
                                    $expression: #NameExpr['c1']
                                    $expression: #NameExpr['c2']
                                    $expression: #NameExpr['b1']
                                    $expression: #NameExpr['b2']
                                    $expression: #NameExpr['a1']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['a1']
                                 $recv: #NameExpr['activate']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(a-1)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #Array[
                                       $index: #List[
                                          $expression: #StringExpr['b (> 0)']
                                       ]
                                    ]
                                    $expression: #NameExpr['unresolved_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['d']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(a-1 b-2 c-2)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #Array['[]']
                                    $expression: #NameExpr['unresolved_names']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_ambiguous_indirect_conflict']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['save_loaded_features']
                        $body: #Block[
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['a1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['b']
                                          $value: #StringExpr['> 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['a2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #StringExpr['2']
                                       $hash: #Hash[
                                          $key: #StringExpr['b']
                                          $value: #StringExpr['> 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['c']
                                          $value: #StringExpr['>= 1']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['2']
                                       $hash: #Hash[
                                          $key: #StringExpr['c']
                                          $value: #StringExpr['>= 2']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['1']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['2']
                                       $expression: #List[
                                          $hash: #Hash[
                                             $key: #StringExpr['a']
                                             $value: #StringExpr['1']
                                          ]
                                       ]
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['install_specs']
                                 $param: #List[
                                    $expression: #NameExpr['c1']
                                    $expression: #NameExpr['b1']
                                    $expression: #NameExpr['a1']
                                    $expression: #NameExpr['a2']
                                    $expression: #NameExpr['c2']
                                    $expression: #NameExpr['b2']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['a2']
                                 $recv: #NameExpr['activate']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(a-2)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #Array[
                                       $index: #List[
                                          $expression: #StringExpr['b (> 0)']
                                       ]
                                    ]
                                    $expression: #NameExpr['unresolved_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['d']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(a-2 b-1 c-1)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #Array['[]']
                                    $expression: #NameExpr['unresolved_names']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_ambiguous_unrelated']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['save_loaded_features']
                        $body: #Block[
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['a1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['b']
                                          $value: #StringExpr['> 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['c']
                                          $value: #StringExpr['>= 1']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['2']
                                       $hash: #Hash[
                                          $key: #StringExpr['c']
                                          $value: #StringExpr['>= 2']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['1']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['2']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['d1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['d']
                                       $expression: #StringExpr['1']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['install_specs']
                                 $param: #List[
                                    $expression: #NameExpr['d1']
                                    $expression: #NameExpr['c1']
                                    $expression: #NameExpr['c2']
                                    $expression: #NameExpr['b1']
                                    $expression: #NameExpr['b2']
                                    $expression: #NameExpr['a1']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['a1']
                                 $recv: #NameExpr['activate']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(a-1)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #Array[
                                       $index: #List[
                                          $expression: #StringExpr['b (> 0)']
                                       ]
                                    ]
                                    $expression: #NameExpr['unresolved_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['d']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(a-1 d-1)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #Array[
                                       $index: #List[
                                          $expression: #StringExpr['b (> 0)']
                                       ]
                                    ]
                                    $expression: #NameExpr['unresolved_names']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_require_should_prefer_latest_gem_level1']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['save_loaded_features']
                        $body: #Block[
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['a1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['b']
                                          $value: #StringExpr['> 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['c']
                                          $value: #StringExpr['>= 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['2']
                                       $hash: #Hash[
                                          $key: #StringExpr['c']
                                          $value: #StringExpr['>= 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['1']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/c.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['2']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/c.rb']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['install_specs']
                                 $param: #List[
                                    $expression: #NameExpr['c1']
                                    $expression: #NameExpr['c2']
                                    $expression: #NameExpr['b1']
                                    $expression: #NameExpr['b2']
                                    $expression: #NameExpr['a1']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['a1']
                                 $recv: #NameExpr['activate']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['c']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(a-1 b-2 c-2)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_require_should_prefer_latest_gem_level2']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['save_loaded_features']
                        $body: #Block[
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['a1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['b']
                                          $value: #StringExpr['> 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['c']
                                          $value: #StringExpr['>= 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['2']
                                       $hash: #Hash[
                                          $key: #StringExpr['c']
                                          $value: #StringExpr['>= 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['d']
                                          $value: #StringExpr['>= 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['2']
                                       $hash: #Hash[
                                          $key: #StringExpr['d']
                                          $value: #StringExpr['>= 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['d1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['d']
                                       $expression: #StringExpr['1']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['d2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['d']
                                       $expression: #StringExpr['2']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['install_specs']
                                 $param: #List[
                                    $expression: #NameExpr['d1']
                                    $expression: #NameExpr['d2']
                                    $expression: #NameExpr['c1']
                                    $expression: #NameExpr['c2']
                                    $expression: #NameExpr['b1']
                                    $expression: #NameExpr['b2']
                                    $expression: #NameExpr['a1']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['a1']
                                 $recv: #NameExpr['activate']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['d']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(a-1 b-2 c-2 d-2)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_require_finds_in_2nd_level_indirect']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['save_loaded_features']
                        $body: #Block[
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['a1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['b']
                                          $value: #StringExpr['> 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['c']
                                          $value: #StringExpr['>= 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['2']
                                       $hash: #Hash[
                                          $key: #StringExpr['c']
                                          $value: #StringExpr['>= 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['d']
                                          $value: #StringExpr['<= 2']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['2']
                                       $hash: #Hash[
                                          $key: #StringExpr['d']
                                          $value: #StringExpr['<= 2']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['d1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['d']
                                       $expression: #StringExpr['1']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['d2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['d']
                                       $expression: #StringExpr['2']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['d3']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['d']
                                       $expression: #StringExpr['3']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['install_specs']
                                 $param: #List[
                                    $expression: #NameExpr['d1']
                                    $expression: #NameExpr['d2']
                                    $expression: #NameExpr['d3']
                                    $expression: #NameExpr['c1']
                                    $expression: #NameExpr['c2']
                                    $expression: #NameExpr['b1']
                                    $expression: #NameExpr['b2']
                                    $expression: #NameExpr['a1']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['a1']
                                 $recv: #NameExpr['activate']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['d']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(a-1 b-2 c-2 d-2)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_require_should_prefer_reachable_gems']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['save_loaded_features']
                        $body: #Block[
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['a1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['b']
                                          $value: #StringExpr['> 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['c']
                                          $value: #StringExpr['>= 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['2']
                                       $hash: #Hash[
                                          $key: #StringExpr['c']
                                          $value: #StringExpr['>= 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['d']
                                          $value: #StringExpr['<= 2']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['2']
                                       $hash: #Hash[
                                          $key: #StringExpr['d']
                                          $value: #StringExpr['<= 2']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['d1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['d']
                                       $expression: #StringExpr['1']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['d2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['d']
                                       $expression: #StringExpr['2']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['d3']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['d']
                                       $expression: #StringExpr['3']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['e']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['anti_d']
                                       $expression: #StringExpr['1']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['install_specs']
                                 $param: #List[
                                    $expression: #NameExpr['d1']
                                    $expression: #NameExpr['d2']
                                    $expression: #NameExpr['d3']
                                    $expression: #NameExpr['e']
                                    $expression: #NameExpr['c1']
                                    $expression: #NameExpr['c2']
                                    $expression: #NameExpr['b1']
                                    $expression: #NameExpr['b2']
                                    $expression: #NameExpr['a1']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['a1']
                                 $recv: #NameExpr['activate']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['d']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(a-1 b-2 c-2 d-2)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_require_should_not_conflict']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['save_loaded_features']
                        $body: #Block[
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['base']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['0']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['A']
                                          $value: #StringExpr['>= 1']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['a1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['A']
                                       $expression: #StringExpr['1']
                                       $expression: #List[
                                          $hash: #Hash[
                                             $key: #StringExpr['c']
                                             $value: #StringExpr['>= 2']
                                          ]
                                          $hash: #Hash[
                                             $key: #StringExpr['b']
                                             $value: #StringExpr['> 0']
                                          ]
                                       ]
                                       $expression: #StringExpr['lib/a.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['a2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['A']
                                       $expression: #StringExpr['2']
                                       $expression: #List[
                                          $hash: #Hash[
                                             $key: #StringExpr['c']
                                             $value: #StringExpr['>= 2']
                                          ]
                                          $hash: #Hash[
                                             $key: #StringExpr['b']
                                             $value: #StringExpr['> 0']
                                          ]
                                       ]
                                       $expression: #StringExpr['lib/a.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['1']
                                       $expression: #List[
                                          $hash: #Hash[
                                             $key: #StringExpr['c']
                                             $value: #StringExpr['= 1']
                                          ]
                                       ]
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['2']
                                       $expression: #List[
                                          $hash: #Hash[
                                             $key: #StringExpr['c']
                                             $value: #StringExpr['= 2']
                                          ]
                                       ]
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['1']
                                       $expression: #List['{}']
                                       $expression: #StringExpr['lib/c.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['2']
                                       $expression: #List['{}']
                                       $expression: #StringExpr['lib/c.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c3']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['3']
                                       $expression: #List['{}']
                                       $expression: #StringExpr['lib/c.rb']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['install_specs']
                                 $param: #List[
                                    $expression: #NameExpr['c1']
                                    $expression: #NameExpr['c2']
                                    $expression: #NameExpr['c3']
                                    $expression: #NameExpr['b1']
                                    $expression: #NameExpr['b2']
                                    $expression: #NameExpr['a1']
                                    $expression: #NameExpr['a2']
                                    $expression: #NameExpr['base']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['base']
                                 $recv: #NameExpr['activate']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(0-1)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #Array[
                                       $index: #List[
                                          $expression: #StringExpr['A (>= 1)']
                                       ]
                                    ]
                                    $expression: #NameExpr['unresolved_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['d']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(0-1 A-2 b-2 c-2)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #Array['[]']
                                    $expression: #NameExpr['unresolved_names']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_inner_clonflict_in_indirect_gems']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['save_loaded_features']
                        $body: #Block[
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['a1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['b']
                                          $value: #StringExpr['> 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['c']
                                          $value: #StringExpr['>= 1']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['2']
                                       $hash: #Hash[
                                          $key: #StringExpr['c']
                                          $value: #StringExpr['>= 1']
                                       ]
                                       $hash: #Hash[
                                          $key: #StringExpr['d']
                                          $value: #StringExpr['< 3']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['d']
                                          $value: #StringExpr['<= 2']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['2']
                                       $hash: #Hash[
                                          $key: #StringExpr['d']
                                          $value: #StringExpr['<= 2']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c3']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['3']
                                       $hash: #Hash[
                                          $key: #StringExpr['d']
                                          $value: #StringExpr['<= 3']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['d1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['d']
                                       $expression: #StringExpr['1']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['d2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['d']
                                       $expression: #StringExpr['2']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['d3']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['d']
                                       $expression: #StringExpr['3']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['install_specs']
                                 $param: #List[
                                    $expression: #NameExpr['d1']
                                    $expression: #NameExpr['d2']
                                    $expression: #NameExpr['d3']
                                    $expression: #NameExpr['c1']
                                    $expression: #NameExpr['c2']
                                    $expression: #NameExpr['c3']
                                    $expression: #NameExpr['b1']
                                    $expression: #NameExpr['b2']
                                    $expression: #NameExpr['a1']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['a1']
                                 $recv: #NameExpr['activate']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['d']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_includes']
                                 $param: #List[
                                    $expression: #Array[
                                       $index: #List[
                                          $expression: #ParcentNotation['%w(a-1 b-2 c-3 d-2)']
                                          $expression: #ParcentNotation['%w(a-1 b-2 d-2)']
                                       ]
                                    ]
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_inner_clonflict_in_indirect_gems_reversed']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['save_loaded_features']
                        $body: #Block[
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['a1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['b']
                                          $value: #StringExpr['> 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['xc']
                                          $value: #StringExpr['>= 1']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['2']
                                       $hash: #Hash[
                                          $key: #StringExpr['xc']
                                          $value: #StringExpr['>= 1']
                                       ]
                                       $hash: #Hash[
                                          $key: #StringExpr['d']
                                          $value: #StringExpr['< 3']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['xc']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['d']
                                          $value: #StringExpr['<= 3']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['xc']
                                       $expression: #StringExpr['2']
                                       $hash: #Hash[
                                          $key: #StringExpr['d']
                                          $value: #StringExpr['<= 2']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c3']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['xc']
                                       $expression: #StringExpr['3']
                                       $hash: #Hash[
                                          $key: #StringExpr['d']
                                          $value: #StringExpr['<= 3']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['d1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['d']
                                       $expression: #StringExpr['1']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['d2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['d']
                                       $expression: #StringExpr['2']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['d3']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['d']
                                       $expression: #StringExpr['3']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['install_specs']
                                 $param: #List[
                                    $expression: #NameExpr['d1']
                                    $expression: #NameExpr['d2']
                                    $expression: #NameExpr['d3']
                                    $expression: #NameExpr['c1']
                                    $expression: #NameExpr['c2']
                                    $expression: #NameExpr['c3']
                                    $expression: #NameExpr['b1']
                                    $expression: #NameExpr['b2']
                                    $expression: #NameExpr['a1']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['a1']
                                 $recv: #NameExpr['activate']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['d']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_includes']
                                 $param: #List[
                                    $expression: #Array[
                                       $index: #List[
                                          $expression: #ParcentNotation['%w(a-1 b-2 d-2 xc-3)']
                                          $expression: #ParcentNotation['%w(a-1 b-2 d-2)']
                                       ]
                                    ]
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_checks_dependencies']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['a']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['1.0']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['a']
                           $recv: #NameExpr['add_dependency']
                           $param: #List[
                              $expression: #StringExpr['c']
                              $expression: #StringExpr['= 1.0']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['a']
                           $recv: #NameExpr['add_dependency']
                           $param: #List[
                              $expression: #StringExpr['b']
                              $expression: #StringExpr['~> 1.0']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['b1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['b']
                                 $expression: #StringExpr['1.0']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['b2']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['b']
                                 $expression: #StringExpr['2.0']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['c']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['c']
                                 $expression: #StringExpr['1.0']
                                 $hash: #Hash[
                                    $key: #StringExpr['b']
                                    $value: #StringExpr['= 2.0']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $expression: #NameExpr['b1']
                              $expression: #NameExpr['b2']
                              $expression: #NameExpr['c']
                              $expression: #NameExpr['a']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['e']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['assert_raises']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['LoadError']
                                 ]
                              ]
                              $body: #Block[
                                 $body: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_activate']
                                    $param: #List[
                                       $expression: #Nil['nil']
                                       $expression: #NameExpr['a']
                                       $expression: #NameExpr['c']
                                       $expression: #StringExpr['b']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #StringExpr['can\'t satisfy \'b (~> 1.0)\', already activated \'b-2.0\'']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['e']
                                 $recv: #NameExpr['message']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_divergent']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['a']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['1.0']
                                 $hash: #Hash[
                                    $key: #StringExpr['b']
                                    $value: #StringExpr['~> 1.0']
                                 ]
                                 $hash: #Hash[
                                    $key: #StringExpr['c']
                                    $value: #StringExpr['= 1.0']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['b1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['b']
                                 $expression: #StringExpr['1.0']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['b2']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['b']
                                 $expression: #StringExpr['2.0']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['c']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['c']
                                 $expression: #StringExpr['1.0']
                                 $hash: #Hash[
                                    $key: #StringExpr['b']
                                    $value: #StringExpr['= 2.0']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $expression: #NameExpr['b1']
                              $expression: #NameExpr['b2']
                              $expression: #NameExpr['c']
                              $expression: #NameExpr['a']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['e']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['assert_raises']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['ConflictError']
                                 ]
                              ]
                              $body: #Block[
                                 $body: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_activate']
                                    $param: #List[
                                       $expression: #Nil['nil']
                                       $expression: #NameExpr['a']
                                       $expression: #NameExpr['c']
                                       $expression: #StringExpr['b']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_match']
                           $param: #List[
                              $expression: #Regex['/Unable to activate c-1.0,/']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['e']
                                 $recv: #NameExpr['message']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_match']
                           $param: #List[
                              $expression: #Regex['/because b-1.0 conflicts with b .= 2.0/']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['e']
                                 $recv: #NameExpr['message']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_old_required']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #MultipleAssign[
                           $left: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['e1']
                           ]
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['e']
                                 $expression: #StringExpr['1']
                                 $hash: #Hash[
                                    $key: #StringExpr['d']
                                    $value: #StringExpr['= 1']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@d1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['d']
                                 $expression: #StringExpr['1']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@d2']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['d']
                                 $expression: #StringExpr['2']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $expression: #NameExpr['@d1']
                              $expression: #NameExpr['@d2']
                              $expression: #NameExpr['e1']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_activate']
                           $param: #List[
                              $expression: #ParcentNotation['%w[d-1 e-1]']
                              $expression: #NameExpr['e1']
                              $expression: #StringExpr['d']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_platform_alternate']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['@x1_m']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['x']
                                 $expression: #StringExpr['1']
                              ]
                              $body: #Block[
                                 $param: #NameExpr['s']
                                 $body: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['s']
                                       $name: #NameExpr['platform']
                                    ]
                                    $right: #ApplyExpr[
                                       $base: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Platform']
                                       ]
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #ParcentNotation['%w[cpu my_platform 1]']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@x1_o']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['x']
                                 $expression: #StringExpr['1']
                              ]
                              $body: #Block[
                                 $param: #NameExpr['s']
                                 $body: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['s']
                                       $name: #NameExpr['platform']
                                    ]
                                    $right: #ApplyExpr[
                                       $base: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Platform']
                                       ]
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #ParcentNotation['%w[cpu other_platform 1]']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@w1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['w']
                                 $expression: #StringExpr['1']
                                 $hash: #Hash[
                                    $key: #StringExpr['x']
                                    $value: #Nil['nil']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['util_set_arch']
                           $param: #List[
                              $expression: #StringExpr['cpu-my_platform1']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $expression: #NameExpr['@x1_m']
                              $expression: #NameExpr['@x1_o']
                              $expression: #NameExpr['@w1']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_activate']
                           $param: #List[
                              $expression: #ParcentNotation['%w[x-1-cpu-my_platform-1 w-1]']
                              $expression: #NameExpr['@w1']
                              $expression: #NameExpr['@x1_m']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_platform_bump']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['@y1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['y']
                                 $expression: #StringExpr['1']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@y1_1_p']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['y']
                                 $expression: #StringExpr['1.1']
                              ]
                              $body: #Block[
                                 $param: #NameExpr['s']
                                 $body: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['s']
                                       $name: #NameExpr['platform']
                                    ]
                                    $right: #ApplyExpr[
                                       $base: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Platform']
                                       ]
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #ParcentNotation['%w[cpu my_platform 1]']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@z1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['z']
                                 $expression: #StringExpr['1']
                                 $hash: #Hash[
                                    $key: #StringExpr['y']
                                    $value: #Nil['nil']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $expression: #NameExpr['@y1']
                              $expression: #NameExpr['@y1_1_p']
                              $expression: #NameExpr['@z1']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_activate']
                           $param: #List[
                              $expression: #ParcentNotation['%w[y-1 z-1]']
                              $expression: #NameExpr['@z1']
                              $expression: #NameExpr['@y1']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_prerelease']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['@c1_pre']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['c']
                                 $expression: #StringExpr['1.a']
                                 $hash: #Hash[
                                    $key: #StringExpr['a']
                                    $value: #StringExpr['1.a']
                                 ]
                                 $hash: #Hash[
                                    $key: #StringExpr['b']
                                    $value: #StringExpr['1']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@a1_pre']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['1.a']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@b1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['b']
                                 $expression: #StringExpr['1']
                              ]
                              $body: #Block[
                                 $param: #NameExpr['s']
                                 $body: #List[
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['s']
                                       $recv: #NameExpr['add_dependency']
                                       $param: #List[
                                          $expression: #StringExpr['a']
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['s']
                                       $recv: #NameExpr['add_development_dependency']
                                       $param: #List[
                                          $expression: #StringExpr['aa']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $expression: #NameExpr['@a1_pre']
                              $expression: #NameExpr['@b1']
                              $expression: #NameExpr['@c1_pre']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_activate']
                           $param: #List[
                              $expression: #ParcentNotation['%w[a-1.a b-1 c-1.a]']
                              $expression: #NameExpr['@c1_pre']
                              $expression: #NameExpr['@a1_pre']
                              $expression: #NameExpr['@b1']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_via_require']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['a1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['1']
                                 $hash: #Hash[
                                    $key: #StringExpr['b']
                                    $value: #StringExpr['= 1']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['b1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['b']
                                 $expression: #StringExpr['1']
                                 $expression: #Nil['nil']
                                 $expression: #StringExpr['lib/b/c.rb']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['b2']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['b']
                                 $expression: #StringExpr['2']
                                 $expression: #Nil['nil']
                                 $expression: #StringExpr['lib/b/c.rb']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $expression: #NameExpr['b1']
                              $expression: #NameExpr['b2']
                              $expression: #NameExpr['a1']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['a1']
                           $recv: #NameExpr['activate']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['save_loaded_features']
                           $body: #Block[
                              $body: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['b/c']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w(a-1 b-1)']
                              $expression: #NameExpr['loaded_spec_names']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_via_require_wtf']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['save_loaded_features']
                        $body: #Block[
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['a1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['b']
                                          $value: #StringExpr['> 0']
                                       ]
                                       $hash: #Hash[
                                          $key: #StringExpr['d']
                                          $value: #StringExpr['> 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['1']
                                       $expression: #List[
                                          $hash: #Hash[
                                             $key: #StringExpr['c']
                                             $value: #StringExpr['>= 1']
                                          ]
                                       ]
                                       $expression: #StringExpr['lib/b.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['2']
                                       $expression: #List[
                                          $hash: #Hash[
                                             $key: #StringExpr['c']
                                             $value: #StringExpr['>= 2']
                                          ]
                                       ]
                                       $expression: #StringExpr['lib/b.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['1']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['2']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['d1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['d']
                                       $expression: #StringExpr['1']
                                       $expression: #List[
                                          $hash: #Hash[
                                             $key: #StringExpr['c']
                                             $value: #StringExpr['< 2']
                                          ]
                                       ]
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['d2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['d']
                                       $expression: #StringExpr['2']
                                       $expression: #List[
                                          $hash: #Hash[
                                             $key: #StringExpr['c']
                                             $value: #StringExpr['< 2']
                                          ]
                                       ]
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['install_specs']
                                 $param: #List[
                                    $expression: #NameExpr['c1']
                                    $expression: #NameExpr['c2']
                                    $expression: #NameExpr['b1']
                                    $expression: #NameExpr['b2']
                                    $expression: #NameExpr['d1']
                                    $expression: #NameExpr['d2']
                                    $expression: #NameExpr['a1']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['a1']
                                 $recv: #NameExpr['activate']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(a-1)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #Array[
                                       $index: #List[
                                          $expression: #StringExpr['b (> 0)']
                                          $expression: #StringExpr['d (> 0)']
                                       ]
                                    ]
                                    $expression: #NameExpr['unresolved_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['b']
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['e']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_raises']
                                    $param: #List[
                                       $expression: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['LoadError']
                                       ]
                                    ]
                                    $body: #Block[
                                       $body: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['require']
                                          $param: #List[
                                             $expression: #StringExpr['d']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #StringExpr['unable to find a version of \'d\' to activate']
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['e']
                                       $recv: #NameExpr['message']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(a-1 b-2 c-2)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #Array[
                                       $index: #List[
                                          $expression: #StringExpr['d (> 0)']
                                       ]
                                    ]
                                    $expression: #NameExpr['unresolved_names']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_deep_unambiguous']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['a1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['1']
                                 $hash: #Hash[
                                    $key: #StringExpr['b']
                                    $value: #StringExpr['= 1']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['b1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['b']
                                 $expression: #StringExpr['1']
                                 $hash: #Hash[
                                    $key: #StringExpr['c']
                                    $value: #StringExpr['= 1']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['b2']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['b']
                                 $expression: #StringExpr['2']
                                 $hash: #Hash[
                                    $key: #StringExpr['c']
                                    $value: #StringExpr['= 2']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['c1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['c']
                                 $expression: #StringExpr['1']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['c2']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['c']
                                 $expression: #StringExpr['2']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $expression: #NameExpr['c1']
                              $expression: #NameExpr['c2']
                              $expression: #NameExpr['b1']
                              $expression: #NameExpr['b2']
                              $expression: #NameExpr['a1']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['a1']
                           $recv: #NameExpr['activate']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w(a-1 b-1 c-1)']
                              $expression: #NameExpr['loaded_spec_names']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_loaded']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['foo']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['foo']
                                 $expression: #StringExpr['1']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['foo']
                                 $recv: #NameExpr['activate']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['foo']
                                 $recv: #NameExpr['activate']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_unrelated']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['a']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['1.0']
                                 $hash: #Hash[
                                    $key: #StringExpr['b']
                                    $value: #StringExpr['>= 1.0']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['b']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['b']
                                 $expression: #StringExpr['1.0']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['c']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['c']
                                 $expression: #StringExpr['1.0']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $expression: #NameExpr['b']
                              $expression: #NameExpr['c']
                              $expression: #NameExpr['a']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_activate']
                           $param: #List[
                              $expression: #ParcentNotation['%w[b-1.0 c-1.0 a-1.0]']
                              $expression: #NameExpr['a']
                              $expression: #NameExpr['c']
                              $expression: #StringExpr['b']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_over']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['a']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['1.0']
                                 $hash: #Hash[
                                    $key: #StringExpr['b']
                                    $value: #StringExpr['>= 1.0']
                                 ]
                                 $hash: #Hash[
                                    $key: #StringExpr['c']
                                    $value: #StringExpr['= 1.0']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $command: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['util_spec']
                                 $param: #List[
                                    $expression: #StringExpr['b']
                                    $expression: #StringExpr['1.0']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $command: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['util_spec']
                                 $param: #List[
                                    $expression: #StringExpr['b']
                                    $expression: #StringExpr['1.1']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $command: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['util_spec']
                                 $param: #List[
                                    $expression: #StringExpr['b']
                                    $expression: #StringExpr['2.0']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $command: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['util_spec']
                                 $param: #List[
                                    $expression: #StringExpr['c']
                                    $expression: #StringExpr['1.0']
                                    $hash: #Hash[
                                       $key: #StringExpr['b']
                                       $value: #StringExpr['~> 1.0']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $expression: #NameExpr['a']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['a']
                           $recv: #NameExpr['activate']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[a-1.0 c-1.0]']
                              $expression: #NameExpr['loaded_spec_names']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['b (>= 1.0, ~> 1.0)']
                                 ]
                              ]
                              $expression: #NameExpr['unresolved_names']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_under']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['a']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['1.0']
                                 $hash: #Hash[
                                    $key: #StringExpr['b']
                                    $value: #StringExpr['~> 1.0']
                                 ]
                                 $hash: #Hash[
                                    $key: #StringExpr['c']
                                    $value: #StringExpr['= 1.0']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['b1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['b']
                                 $expression: #StringExpr['1.0']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['b1_1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['b']
                                 $expression: #StringExpr['1.1']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['c']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['c']
                                 $expression: #StringExpr['1.0']
                                 $hash: #Hash[
                                    $key: #StringExpr['b']
                                    $value: #StringExpr['= 1.0']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $expression: #NameExpr['b1']
                              $expression: #NameExpr['b1_1']
                              $expression: #NameExpr['c']
                              $expression: #NameExpr['a']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_activate']
                           $param: #List[
                              $expression: #ParcentNotation['%w[b-1.0 c-1.0 a-1.0]']
                              $expression: #NameExpr['a']
                              $expression: #NameExpr['c']
                              $expression: #StringExpr['b']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_dropped']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['a1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['1']
                                 $hash: #Hash[
                                    $key: #StringExpr['b']
                                    $value: #Nil['nil']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['b1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['b']
                                 $expression: #StringExpr['1']
                                 $hash: #Hash[
                                    $key: #StringExpr['c']
                                    $value: #Nil['nil']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['b2']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['b']
                                 $expression: #StringExpr['2']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['c1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['c']
                                 $expression: #StringExpr['1']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $expression: #NameExpr['c1']
                              $expression: #NameExpr['b1']
                              $expression: #NameExpr['b2']
                              $expression: #NameExpr['a1']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_activate']
                           $param: #List[
                              $expression: #ParcentNotation['%w[b-2 a-1]']
                              $expression: #NameExpr['a1']
                              $expression: #StringExpr['b']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_raggi_the_edgecase_generator']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['a']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['1.0']
                                 $hash: #Hash[
                                    $key: #StringExpr['b']
                                    $value: #StringExpr['>= 1.0']
                                 ]
                                 $hash: #Hash[
                                    $key: #StringExpr['c']
                                    $value: #StringExpr['>= 1.0']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['b1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['b']
                                 $expression: #StringExpr['1.0']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['b1_0']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['b']
                                 $expression: #StringExpr['1.1']
                                 $hash: #Hash[
                                    $key: #StringExpr['z']
                                    $value: #StringExpr['>= 1.0']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['c']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['c']
                                 $expression: #StringExpr['1.0']
                                 $hash: #Hash[
                                    $key: #StringExpr['b']
                                    $value: #StringExpr['= 1.0']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['z']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['z']
                                 $expression: #StringExpr['1']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $expression: #NameExpr['z']
                              $expression: #NameExpr['b1']
                              $expression: #NameExpr['b1_0']
                              $expression: #NameExpr['c']
                              $expression: #NameExpr['z']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_activate']
                           $param: #List[
                              $expression: #ParcentNotation['%w[b-1.0 c-1.0 a-1.0]']
                              $expression: #NameExpr['a']
                              $expression: #NameExpr['c']
                              $expression: #StringExpr['b']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_activate_conflict']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $command: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['util_spec']
                                 $param: #List[
                                    $expression: #StringExpr['b']
                                    $expression: #StringExpr['1.0']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $command: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['util_spec']
                                 $param: #List[
                                    $expression: #StringExpr['b']
                                    $expression: #StringExpr['2.0']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['gem']
                           $param: #List[
                              $expression: #StringExpr['b']
                              $expression: #StringExpr['= 1.0']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_raises']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['LoadError']
                              ]
                           ]
                           $body: #Block[
                              $body: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['gem']
                                 $param: #List[
                                    $expression: #StringExpr['b']
                                    $expression: #StringExpr['= 2.0']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_all_equals']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['a']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['foo']
                                 $expression: #StringExpr['1']
                                 $expression: #Nil['nil']
                                 $expression: #StringExpr['lib/foo.rb']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $expression: #NameExpr['a']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $name: #NameExpr['all']
                           ]
                           $right: #Array[
                              $index: #List[
                                 $expression: #NameExpr['a']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['a']
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['find_inactive_by_path']
                                 $param: #List[
                                    $expression: #StringExpr['foo']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_attribute_names']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected_value']
                           $right: #ParcentNotation['%w[\n      authors\n      autorequire\n      bindir\n      cert_chain\n      date\n      dependencies\n      description\n      email\n      executables\n      extensions\n      extra_rdoc_files\n      files\n      homepage\n      licenses\n      metadata\n      name\n      platform\n      post_install_message\n      rdoc_options\n      require_paths\n      required_ruby_version\n      required_rubygems_version\n      requirements\n      rubyforge_project\n      rubygems_version\n      signing_key\n      specification_version\n      summary\n      test_files\n      version\n    ]']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['actual_value']
                           $right: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Specification']
                                    ]
                                    $recv: #NameExpr['attribute_names']
                                 ]
                                 $recv: #NameExpr['map']
                                 $body: #Block[
                                    $param: #NameExpr['a']
                                    $body: #ApplyExpr[
                                       $recv: #NameExpr['a']
                                       $recv: #NameExpr['to_s']
                                    ]
                                 ]
                              ]
                              $recv: #NameExpr['sort']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected_value']
                              $expression: #NameExpr['actual_value']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self__load_future']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['new']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['spec']
                              $name: #NameExpr['name']
                           ]
                           $right: #StringExpr['a']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['spec']
                              $name: #NameExpr['version']
                           ]
                           $right: #StringExpr['1']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['spec']
                              $name: #NameExpr['specification_version']
                           ]
                           $right: #AddExpr[
                              $left: #NameExpr['@current_version']
                              $right: #IntExpr['1']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['new_spec']
                           $right: #ApplyExpr[
                              $base: #NameExpr['Marshal']
                              $recv: #NameExpr['load']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['Marshal']
                                    $recv: #NameExpr['dump']
                                    $param: #List[
                                       $expression: #NameExpr['spec']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['a']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['name']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Version']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #IntExpr['1']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['version']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['@current_version']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['specification_version']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_from_yaml']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a1']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@specification_version']
                              $expression: #Nil['nil']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['from_yaml']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['to_yaml']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $name: #NameExpr['NONEXISTENT_SPECIFICATION_VERSION']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['specification_version']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_from_yaml_syck_date_bug']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['yaml']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['to_yaml']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['yaml']
                           $recv: #NameExpr['sub!']
                           $param: #List[
                              $expression: #Regex['/^date:.*/']
                              $expression: #StringExpr['date: 2011-04-26 00:00:00.000000000Z']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['new_spec']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['with_syck']
                              $body: #Block[
                                 $body: #ApplyExpr[
                                    $base: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Specification']
                                    ]
                                    $recv: #NameExpr['from_yaml']
                                    $param: #List[
                                       $expression: #NameExpr['yaml']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_kind_of']
                           $param: #List[
                              $expression: #NameExpr['Time']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['date']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_kind_of']
                           $param: #List[
                              $expression: #NameExpr['Time']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['date']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_from_yaml_syck_default_key_bug']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['yaml']
                           $right: #HereDocument['--- !ruby/object:Gem::Specification\nname: posix-spawn\nversion: !ruby/object:Gem::Version\n  version: 0.3.6\n  prerelease:\ndependencies:\n- !ruby/object:Gem::Dependency\n  name: rake-compiler\n  requirement: &70243867725240 !ruby/object:Gem::Requirement\n    none: false\n    requirements:\n    - - =\n      - !ruby/object:Gem::Version\n        version: 0.7.6\n  type: :development\n  prerelease: false\n  version_requirements: *70243867725240\nplatform: ruby\nfiles: []\ntest_files: []\nbindir:\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['new_spec']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['with_syck']
                              $body: #Block[
                                 $body: #ApplyExpr[
                                    $base: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Specification']
                                    ]
                                    $recv: #NameExpr['from_yaml']
                                    $param: #List[
                                       $expression: #NameExpr['yaml']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['op']
                           $right: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #ApplyExpr[
                                          $recv: #ApplyExpr[
                                             $recv: #NameExpr['new_spec']
                                             $recv: #NameExpr['dependencies']
                                          ]
                                          $recv: #NameExpr['first']
                                       ]
                                       $recv: #NameExpr['requirement']
                                    ]
                                    $recv: #NameExpr['requirements']
                                 ]
                                 $recv: #NameExpr['first']
                              ]
                              $recv: #NameExpr['first']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_kind_of']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['YAML']
                                    $name: #NameExpr['Syck']
                                 ]
                                 $name: #NameExpr['DefaultKey']
                              ]
                              $expression: #NameExpr['op']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_match']
                           $param: #List[
                              $expression: #Regex['%r%DefaultKey%']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['to_ruby']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_from_yaml_cleans_up_defaultkey']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['yaml']
                           $right: #HereDocument['--- !ruby/object:Gem::Specification\nname: posix-spawn\nversion: !ruby/object:Gem::Version\n  version: 0.3.6\n  prerelease:\ndependencies:\n- !ruby/object:Gem::Dependency\n  name: rake-compiler\n  requirement: &70243867725240 !ruby/object:Gem::Requirement\n    none: false\n    requirements:\n    - - !ruby/object:YAML::Syck::DefaultKey {}\n\n      - !ruby/object:Gem::Version\n        version: 0.7.6\n  type: :development\n  prerelease: false\n  version_requirements: *70243867725240\nplatform: ruby\nfiles: []\ntest_files: []\nbindir:\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['new_spec']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['from_yaml']
                              $param: #List[
                                 $expression: #NameExpr['yaml']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['op']
                           $right: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #ApplyExpr[
                                          $recv: #ApplyExpr[
                                             $recv: #NameExpr['new_spec']
                                             $recv: #NameExpr['dependencies']
                                          ]
                                          $recv: #NameExpr['first']
                                       ]
                                       $recv: #NameExpr['requirement']
                                    ]
                                    $recv: #NameExpr['requirements']
                                 ]
                                 $recv: #NameExpr['first']
                              ]
                              $recv: #NameExpr['first']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_kind_of']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['YAML']
                                    $name: #NameExpr['Syck']
                                 ]
                                 $name: #NameExpr['DefaultKey']
                              ]
                              $expression: #NameExpr['op']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_match']
                           $param: #List[
                              $expression: #Regex['%r%DefaultKey%']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['to_ruby']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_from_yaml_cleans_up_defaultkey_from_newer_192']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['yaml']
                           $right: #HereDocument['--- !ruby/object:Gem::Specification\nname: posix-spawn\nversion: !ruby/object:Gem::Version\n  version: 0.3.6\n  prerelease:\ndependencies:\n- !ruby/object:Gem::Dependency\n  name: rake-compiler\n  requirement: &70243867725240 !ruby/object:Gem::Requirement\n    none: false\n    requirements:\n    - - !ruby/object:Syck::DefaultKey {}\n\n      - !ruby/object:Gem::Version\n        version: 0.7.6\n  type: :development\n  prerelease: false\n  version_requirements: *70243867725240\nplatform: ruby\nfiles: []\ntest_files: []\nbindir:\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['new_spec']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['from_yaml']
                              $param: #List[
                                 $expression: #NameExpr['yaml']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['op']
                           $right: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #ApplyExpr[
                                          $recv: #ApplyExpr[
                                             $recv: #NameExpr['new_spec']
                                             $recv: #NameExpr['dependencies']
                                          ]
                                          $recv: #NameExpr['first']
                                       ]
                                       $recv: #NameExpr['requirement']
                                    ]
                                    $recv: #NameExpr['requirements']
                                 ]
                                 $recv: #NameExpr['first']
                              ]
                              $recv: #NameExpr['first']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_kind_of']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['YAML']
                                    $name: #NameExpr['Syck']
                                 ]
                                 $name: #NameExpr['DefaultKey']
                              ]
                              $expression: #NameExpr['op']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_match']
                           $param: #List[
                              $expression: #Regex['%r%DefaultKey%']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['to_ruby']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_from_yaml_cleans_up_Date_objects']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['yaml']
                           $right: #HereDocument['--- !ruby/object:Gem::Specification\nrubygems_version: 0.8.1\nspecification_version: 1\nname: diff-lcs\nversion: !ruby/object:Gem::Version\n  version: 1.1.2\ndate: 2004-10-20\nsummary: Provides a list of changes that represent the difference between two sequenced collections.\nrequire_paths:\n  - lib\nauthor: Austin Ziegler\nemail: diff-lcs@halostatue.ca\nhomepage: http://rubyforge.org/projects/ruwiki/\nrubyforge_project: ruwiki\ndescription: "Test"\nbindir: bin\nhas_rdoc: true\nrequired_ruby_version: !ruby/object:Gem::Version::Requirement\n  requirements:\n    -\n      - ">="\n      - !ruby/object:Gem::Version\n        version: 1.8.1\n  version:\nplatform: ruby\nfiles:\n  - tests/00test.rb\nrdoc_options:\n  - "--title"\n  - "Diff::LCS -- A Diff Algorithm"\n  - "--main"\n  - README\n  - "--line-numbers"\nextra_rdoc_files:\n  - README\n  - ChangeLog\n  - Install\nexecutables:\n  - ldiff\n  - htmldiff\nextensions: []\nrequirements: []\ndependencies: []\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['new_spec']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['from_yaml']
                              $param: #List[
                                 $expression: #NameExpr['yaml']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_kind_of']
                           $param: #List[
                              $expression: #NameExpr['Time']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['date']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_load']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['full_path']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a2']
                              $recv: #NameExpr['spec_file']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['write_file']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['full_path']
                                 $body: #Block[
                                    $param: #NameExpr['io']
                                    $body: #ApplyExpr[
                                       $base: #NameExpr['io']
                                       $recv: #NameExpr['write']
                                       $param: #List[
                                          $expression: #ApplyExpr[
                                             $recv: #NameExpr['@a2']
                                             $recv: #NameExpr['to_ruby_for_cache']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['load']
                              $param: #List[
                                 $expression: #NameExpr['full_path']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #NameExpr['@a2']
                              $recv: #NameExpr['files']
                           ]
                           $recv: #NameExpr['clear']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['@a2']
                              $expression: #NameExpr['spec']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_load_relative']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['open']
                           $param: #List[
                              $expression: #StringExpr['a-2.gemspec']
                              $expression: #StringExpr['w']
                           ]
                           $body: #Block[
                              $param: #NameExpr['io']
                              $body: #ApplyExpr[
                                 $base: #NameExpr['io']
                                 $recv: #NameExpr['write']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['@a2']
                                       $recv: #NameExpr['to_ruby_for_cache']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['load']
                              $param: #List[
                                 $expression: #StringExpr['a-2.gemspec']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #NameExpr['@a2']
                              $recv: #NameExpr['files']
                           ]
                           $recv: #NameExpr['clear']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['@a2']
                              $expression: #NameExpr['spec']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['File']
                                 $recv: #NameExpr['join']
                                 $param: #List[
                                    $expression: #NameExpr['@tempdir']
                                    $expression: #StringExpr['a-2.gemspec']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['loaded_from']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_load_tainted']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['full_path']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a2']
                              $recv: #NameExpr['spec_file']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['write_file']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['full_path']
                                 $body: #Block[
                                    $param: #NameExpr['io']
                                    $body: #ApplyExpr[
                                       $base: #NameExpr['io']
                                       $recv: #NameExpr['write']
                                       $param: #List[
                                          $expression: #ApplyExpr[
                                             $recv: #NameExpr['@a2']
                                             $recv: #NameExpr['to_ruby_for_cache']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['full_path']
                           $recv: #NameExpr['taint']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['loader']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['Thread']
                              $recv: #NameExpr['new']
                              $body: #Block[
                                 $body: #List[
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['$SAFE']
                                       $right: #IntExpr['1']
                                    ]
                                    $statement: #ApplyExpr[
                                       $base: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Specification']
                                       ]
                                       $recv: #NameExpr['load']
                                       $param: #List[
                                          $expression: #NameExpr['full_path']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['loader']
                              $recv: #NameExpr['value']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #NameExpr['@a2']
                              $recv: #NameExpr['files']
                           ]
                           $recv: #NameExpr['clear']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['@a2']
                              $expression: #NameExpr['spec']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_load_escape_curly']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['name']
                           ]
                           $right: #StringExpr['a};raise "improper escaping";%q{']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['full_path']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a2']
                              $recv: #NameExpr['spec_file']
                           ]
                        ]
                        $statement: #ExceptionBlock[
                           $main: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['write_file']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['full_path']
                                    $body: #Block[
                                       $param: #NameExpr['io']
                                       $body: #ApplyExpr[
                                          $base: #NameExpr['io']
                                          $recv: #NameExpr['write']
                                          $param: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #NameExpr['@a2']
                                                $recv: #NameExpr['to_ruby_for_cache']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                           $rescue: #List[
                              $rescue: #Rescue[
                                 $class: #Field[
                                    $recv: #NameExpr['Errno']
                                    $name: #NameExpr['EINVAL']
                                 ]
                                 $then: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['skip']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['full_path']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['load']
                              $param: #List[
                                 $expression: #NameExpr['full_path']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #NameExpr['@a2']
                              $recv: #NameExpr['files']
                           ]
                           $recv: #NameExpr['clear']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['@a2']
                              $expression: #NameExpr['spec']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_load_escape_interpolation']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['name']
                           ]
                           $right: #StringExpr['a#{raise %<improper escaping>}']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['full_path']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a2']
                              $recv: #NameExpr['spec_file']
                           ]
                        ]
                        $statement: #ExceptionBlock[
                           $main: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['write_file']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['full_path']
                                    $body: #Block[
                                       $param: #NameExpr['io']
                                       $body: #ApplyExpr[
                                          $base: #NameExpr['io']
                                          $recv: #NameExpr['write']
                                          $param: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #NameExpr['@a2']
                                                $recv: #NameExpr['to_ruby_for_cache']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                           $rescue: #List[
                              $rescue: #Rescue[
                                 $class: #Field[
                                    $recv: #NameExpr['Errno']
                                    $name: #NameExpr['EINVAL']
                                 ]
                                 $then: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['skip']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['full_path']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['load']
                              $param: #List[
                                 $expression: #NameExpr['full_path']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #NameExpr['@a2']
                              $recv: #NameExpr['files']
                           ]
                           $recv: #NameExpr['clear']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['@a2']
                              $expression: #NameExpr['spec']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_load_escape_quote']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['name']
                           ]
                           $right: #StringExpr['a";raise "improper escaping";"']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['full_path']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a2']
                              $recv: #NameExpr['spec_file']
                           ]
                        ]
                        $statement: #ExceptionBlock[
                           $main: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['write_file']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['full_path']
                                    $body: #Block[
                                       $param: #NameExpr['io']
                                       $body: #ApplyExpr[
                                          $base: #NameExpr['io']
                                          $recv: #NameExpr['write']
                                          $param: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #NameExpr['@a2']
                                                $recv: #NameExpr['to_ruby_for_cache']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                           $rescue: #List[
                              $rescue: #Rescue[
                                 $class: #Field[
                                    $recv: #NameExpr['Errno']
                                    $name: #NameExpr['EINVAL']
                                 ]
                                 $then: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['skip']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['full_path']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['load']
                              $param: #List[
                                 $expression: #NameExpr['full_path']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #NameExpr['@a2']
                              $recv: #NameExpr['files']
                           ]
                           $recv: #NameExpr['clear']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['@a2']
                              $expression: #NameExpr['spec']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #IfExpr[
                  $cond: #Defined[
                     $base: #NameExpr['Encoding']
                  ]
                  $then: #FuncDecl[
                     $name: #NameExpr['test_self_load_utf8_with_ascii_encoding']
                     $param: #List['']
                     $body: #BlockExpr[
                        $main: #List[
                           $statement: #AssignExpr[
                              $left: #NameExpr['int_enc']
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['Encoding']
                                 $recv: #NameExpr['default_internal']
                              ]
                           ]
                           $statement: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['silence_warnings']
                              $body: #Block[
                                 $body: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['Encoding']
                                       $name: #NameExpr['default_internal']
                                    ]
                                    $right: #StringExpr['US-ASCII']
                                 ]
                              ]
                           ]
                           $statement: #AssignExpr[
                              $left: #NameExpr['spec2']
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['dup']
                              ]
                           ]
                           $statement: #AssignExpr[
                              $left: #NameExpr['bin']
                              $right: #ApplyExpr[
                                 $recv: #StringExpr['\\u5678']
                                 $recv: #NameExpr['dup']
                              ]
                           ]
                           $statement: #AssignExpr[
                              $left: #Field[
                                 $base: #NameExpr['spec2']
                                 $name: #NameExpr['authors']
                              ]
                              $right: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['bin']
                                 ]
                              ]
                           ]
                           $statement: #AssignExpr[
                              $left: #NameExpr['full_path']
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['spec2']
                                 $recv: #NameExpr['spec_file']
                              ]
                           ]
                           $statement: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['write_file']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['full_path']
                                    $body: #Block[
                                       $param: #NameExpr['io']
                                       $body: #ApplyExpr[
                                          $base: #NameExpr['io']
                                          $recv: #NameExpr['write']
                                          $param: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #ApplyExpr[
                                                   $recv: #ApplyExpr[
                                                      $recv: #NameExpr['spec2']
                                                      $recv: #NameExpr['to_ruby_for_cache']
                                                   ]
                                                   $recv: #NameExpr['force_encoding']
                                                   $param: #List[
                                                      $expression: #StringExpr['BINARY']
                                                   ]
                                                ]
                                                $recv: #NameExpr['sub']
                                                $param: #List[
                                                   $expression: #StringExpr['\\\\u{5678}']
                                                   $expression: #ApplyExpr[
                                                      $recv: #NameExpr['bin']
                                                      $recv: #NameExpr['force_encoding']
                                                      $param: #List[
                                                         $expression: #StringExpr['BINARY']
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                           $statement: #AssignExpr[
                              $left: #NameExpr['spec']
                              $right: #ApplyExpr[
                                 $base: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['load']
                                 $param: #List[
                                    $expression: #NameExpr['full_path']
                                 ]
                              ]
                           ]
                           $statement: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #NameExpr['spec2']
                                 $recv: #NameExpr['files']
                              ]
                              $recv: #NameExpr['clear']
                           ]
                           $statement: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['assert_equal']
                              $param: #List[
                                 $expression: #NameExpr['spec2']
                                 $expression: #NameExpr['spec']
                              ]
                           ]
                        ]
                        $ensure: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['silence_warnings']
                           $body: #Block[
                              $body: #AssignExpr[
                                 $left: #Field[
                                    $base: #NameExpr['Encoding']
                                    $name: #NameExpr['default_internal']
                                 ]
                                 $right: #NameExpr['int_enc']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_load_legacy_ruby']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Deprecate']
                              ]
                              $recv: #NameExpr['skip_during']
                              $body: #Block[
                                 $body: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['eval']
                                    $param: #List[
                                       $expression: #NameExpr['LEGACY_RUBY_SPEC']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['keyedlist']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['name']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['0.4.0']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['spec']
                                    $recv: #NameExpr['version']
                                 ]
                                 $recv: #NameExpr['to_s']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $name: #NameExpr['TODAY']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['date']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['spec']
                                    $recv: #NameExpr['required_ruby_version']
                                 ]
                                 $recv: #NameExpr['satisfied_by?']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Version']
                                       ]
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #StringExpr['1']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #FalseExpr['false']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['has_unit_tests?']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_normalize_yaml_input_with_183_yaml']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['input']
                           $right: #StringExpr['!ruby/object:Gem::Specification ']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr[
                                 $inner: #NameExpr['input']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['normalize_yaml_input']
                                 $param: #List[
                                    $expression: #NameExpr['input']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_normalize_yaml_input_with_non_183_yaml']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['input']
                           $right: #StringExpr['--- !ruby/object:Gem::Specification ']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['input']
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['normalize_yaml_input']
                                 $param: #List[
                                    $expression: #NameExpr['input']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_normalize_yaml_input_with_183_io']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['input']
                           $right: #StringExpr['!ruby/object:Gem::Specification ']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr[
                                 $inner: #NameExpr['input']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['normalize_yaml_input']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['StringIO']
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #NameExpr['input']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_normalize_yaml_input_with_non_183_io']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['input']
                           $right: #StringExpr['--- !ruby/object:Gem::Specification ']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['input']
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['normalize_yaml_input']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['StringIO']
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #NameExpr['input']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_normalize_yaml_input_with_192_yaml']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['input']
                           $right: #StringExpr['--- !ruby/object:Gem::Specification \\nblah: !!null \\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #StringExpr['--- !ruby/object:Gem::Specification \\nblah: \\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['normalize_yaml_input']
                                 $param: #List[
                                    $expression: #NameExpr['input']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_outdated']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['spec_fetcher']
                           $body: #Block[
                              $param: #NameExpr['fetcher']
                              $body: #List[
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['fetcher']
                                    $recv: #NameExpr['download']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #IntExpr['4']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['fetcher']
                                    $recv: #NameExpr['spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #IntExpr['3']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[a]']
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['outdated']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_outdated_and_latest_remotes']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['specs']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['spec_fetcher']
                              $body: #Block[
                                 $param: #NameExpr['fetcher']
                                 $body: #List[
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['fetcher']
                                       $recv: #NameExpr['download']
                                       $param: #List[
                                          $expression: #StringExpr['a']
                                          $expression: #IntExpr['4']
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['fetcher']
                                       $recv: #NameExpr['download']
                                       $param: #List[
                                          $expression: #StringExpr['b']
                                          $expression: #IntExpr['3']
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['fetcher']
                                       $recv: #NameExpr['spec']
                                       $param: #List[
                                          $expression: #StringExpr['a']
                                          $expression: #StringExpr['3.a']
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['fetcher']
                                       $recv: #NameExpr['spec']
                                       $param: #List[
                                          $expression: #StringExpr['b']
                                          $expression: #IntExpr['2']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #Indexer[
                                          $recv: #NameExpr['specs']
                                          $index: #List[
                                             $expression: #StringExpr['a-3.a']
                                          ]
                                       ]
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['v']
                                          $param: #List[
                                             $expression: #IntExpr['4']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #Indexer[
                                          $recv: #NameExpr['specs']
                                          $index: #List[
                                             $expression: #StringExpr['b-2']
                                          ]
                                       ]
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['v']
                                          $param: #List[
                                             $expression: #IntExpr['3']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Specification']
                                    ]
                                    $recv: #NameExpr['outdated_and_latest_version']
                                 ]
                                 $recv: #NameExpr['to_a']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_remove_spec']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $expression: #NameExpr['@a1']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_includes']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['all_names']
                              ]
                              $expression: #StringExpr['a-1']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_includes']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Specification']
                                    ]
                                    $recv: #NameExpr['stubs']
                                 ]
                                 $recv: #NameExpr['map']
                                 $body: #Block[
                                    $param: #NameExpr['s']
                                    $body: #ApplyExpr[
                                       $recv: #NameExpr['s']
                                       $recv: #NameExpr['full_name']
                                    ]
                                 ]
                              ]
                              $expression: #StringExpr['a-1']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['uninstall_gem']
                           $param: #List[
                              $expression: #NameExpr['@a1']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #Field[
                              $recv: #NameExpr['Gem']
                              $name: #NameExpr['Specification']
                           ]
                           $recv: #NameExpr['reset']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_includes']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['all_names']
                              ]
                              $expression: #StringExpr['a-1']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_includes']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Specification']
                                    ]
                                    $recv: #NameExpr['stubs']
                                 ]
                                 $recv: #NameExpr['map']
                                 $body: #Block[
                                    $param: #NameExpr['s']
                                    $body: #ApplyExpr[
                                       $recv: #NameExpr['s']
                                       $recv: #NameExpr['full_name']
                                    ]
                                 ]
                              ]
                              $expression: #StringExpr['a-1']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_self_remove_spec_removed']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['open']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['spec_file']
                              ]
                              $expression: #StringExpr['w']
                           ]
                           $body: #Block[
                              $param: #NameExpr['io']
                              $body: #ApplyExpr[
                                 $base: #NameExpr['io']
                                 $recv: #NameExpr['write']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['@a1']
                                       $recv: #NameExpr['to_ruby']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #Field[
                              $recv: #NameExpr['Gem']
                              $name: #NameExpr['Specification']
                           ]
                           $recv: #NameExpr['reset']
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['rm']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['spec_file']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #Field[
                              $recv: #NameExpr['Gem']
                              $name: #NameExpr['Specification']
                           ]
                           $recv: #NameExpr['reset']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_includes']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['all_names']
                              ]
                              $expression: #StringExpr['a-1']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_includes']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Specification']
                                    ]
                                    $recv: #NameExpr['stubs']
                                 ]
                                 $recv: #NameExpr['map']
                                 $body: #Block[
                                    $param: #NameExpr['s']
                                    $body: #ApplyExpr[
                                       $recv: #NameExpr['s']
                                       $recv: #NameExpr['full_name']
                                    ]
                                 ]
                              ]
                              $expression: #StringExpr['a-1']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['DATA_PATH']
                  $right: #ApplyExpr[
                     $base: #NameExpr['File']
                     $recv: #NameExpr['expand_path']
                     $param: #List[
                        $expression: #StringExpr['../data']
                        $expression: #File['__FILE__']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_handles_private_null_type']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['path']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #NameExpr['DATA_PATH']
                                 $expression: #StringExpr['null-type.gemspec.rz']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['data']
                           $right: #ApplyExpr[
                              $base: #NameExpr['Marshal']
                              $recv: #NameExpr['load']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['Gem']
                                    $recv: #NameExpr['inflate']
                                    $param: #List[
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['Gem']
                                          $recv: #NameExpr['read_binary']
                                          $param: #List[
                                             $expression: #NameExpr['path']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Nil['nil']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['data']
                                 $recv: #NameExpr['rubyforge_project']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #IfExpr[
                  $then: #FuncDecl[
                     $name: #NameExpr['test_emits_zulu_timestamps_properly']
                     $param: #List['']
                     $body: #BlockExpr[
                        $main: #List[
                           $statement: #AssignExpr[
                              $left: #NameExpr['t']
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['Time']
                                 $recv: #NameExpr['utc']
                                 $param: #List[
                                    $expression: #IntExpr['2012']
                                    $expression: #IntExpr['3']
                                    $expression: #IntExpr['12']
                                 ]
                              ]
                           ]
                           $statement: #AssignExpr[
                              $left: #Field[
                                 $base: #NameExpr['@a2']
                                 $name: #NameExpr['date']
                              ]
                              $right: #NameExpr['t']
                           ]
                           $statement: #AssignExpr[
                              $left: #NameExpr['yaml']
                              $right: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['with_psych']
                                 $body: #Block[
                                    $body: #ApplyExpr[
                                       $recv: #NameExpr['@a2']
                                       $recv: #NameExpr['to_yaml']
                                    ]
                                 ]
                              ]
                           ]
                           $statement: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['assert_match']
                              $param: #List[
                                 $expression: #Regex['%r!date: 2012-03-12 00:00:00\\.000000000 Z!']
                                 $expression: #NameExpr['yaml']
                              ]
                           ]
                        ]
                     ]
                  ]
                  $cond: #AssignExpr[
                     $left: #NameExpr['RUBY_VERSION']
                     $right: #ComplExpr[
                        $expr: #Regex['/1\\.9\\.2/']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_initialize']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['new']
                              $body: #Block[
                                 $param: #NameExpr['s']
                                 $body: #List[
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['name']
                                       ]
                                       $right: #StringExpr['blah']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['version']
                                       ]
                                       $right: #StringExpr['1.3.5']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['blah']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['name']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['1.3.5']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['spec']
                                    $recv: #NameExpr['version']
                                 ]
                                 $recv: #NameExpr['to_s']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Platform']
                                 ]
                                 $name: #NameExpr['RUBY']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['platform']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Nil['nil']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['summary']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['test_files']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['rdoc_options']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['extra_rdoc_files']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['executables']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['extensions']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['requirements']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['dependencies']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['bin']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['bindir']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['>= 0']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['spec']
                                    $recv: #NameExpr['required_ruby_version']
                                 ]
                                 $recv: #NameExpr['to_s']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['>= 0']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['spec']
                                    $recv: #NameExpr['required_rubygems_version']
                                 ]
                                 $recv: #NameExpr['to_s']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_initialize_future']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['version']
                           $right: #AddExpr[
                              $left: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $name: #NameExpr['CURRENT_SPECIFICATION_VERSION']
                              ]
                              $right: #IntExpr['1']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['new']
                              $body: #Block[
                                 $param: #NameExpr['s']
                                 $body: #List[
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['name']
                                       ]
                                       $right: #StringExpr['blah']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['version']
                                       ]
                                       $right: #StringExpr['1.3.5']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['specification_version']
                                       ]
                                       $right: #NameExpr['version']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['new_unknown_attribute']
                                       ]
                                       $right: #StringExpr['a value']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['blah']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['name']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['1.3.5']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['spec']
                                    $recv: #NameExpr['version']
                                 ]
                                 $recv: #NameExpr['to_s']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_initialize_copy']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['new']
                              $body: #Block[
                                 $param: #NameExpr['s']
                                 $body: #List[
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['name']
                                       ]
                                       $right: #StringExpr['blah']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['version']
                                       ]
                                       $right: #StringExpr['1.3.5']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['summary']
                                       ]
                                       $right: #StringExpr['summary']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['description']
                                       ]
                                       $right: #StringExpr['description']
                                    ]
                                    $statement: #MultipleAssign[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['authors']
                                       ]
                                       $right: #MultipleRightHandSideExpression[
                                          $expression: #StringExpr['author a']
                                          $expression: #StringExpr['author b']
                                       ]
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['licenses']
                                       ]
                                       $right: #StringExpr['BSD-2-Clause']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['files']
                                       ]
                                       $right: #StringExpr['lib/file.rb']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['test_files']
                                       ]
                                       $right: #StringExpr['test/file.rb']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['rdoc_options']
                                       ]
                                       $right: #StringExpr['--foo']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['extra_rdoc_files']
                                       ]
                                       $right: #StringExpr['README.txt']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['executables']
                                       ]
                                       $right: #StringExpr['exec']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['extensions']
                                       ]
                                       $right: #StringExpr['ext/extconf.rb']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['requirements']
                                       ]
                                       $right: #StringExpr['requirement']
                                    ]
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['s']
                                       $recv: #NameExpr['add_dependency']
                                       $param: #List[
                                          $expression: #StringExpr['some_gem']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['new_spec']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['spec']
                              $recv: #NameExpr['dup']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['blah']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['name']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_same']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['name']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['name']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['1.3.5']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['spec']
                                    $recv: #NameExpr['version']
                                 ]
                                 $recv: #NameExpr['to_s']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_same']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['version']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['version']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Platform']
                                 ]
                                 $name: #NameExpr['RUBY']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['platform']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_same']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['platform']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['platform']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['summary']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['summary']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_same']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['summary']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['summary']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #ParcentNotation['%w[README.txt bin/exec ext/extconf.rb lib/file.rb\n                    test/file.rb]']
                                 $recv: #NameExpr['sort']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_same']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['files']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['files']
                              ]
                              $expression: #StringExpr['files']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[test/file.rb]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['test_files']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_same']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['test_files']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['test_files']
                              ]
                              $expression: #StringExpr['test_files']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[--foo]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['rdoc_options']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_same']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['rdoc_options']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['rdoc_options']
                              ]
                              $expression: #StringExpr['rdoc_options']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[README.txt]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['extra_rdoc_files']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_same']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['extra_rdoc_files']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['extra_rdoc_files']
                              ]
                              $expression: #StringExpr['extra_rdoc_files']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[exec]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['executables']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_same']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['executables']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['executables']
                              ]
                              $expression: #StringExpr['executables']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[ext/extconf.rb]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['extensions']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_same']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['extensions']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['extensions']
                              ]
                              $expression: #StringExpr['extensions']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[requirement]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['requirements']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_same']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['requirements']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['requirements']
                              ]
                              $expression: #StringExpr['requirements']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Dependency']
                                       ]
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #StringExpr['some_gem']
                                          $expression: #ApplyExpr[
                                             $recv: #Field[
                                                $recv: #NameExpr['Gem']
                                                $name: #NameExpr['Requirement']
                                             ]
                                             $recv: #NameExpr['default']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['dependencies']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_same']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['dependencies']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['dependencies']
                              ]
                              $expression: #StringExpr['dependencies']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['bin']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['bindir']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_same']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['bindir']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['bindir']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['>= 0']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['spec']
                                    $recv: #NameExpr['required_ruby_version']
                                 ]
                                 $recv: #NameExpr['to_s']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_same']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['required_ruby_version']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['required_ruby_version']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['>= 0']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['spec']
                                    $recv: #NameExpr['required_rubygems_version']
                                 ]
                                 $recv: #NameExpr['to_s']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_same']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['required_rubygems_version']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['new_spec']
                                 $recv: #NameExpr['required_rubygems_version']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_initialize_copy_broken']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['new']
                              $body: #Block[
                                 $param: #NameExpr['s']
                                 $body: #List[
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['name']
                                       ]
                                       $right: #StringExpr['a']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['version']
                                       ]
                                       $right: #StringExpr['1']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@licenses']
                              $expression: #NameExpr['blah']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['spec']
                              $name: #NameExpr['loaded_from']
                           ]
                           $right: #StringExpr['/path/to/file']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['e']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['assert_raises']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['FormatException']
                                 ]
                              ]
                              $body: #Block[
                                 $body: #ApplyExpr[
                                    $recv: #NameExpr['spec']
                                    $recv: #NameExpr['dup']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['a-1 has an invalid value for @licenses']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['e']
                                 $recv: #NameExpr['message']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['/path/to/file']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['e']
                                 $recv: #NameExpr['file_path']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test__dump']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['platform']
                           ]
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Platform']
                              ]
                              $recv: #NameExpr['local']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a2']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@original_platform']
                              $expression: #StringExpr['old_platform']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['data']
                           $right: #ApplyExpr[
                              $base: #NameExpr['Marshal']
                              $recv: #NameExpr['dump']
                              $param: #List[
                                 $expression: #NameExpr['@a2']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['same_spec']
                           $right: #ApplyExpr[
                              $base: #NameExpr['Marshal']
                              $recv: #NameExpr['load']
                              $param: #List[
                                 $expression: #NameExpr['data']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['old_platform']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['same_spec']
                                 $recv: #NameExpr['original_platform']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_activate']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@a2']
                           $recv: #NameExpr['activate']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['activated?']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_add_dependency_with_type']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['gem']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['awesome']
                                 $expression: #StringExpr['1.0']
                              ]
                              $body: #Block[
                                 $param: #NameExpr['awesome']
                                 $body: #List[
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['awesome']
                                       $recv: #NameExpr['add_dependency']
                                       $param: #List[
                                          $expression: #TrueExpr['true']
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['awesome']
                                       $recv: #NameExpr['add_dependency']
                                       $param: #List[
                                          $expression: #NameExpr['gem_name']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[true gem_name]']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['gem']
                                    $recv: #NameExpr['dependencies']
                                 ]
                                 $recv: #NameExpr['map']
                                 $body: #Block[
                                    $param: #NameExpr['dep']
                                    $body: #ApplyExpr[
                                       $recv: #NameExpr['dep']
                                       $recv: #NameExpr['name']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_add_dependency_from_existing_dependency']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['dep']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Dependency']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #StringExpr['existing_dep']
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Requirement']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #StringExpr['> 1']
                                    ]
                                 ]
                                 $expression: #NameExpr['runtime']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['new']
                              $body: #Block[
                                 $param: #NameExpr['s']
                                 $body: #ApplyExpr[
                                    $base: #NameExpr['s']
                                    $recv: #NameExpr['add_dependency']
                                    $param: #List[
                                       $expression: #NameExpr['dep']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['dep']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['spec']
                                    $recv: #NameExpr['dependencies']
                                 ]
                                 $recv: #NameExpr['first']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_add_dependency_with_type_explicit']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['gem']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['awesome']
                                 $expression: #StringExpr['1.0']
                              ]
                              $body: #Block[
                                 $param: #NameExpr['awesome']
                                 $body: #ApplyExpr[
                                    $base: #NameExpr['awesome']
                                    $recv: #NameExpr['add_development_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['monkey']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['monkey']
                           $right: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #NameExpr['gem']
                                 $recv: #NameExpr['dependencies']
                              ]
                              $recv: #NameExpr['detect']
                              $body: #Block[
                                 $param: #NameExpr['d']
                                 $body: #EqExpr[
                                    $left: #ApplyExpr[
                                       $recv: #NameExpr['d']
                                       $recv: #NameExpr['name']
                                    ]
                                    $right: #StringExpr['monkey']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['development']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['monkey']
                                 $recv: #NameExpr['type']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_author']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #StringExpr['A User']
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['author']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_authors']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #Array[
                              $index: #List[
                                 $expression: #StringExpr['A User']
                              ]
                           ]
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['authors']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_bindir_equals']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['bindir']
                           ]
                           $right: #StringExpr['apps']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['apps']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['bindir']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_bindir_equals_nil']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['bindir']
                           ]
                           $right: #Nil['nil']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['executable']
                           ]
                           $right: #StringExpr['app']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Nil['nil']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['bindir']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #ParcentNotation['%w[app lib/code.rb]']
                                 $recv: #NameExpr['sort']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_extensions_equals_nil']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@a2']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@extensions']
                              $expression: #Nil['nil']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Nil['nil']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['instance_variable_get']
                                 $param: #List[
                                    $expression: #NameExpr['@extensions']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[lib/code.rb]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_test_files_equals_nil']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@a2']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@test_files']
                              $expression: #Nil['nil']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Nil['nil']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['instance_variable_get']
                                 $param: #List[
                                    $expression: #NameExpr['@test_files']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[lib/code.rb]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_executables_equals_nil']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@a2']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@executables']
                              $expression: #Nil['nil']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Nil['nil']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['instance_variable_get']
                                 $param: #List[
                                    $expression: #NameExpr['@executables']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[lib/code.rb]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_extra_rdoc_files_equals_nil']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@a2']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@extra_rdoc_files']
                              $expression: #Nil['nil']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Nil['nil']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['instance_variable_get']
                                 $param: #List[
                                    $expression: #NameExpr['@extra_rdoc_files']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[lib/code.rb]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_build_args']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['ext_spec']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['build_args']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['open']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['build_info_file']
                              ]
                              $expression: #StringExpr['w']
                           ]
                           $body: #Block[
                              $param: #NameExpr['io']
                              $body: #ApplyExpr[
                                 $recv: #NameExpr['io']
                                 $recv: #NameExpr['puts']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['build_args']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['open']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['build_info_file']
                              ]
                              $expression: #StringExpr['w']
                           ]
                           $body: #Block[
                              $param: #NameExpr['io']
                              $body: #ApplyExpr[
                                 $base: #NameExpr['io']
                                 $recv: #NameExpr['puts']
                                 $param: #List[
                                    $expression: #StringExpr['--with-foo-dir=wherever']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[--with-foo-dir=wherever]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['build_args']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_build_extensions']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['ext_spec']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_path_exists']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['extension_dir']
                              ]
                              $expression: #StringExpr['sanity check']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['extensions']
                              ]
                              $expression: #StringExpr['sanity check']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['extconf_rb']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@ext']
                                    $recv: #NameExpr['gem_dir']
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #NameExpr['@ext']
                                       $recv: #NameExpr['extensions']
                                    ]
                                    $recv: #NameExpr['first']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['mkdir_p']
                           $param: #List[
                              $command: #ApplyExpr[
                                 $base: #NameExpr['File']
                                 $recv: #NameExpr['dirname']
                                 $param: #List[
                                    $expression: #NameExpr['extconf_rb']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['open']
                           $param: #List[
                              $expression: #NameExpr['extconf_rb']
                              $expression: #StringExpr['w']
                           ]
                           $body: #Block[
                              $param: #NameExpr['f']
                              $body: #List[
                                 $statement: #LShiftExpr[
                                    $left: #ApplyExpr[
                                       $recv: #NameExpr['f']
                                       $recv: #NameExpr['write']
                                    ]
                                    $right: #MinusExpr[
                                       $expr: #StringExpr['RUBY']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['open']
                                    $param: #List[
                                       $expression: #StringExpr['Makefile']
                                       $expression: #StringExpr['w']
                                    ]
                                    $body: #Block[
                                       $param: #NameExpr['f']
                                       $body: #List[
                                          $statement: #ApplyExpr[
                                             $base: #NameExpr['f']
                                             $recv: #NameExpr['puts']
                                             $param: #List[
                                                $expression: #StringExpr['clean:\\n\\techo clean']
                                             ]
                                          ]
                                          $statement: #ApplyExpr[
                                             $base: #NameExpr['f']
                                             $recv: #NameExpr['puts']
                                             $param: #List[
                                                $expression: #StringExpr['default:\\n\\techo built']
                                             ]
                                          ]
                                          $statement: #ApplyExpr[
                                             $base: #NameExpr['f']
                                             $recv: #NameExpr['puts']
                                             $param: #List[
                                                $expression: #StringExpr['install:\\n\\techo installed']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #NameExpr['RUBY']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@ext']
                           $recv: #NameExpr['build_extensions']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_path_exists']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['extension_dir']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_default_spec_stub_is_marked_default']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['default']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_default_spec']
                              $param: #List[
                                 $expression: #StringExpr['default']
                                 $expression: #IntExpr['2']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_default_gems']
                           $param: #List[
                              $expression: #NameExpr['default']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['stub']
                           $right: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['stubs']
                              ]
                              $recv: #NameExpr['find']
                              $body: #Block[
                                 $param: #NameExpr['s']
                                 $body: #EqExpr[
                                    $left: #ApplyExpr[
                                       $recv: #NameExpr['s']
                                       $recv: #NameExpr['name']
                                    ]
                                    $right: #StringExpr['default']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_predicate']
                           $param: #List[
                              $expression: #NameExpr['stub']
                              $expression: #NameExpr['default_gem?']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['stub']
                           $right: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['find_all_by_name']
                                 $param: #List[
                                    $expression: #StringExpr['default']
                                 ]
                              ]
                              $recv: #NameExpr['first']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_predicate']
                           $param: #List[
                              $expression: #NameExpr['stub']
                              $expression: #NameExpr['default_gem?']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_build_extensions_built']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['ext_spec']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['extensions']
                              ]
                              $expression: #StringExpr['sanity check']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['gem_build_complete']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@ext']
                                    $recv: #NameExpr['extension_dir']
                                 ]
                                 $expression: #StringExpr['gem.build_complete']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['mkdir_p']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['extension_dir']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['touch']
                           $param: #List[
                              $expression: #NameExpr['gem_build_complete']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@ext']
                           $recv: #NameExpr['build_extensions']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['gem_make_out']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@ext']
                                    $recv: #NameExpr['extension_dir']
                                 ]
                                 $expression: #StringExpr['gem_make.out']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_path_exists']
                           $param: #List[
                              $expression: #NameExpr['gem_make_out']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_build_extensions_default_gem']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_default_spec']
                              $param: #List[
                                 $expression: #StringExpr['default']
                                 $expression: #IntExpr['1']
                              ]
                           ]
                        ]
                        $statement: #LShiftExpr[
                           $left: #ApplyExpr[
                              $recv: #NameExpr['spec']
                              $recv: #NameExpr['extensions']
                           ]
                           $right: #StringExpr['extconf.rb']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['extconf_rb']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['spec']
                                    $recv: #NameExpr['gem_dir']
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #NameExpr['spec']
                                       $recv: #NameExpr['extensions']
                                    ]
                                    $recv: #NameExpr['first']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['mkdir_p']
                           $param: #List[
                              $command: #ApplyExpr[
                                 $base: #NameExpr['File']
                                 $recv: #NameExpr['dirname']
                                 $param: #List[
                                    $expression: #NameExpr['extconf_rb']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['open']
                           $param: #List[
                              $expression: #NameExpr['extconf_rb']
                              $expression: #StringExpr['w']
                           ]
                           $body: #Block[
                              $param: #NameExpr['f']
                              $body: #List[
                                 $statement: #LShiftExpr[
                                    $left: #ApplyExpr[
                                       $recv: #NameExpr['f']
                                       $recv: #NameExpr['write']
                                    ]
                                    $right: #MinusExpr[
                                       $expr: #StringExpr['RUBY']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['open']
                                    $param: #List[
                                       $expression: #StringExpr['Makefile']
                                       $expression: #StringExpr['w']
                                    ]
                                    $body: #Block[
                                       $param: #NameExpr['f']
                                       $body: #List[
                                          $statement: #ApplyExpr[
                                             $base: #NameExpr['f']
                                             $recv: #NameExpr['puts']
                                             $param: #List[
                                                $expression: #StringExpr['default:\\n\\techo built']
                                             ]
                                          ]
                                          $statement: #ApplyExpr[
                                             $base: #NameExpr['f']
                                             $recv: #NameExpr['puts']
                                             $param: #List[
                                                $expression: #StringExpr['install:\\n\\techo installed']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #NameExpr['RUBY']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['spec']
                           $recv: #NameExpr['build_extensions']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_path_exists']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['extension_dir']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_build_extensions_error']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['ext_spec']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['extensions']
                              ]
                              $expression: #StringExpr['sanity check']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_raises']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Ext']
                                 ]
                                 $name: #NameExpr['BuildError']
                              ]
                           ]
                           $body: #Block[
                              $body: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['build_extensions']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_build_extensions_extensions_dir_unwritable']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['skip']
                              $param: #List[
                                 $expression: #StringExpr['chmod not supported']
                              ]
                           ]
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['Gem']
                              $recv: #NameExpr['win_platform?']
                           ]
                        ]
                        $statement: #NameExpr['ext_spec']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['extensions']
                              ]
                              $expression: #StringExpr['sanity check']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['extconf_rb']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@ext']
                                    $recv: #NameExpr['gem_dir']
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #NameExpr['@ext']
                                       $recv: #NameExpr['extensions']
                                    ]
                                    $recv: #NameExpr['first']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['mkdir_p']
                           $param: #List[
                              $command: #ApplyExpr[
                                 $base: #NameExpr['File']
                                 $recv: #NameExpr['dirname']
                                 $param: #List[
                                    $expression: #NameExpr['extconf_rb']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['open']
                           $param: #List[
                              $expression: #NameExpr['extconf_rb']
                              $expression: #StringExpr['w']
                           ]
                           $body: #Block[
                              $param: #NameExpr['f']
                              $body: #List[
                                 $statement: #LShiftExpr[
                                    $left: #ApplyExpr[
                                       $recv: #NameExpr['f']
                                       $recv: #NameExpr['write']
                                    ]
                                    $right: #MinusExpr[
                                       $expr: #StringExpr['RUBY']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['open']
                                    $param: #List[
                                       $expression: #StringExpr['Makefile']
                                       $expression: #StringExpr['w']
                                    ]
                                    $body: #Block[
                                       $param: #NameExpr['f']
                                       $body: #List[
                                          $statement: #ApplyExpr[
                                             $base: #NameExpr['f']
                                             $recv: #NameExpr['puts']
                                             $param: #List[
                                                $expression: #StringExpr['clean:\\n\\techo clean']
                                             ]
                                          ]
                                          $statement: #ApplyExpr[
                                             $base: #NameExpr['f']
                                             $recv: #NameExpr['puts']
                                             $param: #List[
                                                $expression: #StringExpr['default:\\n\\techo built']
                                             ]
                                          ]
                                          $statement: #ApplyExpr[
                                             $base: #NameExpr['f']
                                             $recv: #NameExpr['puts']
                                             $param: #List[
                                                $expression: #StringExpr['install:\\n\\techo installed']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #NameExpr['RUBY']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['mkdir_p']
                           $param: #List[
                              $command: #ApplyExpr[
                                 $base: #NameExpr['File']
                                 $recv: #NameExpr['join']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['@ext']
                                       $recv: #NameExpr['base_dir']
                                    ]
                                    $expression: #StringExpr['extensions']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['chmod']
                           $param: #List[
                              $expression: #OctalInteger['0555']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['base_dir']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['chmod']
                           $param: #List[
                              $expression: #OctalInteger['0555']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['File']
                                 $recv: #NameExpr['join']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['@ext']
                                       $recv: #NameExpr['base_dir']
                                    ]
                                    $expression: #StringExpr['extensions']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@ext']
                           $recv: #NameExpr['build_extensions']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_path_exists']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['extension_dir']
                              ]
                           ]
                        ]
                     ]
                     $ensure: #Unless[
                        $cond: #OrExpr[
                           $left: #NameExpr['$DEBUG']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['win_platform?']
                           ]
                        ]
                        $then: #List[
                           $statement: #ApplyExpr[
                              $base: #NameExpr['FileUtils']
                              $recv: #NameExpr['chmod']
                              $param: #List[
                                 $expression: #OctalInteger['0755']
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['File']
                                    $recv: #NameExpr['join']
                                    $param: #List[
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@ext']
                                          $recv: #NameExpr['base_dir']
                                       ]
                                       $expression: #StringExpr['extensions']
                                    ]
                                 ]
                              ]
                           ]
                           $statement: #ApplyExpr[
                              $base: #NameExpr['FileUtils']
                              $recv: #NameExpr['chmod']
                              $param: #List[
                                 $expression: #OctalInteger['0755']
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@ext']
                                    $recv: #NameExpr['base_dir']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_build_extensions_no_extensions_dir_unwritable']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['skip']
                              $param: #List[
                                 $expression: #StringExpr['chmod not supported']
                              ]
                           ]
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['Gem']
                              $recv: #NameExpr['win_platform?']
                           ]
                        ]
                        $statement: #NameExpr['ext_spec']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['extensions']
                              ]
                              $expression: #StringExpr['sanity check']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['extconf_rb']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@ext']
                                    $recv: #NameExpr['gem_dir']
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #NameExpr['@ext']
                                       $recv: #NameExpr['extensions']
                                    ]
                                    $recv: #NameExpr['first']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['mkdir_p']
                           $param: #List[
                              $command: #ApplyExpr[
                                 $base: #NameExpr['File']
                                 $recv: #NameExpr['dirname']
                                 $param: #List[
                                    $expression: #NameExpr['extconf_rb']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['open']
                           $param: #List[
                              $expression: #NameExpr['extconf_rb']
                              $expression: #StringExpr['w']
                           ]
                           $body: #Block[
                              $param: #NameExpr['f']
                              $body: #List[
                                 $statement: #LShiftExpr[
                                    $left: #ApplyExpr[
                                       $recv: #NameExpr['f']
                                       $recv: #NameExpr['write']
                                    ]
                                    $right: #MinusExpr[
                                       $expr: #StringExpr['RUBY']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['open']
                                    $param: #List[
                                       $expression: #StringExpr['Makefile']
                                       $expression: #StringExpr['w']
                                    ]
                                    $body: #Block[
                                       $param: #NameExpr['f']
                                       $body: #List[
                                          $statement: #ApplyExpr[
                                             $base: #NameExpr['f']
                                             $recv: #NameExpr['puts']
                                             $param: #List[
                                                $expression: #StringExpr['clean:\\n\\techo clean']
                                             ]
                                          ]
                                          $statement: #ApplyExpr[
                                             $base: #NameExpr['f']
                                             $recv: #NameExpr['puts']
                                             $param: #List[
                                                $expression: #StringExpr['default:\\n\\techo built']
                                             ]
                                          ]
                                          $statement: #ApplyExpr[
                                             $base: #NameExpr['f']
                                             $recv: #NameExpr['puts']
                                             $param: #List[
                                                $expression: #StringExpr['install:\\n\\techo installed']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #NameExpr['RUBY']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['rm_r']
                           $param: #List[
                              $command: #ApplyExpr[
                                 $base: #NameExpr['File']
                                 $recv: #NameExpr['join']
                                 $param: #List[
                                    $expression: #NameExpr['@gemhome']
                                    $expression: #StringExpr['extensions']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['chmod']
                           $param: #List[
                              $expression: #OctalInteger['0555']
                              $expression: #NameExpr['@gemhome']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@ext']
                           $recv: #NameExpr['build_extensions']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['gem_make_out']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@ext']
                                    $recv: #NameExpr['extension_dir']
                                 ]
                                 $expression: #StringExpr['gem_make.out']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_path_exists']
                           $param: #List[
                              $expression: #NameExpr['gem_make_out']
                           ]
                        ]
                     ]
                     $ensure: #ApplyExpr[
                        $base: #NameExpr['FileUtils']
                        $recv: #NameExpr['chmod']
                        $param: #List[
                           $expression: #OctalInteger['0755']
                           $expression: #NameExpr['@gemhome']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_build_extensions_none']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_path_exists']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['extension_dir']
                              ]
                              $expression: #StringExpr['sanity check']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['extensions']
                              ]
                              $expression: #StringExpr['sanity check']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@a1']
                           $recv: #NameExpr['build_extensions']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_path_exists']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['extension_dir']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_build_extensions_old']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['ext_spec']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['extensions']
                              ]
                              $expression: #StringExpr['sanity check']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@ext']
                              $name: #NameExpr['installed_by_version']
                           ]
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['v']
                              $param: #List[
                                 $expression: #IntExpr['0']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@ext']
                           $recv: #NameExpr['build_extensions']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['gem_make_out']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@ext']
                                    $recv: #NameExpr['extension_dir']
                                 ]
                                 $expression: #StringExpr['gem_make.out']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_path_exists']
                           $param: #List[
                              $expression: #NameExpr['gem_make_out']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_build_extensions_preview']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['ext_spec']
                        $statement: #AssignExpr[
                           $left: #NameExpr['extconf_rb']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@ext']
                                    $recv: #NameExpr['gem_dir']
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #NameExpr['@ext']
                                       $recv: #NameExpr['extensions']
                                    ]
                                    $recv: #NameExpr['first']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['mkdir_p']
                           $param: #List[
                              $command: #ApplyExpr[
                                 $base: #NameExpr['File']
                                 $recv: #NameExpr['dirname']
                                 $param: #List[
                                    $expression: #NameExpr['extconf_rb']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['open']
                           $param: #List[
                              $expression: #NameExpr['extconf_rb']
                              $expression: #StringExpr['w']
                           ]
                           $body: #Block[
                              $param: #NameExpr['f']
                              $body: #List[
                                 $statement: #LShiftExpr[
                                    $left: #ApplyExpr[
                                       $recv: #NameExpr['f']
                                       $recv: #NameExpr['write']
                                    ]
                                    $right: #MinusExpr[
                                       $expr: #StringExpr['RUBY']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['open']
                                    $param: #List[
                                       $expression: #StringExpr['Makefile']
                                       $expression: #StringExpr['w']
                                    ]
                                    $body: #Block[
                                       $param: #NameExpr['f']
                                       $body: #List[
                                          $statement: #ApplyExpr[
                                             $base: #NameExpr['f']
                                             $recv: #NameExpr['puts']
                                             $param: #List[
                                                $expression: #StringExpr['clean:\\n\\techo clean']
                                             ]
                                          ]
                                          $statement: #ApplyExpr[
                                             $base: #NameExpr['f']
                                             $recv: #NameExpr['puts']
                                             $param: #List[
                                                $expression: #StringExpr['default:\\n\\techo built']
                                             ]
                                          ]
                                          $statement: #ApplyExpr[
                                             $base: #NameExpr['f']
                                             $recv: #NameExpr['puts']
                                             $param: #List[
                                                $expression: #StringExpr['install:\\n\\techo installed']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #NameExpr['RUBY']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['extensions']
                              ]
                              $expression: #StringExpr['sanity check']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@ext']
                              $name: #NameExpr['installed_by_version']
                           ]
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['v']
                              $param: #List[
                                 $expression: #StringExpr['2.2.0.preview.2']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@ext']
                           $recv: #NameExpr['build_extensions']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['gem_make_out']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@ext']
                                    $recv: #NameExpr['extension_dir']
                                 ]
                                 $expression: #StringExpr['gem_make.out']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_path_exists']
                           $param: #List[
                              $expression: #NameExpr['gem_make_out']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_contains_requirable_file_eh']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['code_rb']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['gem_dir']
                                 ]
                                 $expression: #StringExpr['lib']
                                 $expression: #StringExpr['code.rb']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['mkdir_p']
                           $param: #List[
                              $command: #ApplyExpr[
                                 $base: #NameExpr['File']
                                 $recv: #NameExpr['dirname']
                                 $param: #List[
                                    $expression: #NameExpr['code_rb']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['touch']
                           $param: #List[
                              $expression: #NameExpr['code_rb']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $command: #ApplyExpr[
                                 $base: #NameExpr['@a1']
                                 $recv: #NameExpr['contains_requirable_file?']
                                 $param: #List[
                                    $expression: #StringExpr['code']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_contains_requirable_file_eh_extension']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['ext_spec']
                        $statement: #MultipleAssign[
                           $left: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['_']
                              $item: #NameExpr['err']
                           ]
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['capture_io']
                              $body: #Block[
                                 $body: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['refute']
                                    $param: #List[
                                       $command: #ApplyExpr[
                                          $base: #NameExpr['@ext']
                                          $recv: #NameExpr['contains_requirable_file?']
                                          $param: #List[
                                             $expression: #StringExpr['nonexistent']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #AddExpr[
                              $left: #StringExpr['Ignoring ext-1 because its extensions are not built.  ']
                              $right: #StringExpr['Try: gem pristine ext --version 1\\n']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['err']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_date']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #Field[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $name: #NameExpr['TODAY']
                           ]
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['date']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_date_equals_date']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['date']
                           ]
                           $right: #ApplyExpr[
                              $recv: #NameExpr['Date']
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #IntExpr['2003']
                                 $expression: #IntExpr['9']
                                 $expression: #IntExpr['17']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['Time']
                                 $recv: #NameExpr['utc']
                                 $param: #List[
                                    $expression: #IntExpr['2003']
                                    $expression: #IntExpr['9']
                                    $expression: #IntExpr['17']
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['date']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_date_equals_string']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['date']
                           ]
                           $right: #StringExpr['2003-09-17']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['Time']
                                 $recv: #NameExpr['utc']
                                 $param: #List[
                                    $expression: #IntExpr['2003']
                                    $expression: #IntExpr['9']
                                    $expression: #IntExpr['17']
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['date']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_date_equals_string_bad']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_raises']
                        $param: #List[
                           $expression: #Field[
                              $recv: #NameExpr['Gem']
                              $name: #NameExpr['InvalidSpecificationException']
                           ]
                        ]
                        $body: #Block[
                           $body: #AssignExpr[
                              $left: #Field[
                                 $base: #NameExpr['@a1']
                                 $name: #NameExpr['date']
                              ]
                              $right: #StringExpr['9/11/2003']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_date_equals_time']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['date']
                           ]
                           $right: #ApplyExpr[
                              $recv: #NameExpr['Time']
                              $recv: #NameExpr['local']
                              $param: #List[
                                 $expression: #IntExpr['2003']
                                 $expression: #IntExpr['9']
                                 $expression: #IntExpr['17']
                                 $expression: #IntExpr['0']
                                 $expression: #IntExpr['0']
                                 $expression: #IntExpr['0']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['Time']
                                 $recv: #NameExpr['utc']
                                 $param: #List[
                                    $expression: #IntExpr['2003']
                                    $expression: #IntExpr['9']
                                    $expression: #IntExpr['17']
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['date']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_date_equals_time_local']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['date']
                           ]
                           $right: #ApplyExpr[
                              $recv: #NameExpr['Time']
                              $recv: #NameExpr['local']
                              $param: #List[
                                 $expression: #IntExpr['2003']
                                 $expression: #IntExpr['9']
                                 $expression: #IntExpr['17']
                                 $expression: #IntExpr['19']
                                 $expression: #IntExpr['50']
                                 $expression: #IntExpr['0']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['Time']
                                 $recv: #NameExpr['utc']
                                 $param: #List[
                                    $expression: #IntExpr['2003']
                                    $expression: #IntExpr['9']
                                    $expression: #IntExpr['17']
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['date']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_date_equals_time_utc']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['date']
                           ]
                           $right: #ApplyExpr[
                              $recv: #NameExpr['Time']
                              $recv: #NameExpr['utc']
                              $param: #List[
                                 $expression: #IntExpr['2003']
                                 $expression: #IntExpr['9']
                                 $expression: #IntExpr['17']
                                 $expression: #IntExpr['19']
                                 $expression: #IntExpr['50']
                                 $expression: #IntExpr['0']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['Time']
                                 $recv: #NameExpr['utc']
                                 $param: #List[
                                    $expression: #IntExpr['2003']
                                    $expression: #IntExpr['9']
                                    $expression: #IntExpr['17']
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['date']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_date_tolerates_hour_sec_zulu']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['date']
                           ]
                           $right: #StringExpr['2012-01-12 11:22:33.4444444 Z']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['Time']
                                 $recv: #NameExpr['utc']
                                 $param: #List[
                                    $expression: #IntExpr['2012']
                                    $expression: #OctalInteger['01']
                                    $expression: #IntExpr['12']
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['date']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_date_tolerates_hour_sec_and_timezone']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['date']
                           ]
                           $right: #StringExpr['2012-01-12 11:22:33.4444444 +02:33']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['Time']
                                 $recv: #NameExpr['utc']
                                 $param: #List[
                                    $expression: #IntExpr['2012']
                                    $expression: #OctalInteger['01']
                                    $expression: #IntExpr['12']
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['0']
                                    $expression: #IntExpr['0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['date']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_dependencies']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_deps']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['@bonobo']
                                    $expression: #NameExpr['@monkey']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@gem']
                                 $recv: #NameExpr['dependencies']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_dependent_gems']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_deps']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@gem']
                                 $recv: #NameExpr['dependent_gems']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['bonobo']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['bonobo']
                                 $expression: #IntExpr['1']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_gem']
                           $param: #List[
                              $expression: #NameExpr['bonobo']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_gem']
                           $param: #List[
                              $expression: #NameExpr['@gem']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #NameExpr['@gem']
                                       $expression: #NameExpr['@bonobo']
                                       $expression: #Array[
                                          $index: #List[
                                             $expression: #NameExpr['bonobo']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['bonobo']
                                 $recv: #NameExpr['dependent_gems']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_doc_dir']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #NameExpr['@gemhome']
                                 $expression: #StringExpr['doc']
                                 $expression: #StringExpr['a-1']
                              ]
                           ]
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['doc_dir']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_doc_dir_type']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #NameExpr['@gemhome']
                                 $expression: #StringExpr['doc']
                                 $expression: #StringExpr['a-1']
                                 $expression: #StringExpr['ri']
                              ]
                           ]
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['doc_dir']
                              $param: #List[
                                 $expression: #StringExpr['ri']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_runtime_dependencies']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_deps']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['@bonobo']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@gem']
                                 $recv: #NameExpr['runtime_dependencies']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_development_dependencies']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_deps']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #NameExpr['@monkey']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@gem']
                                 $recv: #NameExpr['development_dependencies']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_description']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #StringExpr['This is a test description']
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['description']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_eql_eh']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['g1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['gem']
                                 $expression: #IntExpr['1']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['g2']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['gem']
                                 $expression: #IntExpr['1']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['g1']
                              $expression: #NameExpr['g2']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['g1']
                                 $recv: #NameExpr['hash']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['g2']
                                 $recv: #NameExpr['hash']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #TrueExpr['true']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['g1']
                                 $recv: #NameExpr['eql?']
                                 $param: #List[
                                    $expression: #NameExpr['g2']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_eql_eh_extensions']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['dup']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['spec']
                              $name: #NameExpr['extensions']
                           ]
                           $right: #StringExpr['xx']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_operator']
                           $param: #List[
                              $expression: #NameExpr['@a1']
                              $expression: #NameExpr['eql?']
                              $expression: #NameExpr['spec']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_operator']
                           $param: #List[
                              $expression: #NameExpr['spec']
                              $expression: #NameExpr['eql?']
                              $expression: #NameExpr['@a1']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_executables']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['executable']
                           ]
                           $right: #StringExpr['app']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[app]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['executables']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_executable_equals']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['executable']
                           ]
                           $right: #StringExpr['app']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['app']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['executable']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #ParcentNotation['%w[bin/app lib/code.rb]']
                                 $recv: #NameExpr['sort']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_extensions']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #Array[
                              $index: #List[
                                 $expression: #StringExpr['ext/extconf.rb']
                              ]
                           ]
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['ext_spec']
                              $recv: #NameExpr['extensions']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_extension_dir']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #MultipleAssign[
                           $left: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['enable_shared']
                              $item: #Indexer[
                                 $base: #Field[
                                    $recv: #NameExpr['RbConfig']
                                    $name: #NameExpr['CONFIG']
                                 ]
                                 $index: #List[
                                    $expression: #StringExpr['ENABLE_SHARED']
                                 ]
                              ]
                           ]
                           $right: #MultipleRightHandSideExpression[
                              $expression: #Indexer[
                                 $recv: #Field[
                                    $recv: #NameExpr['RbConfig']
                                    $name: #NameExpr['CONFIG']
                                 ]
                                 $index: #List[
                                    $expression: #StringExpr['ENABLE_SHARED']
                                 ]
                              ]
                              $expression: #StringExpr['no']
                           ]
                        ]
                        $statement: #NameExpr['ext_spec']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['extensions']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@ext']
                                    $recv: #NameExpr['base_dir']
                                 ]
                                 $expression: #StringExpr['extensions']
                                 $expression: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Platform']
                                       ]
                                       $recv: #NameExpr['local']
                                    ]
                                    $recv: #NameExpr['to_s']
                                 ]
                                 $expression: #StringExpr[
                                    $inner: #ApplyExpr[
                                       $recv: #NameExpr['Gem']
                                       $recv: #NameExpr['ruby_api_version']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@ext']
                                    $recv: #NameExpr['full_name']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['extension_dir']
                              ]
                           ]
                        ]
                     ]
                     $ensure: #AssignExpr[
                        $left: #Indexer[
                           $base: #Field[
                              $recv: #NameExpr['RbConfig']
                              $name: #NameExpr['CONFIG']
                           ]
                           $index: #List[
                              $expression: #StringExpr['ENABLE_SHARED']
                           ]
                        ]
                        $right: #NameExpr['enable_shared']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_extension_dir_override']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #MultipleAssign[
                           $left: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['enable_shared']
                              $item: #Indexer[
                                 $base: #Field[
                                    $recv: #NameExpr['RbConfig']
                                    $name: #NameExpr['CONFIG']
                                 ]
                                 $index: #List[
                                    $expression: #StringExpr['ENABLE_SHARED']
                                 ]
                              ]
                           ]
                           $right: #MultipleRightHandSideExpression[
                              $expression: #Indexer[
                                 $recv: #Field[
                                    $recv: #NameExpr['RbConfig']
                                    $name: #NameExpr['CONFIG']
                                 ]
                                 $index: #List[
                                    $expression: #StringExpr['ENABLE_SHARED']
                                 ]
                              ]
                              $expression: #StringExpr['no']
                           ]
                        ]
                        $statement: #SClass[
                           $path: #NameExpr['Gem']
                           $body: #BlockExpr[
                              $main: #List[
                                 $statement: #Alias[
                                    $newname: #NameExpr['orig_default_ext_dir_for']
                                    $target: #NameExpr['default_ext_dir_for']
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['remove_method']
                                    $param: #List[
                                       $expression: #NameExpr['default_ext_dir_for']
                                    ]
                                 ]
                                 $statement: #SFuncDecl[
                                    $path: #NameExpr['Gem']
                                    $name: #NameExpr['default_ext_dir_for']
                                    $param: #List[
                                       $param: #Param[
                                          $param: #NameExpr['base_dir']
                                       ]
                                    ]
                                    $body: #BlockExpr[
                                       $main: #StringExpr['elsewhere']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #NameExpr['ext_spec']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['extensions']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #NameExpr['@tempdir']
                                 $expression: #StringExpr['elsewhere']
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@ext']
                                    $recv: #NameExpr['full_name']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['extension_dir']
                              ]
                           ]
                        ]
                     ]
                     $ensure: #List[
                        $statement: #AssignExpr[
                           $left: #Indexer[
                              $base: #Field[
                                 $recv: #NameExpr['RbConfig']
                                 $name: #NameExpr['CONFIG']
                              ]
                              $index: #List[
                                 $expression: #StringExpr['ENABLE_SHARED']
                              ]
                           ]
                           $right: #NameExpr['enable_shared']
                        ]
                        $statement: #SClass[
                           $path: #NameExpr['Gem']
                           $body: #BlockExpr[
                              $main: #List[
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['remove_method']
                                    $param: #List[
                                       $expression: #NameExpr['default_ext_dir_for']
                                    ]
                                 ]
                                 $statement: #Alias[
                                    $newname: #NameExpr['default_ext_dir_for']
                                    $target: #NameExpr['orig_default_ext_dir_for']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_files']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['files']
                           ]
                           $right: #ParcentNotation['%w(files bin/common)']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['test_files']
                           ]
                           $right: #ParcentNotation['%w(test_files bin/common)']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['executables']
                           ]
                           $right: #ParcentNotation['%w(executables common)']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['extra_rdoc_files']
                           ]
                           $right: #ParcentNotation['%w(extra_rdoc_files bin/common)']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['extensions']
                           ]
                           $right: #ParcentNotation['%w(extensions bin/common)']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #ParcentNotation['%w[\n      bin/common\n      bin/executables\n      extensions\n      extra_rdoc_files\n      files\n      test_files\n    ]']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_files_append']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['files']
                           ]
                           $right: #ParcentNotation['%w(files bin/common)']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['test_files']
                           ]
                           $right: #ParcentNotation['%w(test_files bin/common)']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['executables']
                           ]
                           $right: #ParcentNotation['%w(executables common)']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['extra_rdoc_files']
                           ]
                           $right: #ParcentNotation['%w(extra_rdoc_files bin/common)']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['extensions']
                           ]
                           $right: #ParcentNotation['%w(extensions bin/common)']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #ParcentNotation['%w[\n      bin/common\n      bin/executables\n      extensions\n      extra_rdoc_files\n      files\n      test_files\n    ]']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                        $statement: #LShiftExpr[
                           $left: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['files']
                           ]
                           $right: #StringExpr['generated_file.c']
                        ]
                        $statement: #LShiftExpr[
                           $left: #NameExpr['expected']
                           $right: #StringExpr['generated_file.c']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['expected']
                           $recv: #NameExpr['sort!']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_files_duplicate']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['files']
                           ]
                           $right: #ParcentNotation['%w[a b c d b]']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['extra_rdoc_files']
                           ]
                           $right: #ParcentNotation['%w[x y z x]']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@a2']
                           $recv: #NameExpr['normalize']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[a b c d x y z]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[x y z]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['extra_rdoc_files']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_files_extra_rdoc_files']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['files']
                           ]
                           $right: #ParcentNotation['%w[a b c d]']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['extra_rdoc_files']
                           ]
                           $right: #ParcentNotation['%w[x y z]']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@a2']
                           $recv: #NameExpr['normalize']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[a b c d x y z]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_files_non_array']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['files']
                           ]
                           $right: #StringExpr['F']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['test_files']
                           ]
                           $right: #StringExpr['TF']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['executables']
                           ]
                           $right: #StringExpr['X']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['extra_rdoc_files']
                           ]
                           $right: #StringExpr['ERF']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['extensions']
                           ]
                           $right: #StringExpr['E']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[E ERF F TF bin/X]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_files_non_array_pathological']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a1']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@files']
                              $expression: #StringExpr['F']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a1']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@test_files']
                              $expression: #StringExpr['TF']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a1']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@extra_rdoc_files']
                              $expression: #StringExpr['ERF']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a1']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@extensions']
                              $expression: #StringExpr['E']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a1']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@executables']
                              $expression: #StringExpr['X']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[E ERF F TF bin/X]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_kind_of']
                           $param: #List[
                              $expression: #NameExpr['Integer']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['hash']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_for_cache']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a2']
                           $recv: #NameExpr['add_runtime_dependency']
                           $param: #List[
                              $expression: #StringExpr['b']
                              $expression: #StringExpr['1']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['dependencies']
                              ]
                              $recv: #NameExpr['first']
                           ]
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@type']
                              $expression: #Nil['nil']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['required_rubygems_version']
                           ]
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Requirement']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #StringExpr['> 0']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['test_files']
                           ]
                           $right: #ParcentNotation['%w[test/test_b.rb]']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['test_files']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a2']
                              $recv: #NameExpr['for_cache']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['test_files']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['test_files']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_full_gem_path']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['File']
                                 $recv: #NameExpr['join']
                                 $param: #List[
                                    $expression: #NameExpr['@gemhome']
                                    $expression: #StringExpr['gems']
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['@a1']
                                       $recv: #NameExpr['full_name']
                                    ]
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['full_gem_path']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['original_platform']
                           ]
                           $right: #StringExpr['mswin32']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['File']
                                 $recv: #NameExpr['join']
                                 $param: #List[
                                    $expression: #NameExpr['@gemhome']
                                    $expression: #StringExpr['gems']
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['@a1']
                                       $recv: #NameExpr['original_name']
                                    ]
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['full_gem_path']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_full_gem_path_double_slash']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['gemhome']
                           $right: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #NameExpr['@gemhome']
                                 $recv: #NameExpr['to_s']
                              ]
                              $recv: #NameExpr['sub']
                              $param: #List[
                                 $expression: #Regex['/\\w\\//']
                                 $expression: #StringExpr['\\&/']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['loaded_from']
                           ]
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #NameExpr['gemhome']
                                 $expression: #StringExpr['specifications']
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['spec_name']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #NameExpr['@gemhome']
                                 $expression: #StringExpr['gems']
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['full_name']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['full_gem_path']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_full_name']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['a-1']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['full_name']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@a1']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #IntExpr['1']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['platform']
                           ]
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Platform']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #Array[
                                    $index: #List[
                                       $expression: #StringExpr['universal']
                                       $expression: #StringExpr['darwin']
                                       $expression: #Nil['nil']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['a-1-universal-darwin']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['full_name']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@a1']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #IntExpr['1']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a1']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@new_platform']
                              $expression: #StringExpr['mswin32']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['a-1-mswin32']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['full_name']
                              ]
                              $expression: #StringExpr['legacy']
                           ]
                        ]
                        $statement: #IfExpr[
                           $then: #RReturnStmt['return']
                           $cond: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['win_platform?']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@a1']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #IntExpr['1']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['platform']
                           ]
                           $right: #StringExpr['current']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['a-1-x86-darwin-8']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['full_name']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_full_name_windows']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['test_cases']
                           $right: #List[
                              $hash: #Hash[
                                 $key: #StringExpr['i386-mswin32']
                                 $value: #StringExpr['a-1-x86-mswin32-60']
                              ]
                              $hash: #Hash[
                                 $key: #StringExpr['i386-mswin32_80']
                                 $value: #StringExpr['a-1-x86-mswin32-80']
                              ]
                              $hash: #Hash[
                                 $key: #StringExpr['i386-mingw32']
                                 $value: #StringExpr['a-1-x86-mingw32']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['test_cases']
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #MultipleLeftHandSideExpression[
                                 $item: #NameExpr['arch']
                                 $item: #NameExpr['expected']
                              ]
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['@a1']
                                    $right: #ApplyExpr[
                                       $base: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Specification']
                                       ]
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #StringExpr['a']
                                          $expression: #IntExpr['1']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['util_set_arch']
                                    $param: #List[
                                       $expression: #NameExpr['arch']
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['platform']
                                    ]
                                    $right: #StringExpr['current']
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #NameExpr['expected']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['full_name']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_gem_build_complete_path']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['extension_dir']
                                 ]
                                 $expression: #StringExpr['gem.build_complete']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['gem_build_complete_path']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_hash']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['hash']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['hash']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['hash']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['dup']
                                 ]
                                 $recv: #NameExpr['hash']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['hash']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['hash']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_installed_by_version']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['v']
                                 $param: #List[
                                    $expression: #IntExpr['0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['installed_by_version']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['installed_by_version']
                           ]
                           $right: #ApplyExpr[
                              $recv: #NameExpr['Gem']
                              $recv: #NameExpr['rubygems_version']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['Gem']
                                 $recv: #NameExpr['rubygems_version']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['installed_by_version']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_base_dir']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #NameExpr['@gemhome']
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['base_dir']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_base_dir_not_loaded']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a1']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@loaded_from']
                              $expression: #Nil['nil']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['Gem']
                                 $recv: #NameExpr['dir']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['base_dir']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_base_dir_default']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['default_dir']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Specification']
                                    ]
                                    $recv: #NameExpr['default_specifications_dir']
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['spec_name']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a1']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@loaded_from']
                              $expression: #NameExpr['default_dir']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['Gem']
                                 $recv: #NameExpr['default_dir']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['base_dir']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_lib_files']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['files']
                           ]
                           $right: #ParcentNotation['%w[lib/foo.rb Rakefile]']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[lib/foo.rb]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['lib_files']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_license']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #StringExpr['MIT']
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['license']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_licenses']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #Array[
                              $index: #List[
                                 $expression: #StringExpr['MIT']
                              ]
                           ]
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['licenses']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_name']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #StringExpr['a']
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['name']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_original_name']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['a-1']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['full_name']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['platform']
                           ]
                           $right: #StringExpr['i386-linux']
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a1']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@original_platform']
                              $expression: #StringExpr['i386-linux']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['a-1-i386-linux']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['original_name']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_platform']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #Field[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Platform']
                              ]
                              $name: #NameExpr['RUBY']
                           ]
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['platform']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_platform_change_reset_full_name']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['orig_full_name']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['full_name']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['platform']
                           ]
                           $right: #StringExpr['universal-unknown']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_equal']
                           $param: #List[
                              $expression: #NameExpr['orig_full_name']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['full_name']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_platform_change_reset_cache_file']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['orig_cache_file']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['cache_file']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['platform']
                           ]
                           $right: #StringExpr['universal-unknown']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_equal']
                           $param: #List[
                              $expression: #NameExpr['orig_cache_file']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['cache_file']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_platform_equals']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['platform']
                           ]
                           $right: #Nil['nil']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Platform']
                                 ]
                                 $name: #NameExpr['RUBY']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['platform']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['platform']
                           ]
                           $right: #Field[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Platform']
                              ]
                              $name: #NameExpr['RUBY']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Platform']
                                 ]
                                 $name: #NameExpr['RUBY']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['platform']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['test_cases']
                           $right: #List[
                              $hash: #Hash[
                                 $key: #StringExpr['i386-mswin32']
                                 $value: #Array[
                                    $index: #List[
                                       $expression: #StringExpr['x86']
                                       $expression: #StringExpr['mswin32']
                                       $expression: #StringExpr['60']
                                    ]
                                 ]
                              ]
                              $hash: #Hash[
                                 $key: #StringExpr['i386-mswin32_80']
                                 $value: #Array[
                                    $index: #List[
                                       $expression: #StringExpr['x86']
                                       $expression: #StringExpr['mswin32']
                                       $expression: #StringExpr['80']
                                    ]
                                 ]
                              ]
                              $hash: #Hash[
                                 $key: #StringExpr['i386-mingw32']
                                 $value: #Array[
                                    $index: #List[
                                       $expression: #StringExpr['x86']
                                       $expression: #StringExpr['mingw32']
                                       $expression: #Nil['nil']
                                    ]
                                 ]
                              ]
                              $hash: #Hash[
                                 $key: #StringExpr['x86-darwin8']
                                 $value: #Array[
                                    $index: #List[
                                       $expression: #StringExpr['x86']
                                       $expression: #StringExpr['darwin']
                                       $expression: #StringExpr['8']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['test_cases']
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #MultipleLeftHandSideExpression[
                                 $item: #NameExpr['arch']
                                 $item: #NameExpr['expected']
                              ]
                              $body: #List[
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['util_set_arch']
                                    $param: #List[
                                       $expression: #NameExpr['arch']
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['platform']
                                    ]
                                    $right: #Field[
                                       $recv: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Platform']
                                       ]
                                       $name: #NameExpr['CURRENT']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #ApplyExpr[
                                          $recv: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['Platform']
                                          ]
                                          $recv: #NameExpr['new']
                                          $param: #List[
                                             $expression: #NameExpr['expected']
                                          ]
                                       ]
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['platform']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_platform_equals_current']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['platform']
                           ]
                           $right: #Field[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Platform']
                              ]
                              $name: #NameExpr['CURRENT']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Platform']
                                 ]
                                 $recv: #NameExpr['local']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['platform']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Platform']
                                    ]
                                    $recv: #NameExpr['local']
                                 ]
                                 $recv: #NameExpr['to_s']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['original_platform']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_platform_equals_legacy']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['platform']
                           ]
                           $right: #StringExpr['mswin32']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Platform']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #StringExpr['x86-mswin32']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['platform']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['platform']
                           ]
                           $right: #StringExpr['i586-linux']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Platform']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #StringExpr['x86-linux']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['platform']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['platform']
                           ]
                           $right: #StringExpr['powerpc-darwin']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Platform']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #StringExpr['ppc-darwin']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['platform']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_prerelease_spec_adds_required_rubygems_version']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['@prerelease']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['tardis']
                                 $expression: #StringExpr['2.2.0.a']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@prerelease']
                                    $recv: #NameExpr['required_rubygems_version']
                                 ]
                                 $recv: #NameExpr['satisfied_by?']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Version']
                                       ]
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #StringExpr['1.3.1']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@prerelease']
                                    $recv: #NameExpr['required_rubygems_version']
                                 ]
                                 $recv: #NameExpr['satisfied_by?']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Version']
                                       ]
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #StringExpr['1.4.0']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_require_paths']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['enable_shared']
                        $param: #List[
                           $expression: #StringExpr['no']
                        ]
                        $body: #Block[
                           $body: #List[
                              $statement: #NameExpr['ext_spec']
                              $statement: #AssignExpr[
                                 $left: #Field[
                                    $base: #NameExpr['@ext']
                                    $name: #NameExpr['require_paths']
                                 ]
                                 $right: #StringExpr['lib']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #Array[
                                       $index: #List[
                                          $expression: #ApplyExpr[
                                             $recv: #NameExpr['@ext']
                                             $recv: #NameExpr['extension_dir']
                                          ]
                                          $expression: #StringExpr['lib']
                                       ]
                                    ]
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['@ext']
                                       $recv: #NameExpr['require_paths']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_require_paths_default_ext_dir_for']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #SClass[
                           $path: #NameExpr['Gem']
                           $body: #BlockExpr[
                              $main: #List[
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['send']
                                    $param: #List[
                                       $expression: #NameExpr['alias_method']
                                       $expression: #NameExpr['orig_default_ext_dir_for']
                                       $expression: #NameExpr['default_ext_dir_for']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['remove_method']
                                    $param: #List[
                                       $expression: #NameExpr['default_ext_dir_for']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #SFuncDecl[
                           $path: #NameExpr['Gem']
                           $name: #NameExpr['default_ext_dir_for']
                           $param: #List[
                              $param: #Param[
                                 $param: #NameExpr['base_dir']
                              ]
                           ]
                           $body: #BlockExpr[
                              $main: #StringExpr['/foo']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['enable_shared']
                           $param: #List[
                              $expression: #StringExpr['no']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #NameExpr['ext_spec']
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@ext']
                                       $name: #NameExpr['require_paths']
                                    ]
                                    $right: #StringExpr['lib']
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #Array[
                                          $index: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #NameExpr['File']
                                                $recv: #NameExpr['expand_path']
                                                $param: #List[
                                                   $expression: #StringExpr['/foo/ext-1']
                                                ]
                                             ]
                                             $expression: #StringExpr['lib']
                                          ]
                                       ]
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@ext']
                                          $recv: #NameExpr['require_paths']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                     $ensure: #SClass[
                        $path: #NameExpr['Gem']
                        $body: #BlockExpr[
                           $main: #List[
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['send']
                                 $param: #List[
                                    $expression: #NameExpr['remove_method']
                                    $expression: #NameExpr['default_ext_dir_for']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['send']
                                 $param: #List[
                                    $expression: #NameExpr['alias_method']
                                    $expression: #NameExpr['default_ext_dir_for']
                                    $expression: #NameExpr['orig_default_ext_dir_for']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['send']
                                 $param: #List[
                                    $expression: #NameExpr['remove_method']
                                    $expression: #NameExpr['orig_default_ext_dir_for']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_source']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_kind_of']
                        $param: #List[
                           $expression: #Field[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Source']
                              ]
                              $name: #NameExpr['Installed']
                           ]
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['source']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_source_paths']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['ext_spec']
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@ext']
                              $name: #NameExpr['require_paths']
                           ]
                           $right: #ParcentNotation['%w[lib ext foo]']
                        ]
                        $statement: #LShiftExpr[
                           $left: #ApplyExpr[
                              $recv: #NameExpr['@ext']
                              $recv: #NameExpr['extensions']
                           ]
                           $right: #StringExpr['bar/baz']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #ParcentNotation['%w[\n      lib\n      ext\n      foo\n      bar\n    ]']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['source_paths']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_full_require_paths']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['ext_spec']
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@ext']
                              $name: #NameExpr['require_paths']
                           ]
                           $right: #StringExpr['lib']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['File']
                                    $recv: #NameExpr['join']
                                    $param: #List[
                                       $expression: #NameExpr['@gemhome']
                                       $expression: #StringExpr['gems']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@ext']
                                          $recv: #NameExpr['original_name']
                                       ]
                                       $expression: #StringExpr['lib']
                                    ]
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@ext']
                                    $recv: #NameExpr['extension_dir']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['full_require_paths']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_fullpath']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['ext_spec']
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@ext']
                              $name: #NameExpr['require_paths']
                           ]
                           $right: #StringExpr['lib']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['dir']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #NameExpr['@gemhome']
                                 $expression: #StringExpr['gems']
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@ext']
                                    $recv: #NameExpr['original_name']
                                 ]
                                 $expression: #StringExpr['lib']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected_rb']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #NameExpr['dir']
                                 $expression: #StringExpr['code.rb']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['mkdir_p']
                           $param: #List[
                              $expression: #NameExpr['dir']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['touch']
                           $param: #List[
                              $expression: #NameExpr['expected_rb']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['dir']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@ext']
                              $recv: #NameExpr['extension_dir']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['ext']
                           $right: #Indexer[
                              $recv: #Field[
                                 $recv: #NameExpr['RbConfig']
                                 $name: #NameExpr['CONFIG']
                              ]
                              $index: #List[
                                 $expression: #StringExpr['DLEXT']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected_so']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #NameExpr['dir']
                                 $expression: #StringExpr[
                                    $inner: #NameExpr['ext']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['mkdir_p']
                           $param: #List[
                              $expression: #NameExpr['dir']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['touch']
                           $param: #List[
                              $expression: #NameExpr['expected_so']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_nil']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['to_fullpath']
                                 $param: #List[
                                    $expression: #StringExpr['code']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_nil']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['to_fullpath']
                                 $param: #List[
                                    $expression: #StringExpr['code.rb']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_nil']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['to_fullpath']
                                 $param: #List[
                                    $expression: #StringExpr[
                                       $inner: #NameExpr['ext']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_nil']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['to_fullpath']
                                 $param: #List[
                                    $expression: #StringExpr['ext']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_nil']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['to_fullpath']
                                 $param: #List[
                                    $expression: #StringExpr['ext.rb']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_nil']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['to_fullpath']
                                 $param: #List[
                                    $expression: #StringExpr[
                                       $inner: #NameExpr['ext']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@ext']
                           $recv: #NameExpr['activate']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected_rb']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['to_fullpath']
                                 $param: #List[
                                    $expression: #StringExpr['code']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected_rb']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['to_fullpath']
                                 $param: #List[
                                    $expression: #StringExpr['code.rb']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_nil']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['to_fullpath']
                                 $param: #List[
                                    $expression: #StringExpr[
                                       $inner: #NameExpr['ext']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected_so']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['to_fullpath']
                                 $param: #List[
                                    $expression: #StringExpr['ext']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_nil']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['to_fullpath']
                                 $param: #List[
                                    $expression: #StringExpr['ext.rb']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected_so']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['to_fullpath']
                                 $param: #List[
                                    $expression: #StringExpr[
                                       $inner: #NameExpr['ext']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_nil']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['to_fullpath']
                                 $param: #List[
                                    $expression: #StringExpr['notexist']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_fullpath_return_rb_extension_file_when_exist_the_same_name_file']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['ext_spec']
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@ext']
                              $name: #NameExpr['require_paths']
                           ]
                           $right: #StringExpr['lib']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['dir']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #NameExpr['@gemhome']
                                 $expression: #StringExpr['gems']
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@ext']
                                    $recv: #NameExpr['original_name']
                                 ]
                                 $expression: #StringExpr['lib']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected_rb']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #NameExpr['dir']
                                 $expression: #StringExpr['code.rb']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['mkdir_p']
                           $param: #List[
                              $expression: #NameExpr['dir']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['touch']
                           $param: #List[
                              $expression: #NameExpr['expected_rb']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['dir']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@ext']
                              $recv: #NameExpr['extension_dir']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['ext']
                           $right: #Indexer[
                              $recv: #Field[
                                 $recv: #NameExpr['RbConfig']
                                 $name: #NameExpr['CONFIG']
                              ]
                              $index: #List[
                                 $expression: #StringExpr['DLEXT']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected_so']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #NameExpr['dir']
                                 $expression: #StringExpr[
                                    $inner: #NameExpr['ext']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['mkdir_p']
                           $param: #List[
                              $expression: #NameExpr['dir']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['touch']
                           $param: #List[
                              $expression: #NameExpr['expected_so']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@ext']
                           $recv: #NameExpr['activate']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected_rb']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['to_fullpath']
                                 $param: #List[
                                    $expression: #StringExpr['code']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_require_already_activated']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['save_loaded_features']
                        $body: #Block[
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['a1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #StringExpr['1']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['install_specs']
                                 $param: #List[
                                    $expression: #NameExpr['a1']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['a1']
                                 $recv: #NameExpr['activate']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(a-1)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #Array['[]']
                                    $expression: #NameExpr['unresolved_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert']
                                 $param: #List[
                                    $command: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['require']
                                       $param: #List[
                                          $expression: #StringExpr['d']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(a-1)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #Array['[]']
                                    $expression: #NameExpr['unresolved_names']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_require_already_activated_indirect_conflict']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['save_loaded_features']
                        $body: #Block[
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['a1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['b']
                                          $value: #StringExpr['> 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['a2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #StringExpr['2']
                                       $hash: #Hash[
                                          $key: #StringExpr['b']
                                          $value: #StringExpr['> 0']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['1']
                                       $hash: #Hash[
                                          $key: #StringExpr['c']
                                          $value: #StringExpr['>= 1']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['b2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['2']
                                       $hash: #Hash[
                                          $key: #StringExpr['c']
                                          $value: #StringExpr['>= 2']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c1']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['1']
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['c2']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['new_spec']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['2']
                                       $expression: #List[
                                          $hash: #Hash[
                                             $key: #StringExpr['a']
                                             $value: #StringExpr['1']
                                          ]
                                       ]
                                       $expression: #StringExpr['lib/d.rb']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['install_specs']
                                 $param: #List[
                                    $expression: #NameExpr['c1']
                                    $expression: #NameExpr['b1']
                                    $expression: #NameExpr['a1']
                                    $expression: #NameExpr['a2']
                                    $expression: #NameExpr['c2']
                                    $expression: #NameExpr['b2']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['a1']
                                 $recv: #NameExpr['activate']
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['c1']
                                 $recv: #NameExpr['activate']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(a-1 c-1)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #Array[
                                       $index: #List[
                                          $expression: #StringExpr['b (> 0)']
                                       ]
                                    ]
                                    $expression: #NameExpr['unresolved_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert']
                                 $param: #List[
                                    $command: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['require']
                                       $param: #List[
                                          $expression: #StringExpr['d']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #ParcentNotation['%w(a-1 c-1)']
                                    $expression: #NameExpr['loaded_spec_names']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_equal']
                                 $param: #List[
                                    $expression: #Array[
                                       $index: #List[
                                          $expression: #StringExpr['b (> 0)']
                                       ]
                                    ]
                                    $expression: #NameExpr['unresolved_names']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_requirements']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #Array[
                              $index: #List[
                                 $expression: #StringExpr['A working computer']
                              ]
                           ]
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['requirements']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_allowed_push_host']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Nil['nil']
                              $expression: #Indexer[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['metadata']
                                 ]
                                 $index: #List[
                                    $expression: #StringExpr['allowed_push_host']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['https://privategemserver.com']
                              $expression: #Indexer[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@a3']
                                    $recv: #NameExpr['metadata']
                                 ]
                                 $index: #List[
                                    $expression: #StringExpr['allowed_push_host']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_runtime_dependencies_legacy']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['make_spec_c1']
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #NameExpr['@c1']
                              $recv: #NameExpr['runtime_dependencies']
                           ]
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['dep']
                              $body: #ApplyExpr[
                                 $base: #NameExpr['dep']
                                 $recv: #NameExpr['instance_variable_set']
                                 $param: #List[
                                    $expression: #NameExpr['@type']
                                    $expression: #Nil['nil']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #ParcentNotation['%w[rake jabber4r pqa]']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@c1']
                                    $recv: #NameExpr['runtime_dependencies']
                                 ]
                                 $recv: #NameExpr['map']
                                 $body: #Block[
                                    $param: #NameExpr['d']
                                    $body: #ApplyExpr[
                                       $recv: #NameExpr['d']
                                       $recv: #NameExpr['name']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_spaceship_name']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['s1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['1']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['s2']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['b']
                                 $expression: #StringExpr['1']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #MinusExpr[
                                 $expr: #IntExpr['1']
                              ]
                              $expression: #CompExpr[
                                 $left: #NameExpr['s1']
                                 $right: #NameExpr['s2']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #CompExpr[
                                 $left: #NameExpr['s1']
                                 $right: #NameExpr['s1']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['1']
                              $expression: #CompExpr[
                                 $left: #NameExpr['s2']
                                 $right: #NameExpr['s1']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_spaceship_platform']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['s1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['1']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['s2']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['1']
                              ]
                              $body: #Block[
                                 $param: #NameExpr['s']
                                 $body: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['s']
                                       $name: #NameExpr['platform']
                                    ]
                                    $right: #ApplyExpr[
                                       $base: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Platform']
                                       ]
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #StringExpr['x86-my_platform1']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #MinusExpr[
                                 $expr: #IntExpr['1']
                              ]
                              $expression: #CompExpr[
                                 $left: #NameExpr['s1']
                                 $right: #NameExpr['s2']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #CompExpr[
                                 $left: #NameExpr['s1']
                                 $right: #NameExpr['s1']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['1']
                              $expression: #CompExpr[
                                 $left: #NameExpr['s2']
                                 $right: #NameExpr['s1']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_spaceship_version']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['s1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['1']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['s2']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #StringExpr['2']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #MinusExpr[
                                 $expr: #IntExpr['1']
                              ]
                              $expression: #CompExpr[
                                 $left: #NameExpr['s1']
                                 $right: #NameExpr['s2']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['0']
                              $expression: #CompExpr[
                                 $left: #NameExpr['s1']
                                 $right: #NameExpr['s1']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #IntExpr['1']
                              $expression: #CompExpr[
                                 $left: #NameExpr['s2']
                                 $right: #NameExpr['s1']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_spec_file']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #NameExpr['@gemhome']
                                 $expression: #StringExpr['specifications']
                                 $expression: #StringExpr['a-1.gemspec']
                              ]
                           ]
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['spec_file']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_spec_name']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #StringExpr['a-1.gemspec']
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['spec_name']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_summary']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #StringExpr['this is a summary']
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['summary']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_test_files']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['test_file']
                           ]
                           $right: #StringExpr['test/suite.rb']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['test/suite.rb']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['test_files']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_runtime_predicate_true']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a2']
                           $recv: #NameExpr['add_runtime_dependency']
                           $param: #List[
                              $expression: #StringExpr['b']
                              $expression: #StringExpr['1']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_predicate']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@a2']
                                    $recv: #NameExpr['dependencies']
                                 ]
                                 $recv: #NameExpr['first']
                              ]
                              $expression: #NameExpr['runtime?']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['dependencies']
                              ]
                              $recv: #NameExpr['first']
                           ]
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@type']
                              $expression: #Nil['nil']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_predicate']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@a2']
                                    $recv: #NameExpr['dependencies']
                                 ]
                                 $recv: #NameExpr['first']
                              ]
                              $expression: #NameExpr['runtime?']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_runtime_predicate_false']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a2']
                           $recv: #NameExpr['add_development_dependency']
                           $param: #List[
                              $expression: #StringExpr['b']
                              $expression: #StringExpr['1']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_predicate']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['@a2']
                                    $recv: #NameExpr['dependencies']
                                 ]
                                 $recv: #NameExpr['first']
                              ]
                              $expression: #NameExpr['runtime?']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_ruby']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a2']
                           $recv: #NameExpr['add_runtime_dependency']
                           $param: #List[
                              $expression: #StringExpr['b']
                              $expression: #StringExpr['1']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['dependencies']
                              ]
                              $recv: #NameExpr['first']
                           ]
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@type']
                              $expression: #Nil['nil']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['required_rubygems_version']
                           ]
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Requirement']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #StringExpr['> 0']
                              ]
                           ]
                        ]
                        $statement: #LShiftExpr[
                           $left: #ApplyExpr[
                              $recv: #NameExpr['@a2']
                              $recv: #NameExpr['require_paths']
                           ]
                           $right: #StringExpr['other']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['ruby_code']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a2']
                              $recv: #NameExpr['to_ruby']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['# -*- encoding: utf-8 -*-\n# stub: a 2 ruby lib\\0other\n\nGem::Specification.new do |s|\n  s.name = "a".freeze\n  s.version = "2"\n\n  s.required_rubygems_version = Gem::Requirement.new(\\"> 0\\".freeze) if s.respond_to? :required_rubygems_version=\n  s.require_paths = ["lib".freeze, "other".freeze]\n  s.authors = ["A User".freeze]\n  s.date = "#{Gem::Specification::TODAY.strftime "%Y-%m-%d"}"\n  s.description = "This is a test description".freeze\n  s.email = "example@example.com".freeze\n  s.files = ["lib/code.rb".freeze]\n  s.homepage = "http://example.com".freeze\n  s.rubygems_version = "#{Gem::VERSION}".freeze\n  s.summary = "this is a summary".freeze\n\n  if s.respond_to? :specification_version then\n    s.specification_version = #{Gem::Specification::CURRENT_SPECIFICATION_VERSION}\n\n    if Gem::Version.new(Gem::VERSION) >= Gem::Version.new(\'1.2.0\') then\n      s.add_runtime_dependency(%q<b>.freeze, [\\"= 1\\"])\n    else\n      s.add_dependency(%q<b>.freeze, [\\"= 1\\"])\n    end\n  else\n    s.add_dependency(%q<b>.freeze, [\\"= 1\\"])\n  end\nend\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['ruby_code']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['same_spec']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['eval']
                              $param: #List[
                                 $expression: #NameExpr['ruby_code']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['@a2']
                              $expression: #NameExpr['same_spec']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_ruby_for_cache']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a2']
                           $recv: #NameExpr['add_runtime_dependency']
                           $param: #List[
                              $expression: #StringExpr['b']
                              $expression: #StringExpr['1']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #NameExpr['@a2']
                                 $recv: #NameExpr['dependencies']
                              ]
                              $recv: #NameExpr['first']
                           ]
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@type']
                              $expression: #Nil['nil']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['required_rubygems_version']
                           ]
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Requirement']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #StringExpr['> 0']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['installed_by_version']
                           ]
                           $right: #ApplyExpr[
                              $recv: #NameExpr['Gem']
                              $recv: #NameExpr['rubygems_version']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['ruby_code']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a2']
                              $recv: #NameExpr['to_ruby_for_cache']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['# -*- encoding: utf-8 -*-\n# stub: a 2 ruby lib\n\nGem::Specification.new do |s|\n  s.name = "a".freeze\n  s.version = "2"\n\n  s.required_rubygems_version = Gem::Requirement.new(\\"> 0\\".freeze) if s.respond_to? :required_rubygems_version=\n  s.require_paths = ["lib".freeze]\n  s.authors = ["A User".freeze]\n  s.date = "#{Gem::Specification::TODAY.strftime "%Y-%m-%d"}"\n  s.description = "This is a test description".freeze\n  s.email = "example@example.com".freeze\n  s.homepage = "http://example.com".freeze\n  s.rubygems_version = "#{Gem::VERSION}".freeze\n  s.summary = "this is a summary".freeze\n\n  s.installed_by_version = "#{Gem::VERSION}" if s.respond_to? :installed_by_version\n\n  if s.respond_to? :specification_version then\n    s.specification_version = #{Gem::Specification::CURRENT_SPECIFICATION_VERSION}\n\n    if Gem::Version.new(Gem::VERSION) >= Gem::Version.new(\'1.2.0\') then\n      s.add_runtime_dependency(%q<b>.freeze, [\\"= 1\\"])\n    else\n      s.add_dependency(%q<b>.freeze, [\\"= 1\\"])\n    end\n  else\n    s.add_dependency(%q<b>.freeze, [\\"= 1\\"])\n  end\nend\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['ruby_code']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['same_spec']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['eval']
                              $param: #List[
                                 $expression: #NameExpr['ruby_code']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['files']
                           ]
                           $right: #Array['[]']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['@a2']
                              $expression: #NameExpr['same_spec']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_ruby_fancy']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['make_spec_c1']
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@c1']
                              $name: #NameExpr['platform']
                           ]
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Platform']
                              ]
                              $recv: #NameExpr['local']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['ruby_code']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@c1']
                              $recv: #NameExpr['to_ruby']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['local']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Platform']
                              ]
                              $recv: #NameExpr['local']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected_platform']
                           $right: #StringExpr[
                              $inner: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['local']
                                    $recv: #NameExpr['cpu']
                                 ]
                                 $recv: #NameExpr['inspect']
                              ]
                              $inner: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['local']
                                    $recv: #NameExpr['os']
                                 ]
                                 $recv: #NameExpr['inspect']
                              ]
                              $inner: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['local']
                                    $recv: #NameExpr['version']
                                 ]
                                 $recv: #NameExpr['inspect']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['stub_require_paths']
                           $right: #ApplyExpr[
                              $base: #ApplyExpr[
                                 $recv: #NameExpr['@c1']
                                 $recv: #NameExpr['instance_variable_get']
                                 $param: #List[
                                    $expression: #NameExpr['@require_paths']
                                 ]
                              ]
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #StringExpr['\\u0000']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['extensions']
                           $right: #ApplyExpr[
                              $base: #ApplyExpr[
                                 $recv: #NameExpr['@c1']
                                 $recv: #NameExpr['extensions']
                              ]
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #StringExpr['\\u0000']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #HereDocument['# -*- encoding: utf-8 -*-\n# stub: a 1 #{win_platform? ? "x86-mswin32-60" : "x86-darwin-8"} #{stub_require_paths}\n# stub: #{extensions}\n\nGem::Specification.new do |s|\n  s.name = "a".freeze\n  s.version = "1"\n  s.platform = Gem::Platform.new(#{expected_platform})\n\n  s.required_rubygems_version = Gem::Requirement.new(\\">= 0\\".freeze) if s.respond_to? :required_rubygems_version=\n  s.require_paths = ["lib".freeze]\n  s.authors = ["A User".freeze]\n  s.date = "#{Gem::Specification::TODAY.strftime "%Y-%m-%d"}"\n  s.description = "This is a test description".freeze\n  s.email = "example@example.com".freeze\n  s.executables = ["exec".freeze]\n  s.extensions = ["ext/a/extconf.rb".freeze]\n  s.files = ["bin/exec".freeze, "ext/a/extconf.rb".freeze, "lib/code.rb".freeze, "test/suite.rb".freeze]\n  s.homepage = "http://example.com".freeze\n  s.licenses = ["MIT".freeze]\n  s.requirements = ["A working computer".freeze]\n  s.rubyforge_project = "example".freeze\n  s.rubygems_version = "#{Gem::VERSION}".freeze\n  s.summary = "this is a summary".freeze\n  s.test_files = ["test/suite.rb".freeze]\n\n  if s.respond_to? :specification_version then\n    s.specification_version = 4\n\n    if Gem::Version.new(Gem::VERSION) >= Gem::Version.new(\'1.2.0\') then\n      s.add_runtime_dependency(%q<rake>.freeze, [\\"> 0.4\\"])\n      s.add_runtime_dependency(%q<jabber4r>.freeze, [\\"> 0.0.0\\"])\n      s.add_runtime_dependency(%q<pqa>.freeze, [\\"<= 0.6\\", \\"> 0.4\\"])\n    else\n      s.add_dependency(%q<rake>.freeze, [\\"> 0.4\\"])\n      s.add_dependency(%q<jabber4r>.freeze, [\\"> 0.0.0\\"])\n      s.add_dependency(%q<pqa>.freeze, [\\"<= 0.6\\", \\"> 0.4\\"])\n    end\n  else\n    s.add_dependency(%q<rake>.freeze, [\\"> 0.4\\"])\n    s.add_dependency(%q<jabber4r>.freeze, [\\"> 0.0.0\\"])\n    s.add_dependency(%q<pqa>.freeze, [\\"<= 0.6\\", \\"> 0.4\\"])\n  end\nend\n']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['ruby_code']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['same_spec']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['eval']
                              $param: #List[
                                 $expression: #NameExpr['ruby_code']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['@c1']
                              $expression: #NameExpr['same_spec']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_ruby_legacy']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['gemspec1']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Deprecate']
                              ]
                              $recv: #NameExpr['skip_during']
                              $body: #Block[
                                 $body: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['eval']
                                    $param: #List[
                                       $expression: #NameExpr['LEGACY_RUBY_SPEC']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['ruby_code']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['gemspec1']
                              $recv: #NameExpr['to_ruby']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['gemspec2']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['eval']
                              $param: #List[
                                 $expression: #NameExpr['ruby_code']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['gemspec1']
                              $expression: #NameExpr['gemspec2']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_ruby_nested_hash']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['metadata']
                           $right: #List['{}']
                        ]
                        $statement: #AssignExpr[
                           $left: #Indexer[
                              $base: #NameExpr['metadata']
                              $index: #List[
                                 $expression: #NameExpr['metadata']
                              ]
                           ]
                           $right: #NameExpr['metadata']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['metadata']
                           ]
                           $right: #NameExpr['metadata']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['ruby']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a2']
                              $recv: #NameExpr['to_ruby']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_match']
                           $param: #List[
                              $expression: #Regex['%r%^  s\\.metadata = \\{ "%']
                              $expression: #NameExpr['ruby']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_ruby_platform']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a2']
                              $name: #NameExpr['platform']
                           ]
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Platform']
                              ]
                              $recv: #NameExpr['local']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a2']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@original_platform']
                              $expression: #StringExpr['old_platform']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['ruby_code']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a2']
                              $recv: #NameExpr['to_ruby']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['same_spec']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['eval']
                              $param: #List[
                                 $expression: #NameExpr['ruby_code']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['old_platform']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['same_spec']
                                 $recv: #NameExpr['original_platform']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_yaml']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['yaml_str']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['to_yaml']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_match']
                           $param: #List[
                              $expression: #StringExpr['!!null']
                              $expression: #NameExpr['yaml_str']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['same_spec']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['from_yaml']
                              $param: #List[
                                 $expression: #NameExpr['yaml_str']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['@a1']
                              $expression: #NameExpr['same_spec']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_yaml_fancy']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['platform']
                           ]
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Platform']
                              ]
                              $recv: #NameExpr['local']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['yaml_str']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['to_yaml']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['same_spec']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['from_yaml']
                              $param: #List[
                                 $expression: #NameExpr['yaml_str']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Platform']
                                 ]
                                 $recv: #NameExpr['local']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['same_spec']
                                 $recv: #NameExpr['platform']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['@a1']
                              $expression: #NameExpr['same_spec']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_yaml_platform_empty_string']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a1']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@original_platform']
                              $expression: #StringExpr['']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_match']
                           $param: #List[
                              $expression: #Regex['%r|^platform: ruby$|']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['to_yaml']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_yaml_platform_legacy']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['platform']
                           ]
                           $right: #StringExpr['powerpc-darwin7.9.0']
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a1']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@original_platform']
                              $expression: #StringExpr['powerpc-darwin7.9.0']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['yaml_str']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['to_yaml']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['same_spec']
                           $right: #ApplyExpr[
                              $base: #NameExpr['YAML']
                              $recv: #NameExpr['load']
                              $param: #List[
                                 $expression: #NameExpr['yaml_str']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Platform']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #StringExpr['powerpc-darwin7']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['same_spec']
                                 $recv: #NameExpr['platform']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['powerpc-darwin7.9.0']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['same_spec']
                                 $recv: #NameExpr['original_platform']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_to_yaml_platform_nil']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $base: #NameExpr['@a1']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@original_platform']
                              $expression: #Nil['nil']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_match']
                           $param: #List[
                              $expression: #Regex['%r|^platform: ruby$|']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['to_yaml']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['@a1']
                                       $recv: #NameExpr['validate']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['x']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['s']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['s']
                        $recv: #NameExpr['gsub']
                        $param: #List[
                           $expression: #Regex['/xxx/']
                           $expression: #StringExpr['']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['w']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['x']
                        $param: #List[
                           $expression: #StringExpr['WARxxxNING']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['t']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['x']
                        $param: #List[
                           $expression: #StringExpr['TOxxxDO']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['f']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['x']
                        $param: #List[
                           $expression: #StringExpr['FxxxIXME']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_authors']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['authors']
                                    ]
                                    $right: #Array[
                                       $index: #List[
                                          $expression: #StringExpr['']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['use_ui']
                                    $param: #List[
                                       $expression: #NameExpr['@ui']
                                    ]
                                    $body: #Block[
                                       $body: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['validate']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_match']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['w']
                                       ]
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@ui']
                                          $recv: #NameExpr['error']
                                       ]
                                       $expression: #StringExpr['error']
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['authors']
                                    ]
                                    $right: #Array[
                                       $index: #List[
                                          $expression: #ApplyExpr[
                                             $recv: #NameExpr['Object']
                                             $recv: #NameExpr['new']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #Array['[]']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['authors']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['e']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['assert_raises']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                       ]
                                       $body: #Block[
                                          $body: #ApplyExpr[
                                             $recv: #NameExpr['@a1']
                                             $recv: #NameExpr['validate']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #StringExpr['authors may not be empty']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['e']
                                          $recv: #NameExpr['message']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['authors']
                                    ]
                                    $right: #Array[
                                       $index: #List[
                                          $expression: #StringExpr[
                                             $inner: #NameExpr['f']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['e']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['assert_raises']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                       ]
                                       $body: #Block[
                                          $body: #ApplyExpr[
                                             $recv: #NameExpr['@a1']
                                             $recv: #NameExpr['validate']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #ParcentNotation['%{"#{f}" or "#{t}" is not an author}']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['e']
                                          $recv: #NameExpr['message']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['authors']
                                    ]
                                    $right: #Array[
                                       $index: #List[
                                          $expression: #StringExpr[
                                             $inner: #NameExpr['t']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['e']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['assert_raises']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                       ]
                                       $body: #Block[
                                          $body: #ApplyExpr[
                                             $recv: #NameExpr['@a1']
                                             $recv: #NameExpr['validate']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #ParcentNotation['%{"#{f}" or "#{t}" is not an author}']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['e']
                                          $recv: #NameExpr['message']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_autorequire']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['autorequire']
                                    ]
                                    $right: #StringExpr['code']
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['use_ui']
                                    $param: #List[
                                       $expression: #NameExpr['@ui']
                                    ]
                                    $body: #Block[
                                       $body: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['validate']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_match']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['w']
                                       ]
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@ui']
                                          $recv: #NameExpr['error']
                                       ]
                                       $expression: #StringExpr['error']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_dependencies']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_runtime_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['>= 1.0.rc1']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_development_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['>= 2.0.rc2']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_runtime_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['d']
                                       $expression: #StringExpr['~> 1.2.3']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_runtime_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['e']
                                       $expression: #StringExpr['~> 1.2.3.4']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_runtime_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['g']
                                       $expression: #StringExpr['~> 1.2.3']
                                       $expression: #StringExpr['>= 1.2.3.4']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_runtime_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['h']
                                       $expression: #StringExpr['>= 1.2.3']
                                       $expression: #StringExpr['<= 2']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_runtime_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['i']
                                       $expression: #StringExpr['>= 1.2']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_runtime_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['j']
                                       $expression: #StringExpr['>= 1.2.3']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_runtime_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['k']
                                       $expression: #StringExpr['> 1.2']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_runtime_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['l']
                                       $expression: #StringExpr['> 1.2.3']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_runtime_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['m']
                                       $expression: #StringExpr['~> 2.1.0']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_runtime_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['n']
                                       $expression: #StringExpr['~> 0.1.0']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['use_ui']
                                    $param: #List[
                                       $expression: #NameExpr['@ui']
                                    ]
                                    $body: #Block[
                                       $body: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['validate']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['expected']
                                    $right: #HereDocument['#{w}:  prerelease dependency on b (>= 1.0.rc1) is not recommended\n#{w}:  prerelease dependency on c (>= 2.0.rc2, development) is not recommended\n#{w}:  pessimistic dependency on d (~> 1.2.3) may be overly strict\n  if d is semantically versioned, use:\n    add_runtime_dependency \'d\', \'~> 1.2\', \'>= 1.2.3\'\n#{w}:  pessimistic dependency on e (~> 1.2.3.4) may be overly strict\n  if e is semantically versioned, use:\n    add_runtime_dependency \'e\', \'~> 1.2\', \'>= 1.2.3.4\'\n#{w}:  open-ended dependency on i (>= 1.2) is not recommended\n  if i is semantically versioned, use:\n    add_runtime_dependency \'i\', \'~> 1.2\'\n#{w}:  open-ended dependency on j (>= 1.2.3) is not recommended\n  if j is semantically versioned, use:\n    add_runtime_dependency \'j\', \'~> 1.2\', \'>= 1.2.3\'\n#{w}:  open-ended dependency on k (> 1.2) is not recommended\n  if k is semantically versioned, use:\n    add_runtime_dependency \'k\', \'~> 1.2\', \'> 1.2\'\n#{w}:  open-ended dependency on l (> 1.2.3) is not recommended\n  if l is semantically versioned, use:\n    add_runtime_dependency \'l\', \'~> 1.2\', \'> 1.2.3\'\n#{w}:  pessimistic dependency on m (~> 2.1.0) may be overly strict\n  if m is semantically versioned, use:\n    add_runtime_dependency \'m\', \'~> 2.1\', \'>= 2.1.0\'\n#{w}:  See http://guides.rubygems.org/specification-reference/ for help\n']
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #NameExpr['expected']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@ui']
                                          $recv: #NameExpr['error']
                                       ]
                                       $expression: #StringExpr['warning']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_dependencies_duplicates']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_runtime_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['~> 1.2']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_runtime_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['>= 1.2.3']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_development_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['~> 1.2']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_development_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['c']
                                       $expression: #StringExpr['>= 1.2.3']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['use_ui']
                                    $param: #List[
                                       $expression: #NameExpr['@ui']
                                    ]
                                    $body: #Block[
                                       $body: #List[
                                          $statement: #AssignExpr[
                                             $left: #NameExpr['e']
                                             $right: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['assert_raises']
                                                $param: #List[
                                                   $expression: #Field[
                                                      $recv: #NameExpr['Gem']
                                                      $name: #NameExpr['InvalidSpecificationException']
                                                   ]
                                                ]
                                                $body: #Block[
                                                   $body: #ApplyExpr[
                                                      $recv: #NameExpr['@a1']
                                                      $recv: #NameExpr['validate']
                                                   ]
                                                ]
                                             ]
                                          ]
                                          $statement: #AssignExpr[
                                             $left: #NameExpr['expected']
                                             $right: #HereDocument['duplicate dependency on b (>= 1.2.3), (~> 1.2) use:\n    add_runtime_dependency \'b\', \'>= 1.2.3\', \'~> 1.2\'\nduplicate dependency on c (>= 1.2.3, development), (~> 1.2) use:\n    add_development_dependency \'c\', \'>= 1.2.3\', \'~> 1.2\'\n']
                                          ]
                                          $statement: #ApplyExpr[
                                             #Self['self']
                                             $recv: #NameExpr['assert_equal']
                                             $param: #List[
                                                $expression: #NameExpr['expected']
                                                $expression: #ApplyExpr[
                                                   $recv: #NameExpr['e']
                                                   $recv: #NameExpr['message']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #HereDocument['#{w}:  See http://guides.rubygems.org/specification-reference/ for help\n']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_dependencies_allowed_duplicates']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_runtime_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['~> 1.2']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_development_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['= 1.2.3']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['use_ui']
                                    $param: #List[
                                       $expression: #NameExpr['@ui']
                                    ]
                                    $body: #Block[
                                       $body: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['validate']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #StringExpr['']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@ui']
                                          $recv: #NameExpr['error']
                                       ]
                                       $expression: #StringExpr['warning']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_prerelease_dependencies_with_prerelease_version']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['version']
                                    ]
                                    $right: #StringExpr['1.0.0.beta.1']
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['@a1']
                                    $recv: #NameExpr['add_runtime_dependency']
                                    $param: #List[
                                       $expression: #StringExpr['b']
                                       $expression: #StringExpr['~> 1.2.0.beta.1']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['use_ui']
                                    $param: #List[
                                       $expression: #NameExpr['@ui']
                                    ]
                                    $body: #Block[
                                       $body: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['validate']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #StringExpr['']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@ui']
                                          $recv: #NameExpr['error']
                                       ]
                                       $expression: #StringExpr['warning']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_description']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['description']
                                    ]
                                    $right: #StringExpr['']
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['use_ui']
                                    $param: #List[
                                       $expression: #NameExpr['@ui']
                                    ]
                                    $body: #Block[
                                       $body: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['validate']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['@ui']
                                    $right: #ApplyExpr[
                                       $recv: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['MockGemUi']
                                       ]
                                       $recv: #NameExpr['new']
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['summary']
                                    ]
                                    $right: #StringExpr['this is my summary']
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['description']
                                    ]
                                    $right: #ApplyExpr[
                                       $recv: #NameExpr['@a1']
                                       $recv: #NameExpr['summary']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['use_ui']
                                    $param: #List[
                                       $expression: #NameExpr['@ui']
                                    ]
                                    $body: #Block[
                                       $body: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['validate']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_match']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['w']
                                       ]
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@ui']
                                          $recv: #NameExpr['error']
                                       ]
                                       $expression: #StringExpr['error']
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['description']
                                    ]
                                    $right: #StringExpr[
                                       $inner: #NameExpr['f']
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['e']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['assert_raises']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                       ]
                                       $body: #Block[
                                          $body: #ApplyExpr[
                                             $recv: #NameExpr['@a1']
                                             $recv: #NameExpr['validate']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #ParcentNotation['%{"#{f}" or "#{t}" is not a description}']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['e']
                                          $recv: #NameExpr['message']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['description']
                                    ]
                                    $right: #StringExpr[
                                       $inner: #NameExpr['t']
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['e']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['assert_raises']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                       ]
                                       $body: #Block[
                                          $body: #ApplyExpr[
                                             $recv: #NameExpr['@a1']
                                             $recv: #NameExpr['validate']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #ParcentNotation['%{"#{f}" or "#{t}" is not a description}']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['e']
                                          $recv: #NameExpr['message']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_email']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['email']
                                    ]
                                    $right: #StringExpr['']
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['use_ui']
                                    $param: #List[
                                       $expression: #NameExpr['@ui']
                                    ]
                                    $body: #Block[
                                       $body: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['validate']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_match']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['w']
                                       ]
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@ui']
                                          $recv: #NameExpr['error']
                                       ]
                                       $expression: #StringExpr['error']
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['email']
                                    ]
                                    $right: #ApplyExpr[
                                       $recv: #StringExpr['FIxxxXME (your e-mail)']
                                       $recv: #NameExpr['sub']
                                       $param: #List[
                                          $expression: #Regex['/xxx/']
                                          $expression: #StringExpr['']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['e']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['assert_raises']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                       ]
                                       $body: #Block[
                                          $body: #ApplyExpr[
                                             $recv: #NameExpr['@a1']
                                             $recv: #NameExpr['validate']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #ParcentNotation['%{"#{f}" or "#{t}" is not an email}']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['e']
                                          $recv: #NameExpr['message']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['email']
                                    ]
                                    $right: #StringExpr[
                                       $inner: #NameExpr['t']
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['e']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['assert_raises']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                       ]
                                       $body: #Block[
                                          $body: #ApplyExpr[
                                             $recv: #NameExpr['@a1']
                                             $recv: #NameExpr['validate']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #ParcentNotation['%{"#{f}" or "#{t}" is not an email}']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['e']
                                          $recv: #NameExpr['message']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_empty']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['e']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['assert_raises']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                              ]
                              $body: #Block[
                                 $body: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Specification']
                                       ]
                                       $recv: #NameExpr['new']
                                    ]
                                    $recv: #NameExpr['validate']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['missing value for attribute name']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['e']
                                 $recv: #NameExpr['message']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_error']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_raises']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['InvalidSpecificationException']
                              ]
                           ]
                           $body: #Block[
                              $body: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['use_ui']
                                 $param: #List[
                                    $expression: #NameExpr['@ui']
                                 ]
                                 $body: #Block[
                                    $body: #ApplyExpr[
                                       $recv: #ApplyExpr[
                                          $recv: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['Specification']
                                          ]
                                          $recv: #NameExpr['new']
                                       ]
                                       $recv: #NameExpr['validate']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_match']
                           $param: #List[
                              $expression: #StringExpr['See http://guides.rubygems.org/specification-reference/ for help']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ui']
                                 $recv: #NameExpr['error']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_executables']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['mkdir_p']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['File']
                                 $recv: #NameExpr['join']
                                 $param: #List[
                                    $expression: #NameExpr['@tempdir']
                                    $expression: #StringExpr['bin']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['File']
                           $recv: #NameExpr['open']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['File']
                                 $recv: #NameExpr['join']
                                 $param: #List[
                                    $expression: #NameExpr['@tempdir']
                                    $expression: #StringExpr['bin']
                                    $expression: #StringExpr['exec']
                                 ]
                              ]
                              $expression: #StringExpr['w']
                           ]
                           $body: #Block[
                              $body: #Empty['']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['mkdir_p']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['File']
                                 $recv: #NameExpr['join']
                                 $param: #List[
                                    $expression: #NameExpr['@tempdir']
                                    $expression: #StringExpr['exec']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['use_ui']
                           $param: #List[
                              $expression: #NameExpr['@ui']
                           ]
                           $body: #Block[
                              $body: #ApplyExpr[
                                 $base: #NameExpr['Dir']
                                 $recv: #NameExpr['chdir']
                                 $param: #List[
                                    $expression: #NameExpr['@tempdir']
                                 ]
                                 $body: #Block[
                                    $body: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['assert']
                                       $param: #List[
                                          $expression: #ApplyExpr[
                                             $recv: #NameExpr['@a1']
                                             $recv: #NameExpr['validate']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ParcentNotation['%w[exec]']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['executables']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ui']
                                 $recv: #NameExpr['output']
                              ]
                              $expression: #StringExpr['output']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_match']
                           $param: #List[
                              $expression: #StringExpr[
                                 $inner: #NameExpr['w']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ui']
                                 $recv: #NameExpr['error']
                              ]
                              $expression: #StringExpr['error']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_empty_require_paths']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #IfExpr[
                        $cond: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['win_platform?']
                        ]
                        $then: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['skip']
                           $param: #List[
                              $expression: #StringExpr['test_validate_empty_require_paths skipped on MS Windows (symlink)']
                           ]
                        ]
                        $else: #List[
                           $statement: #NameExpr['util_setup_validate']
                           $statement: #AssignExpr[
                              $left: #Field[
                                 $base: #NameExpr['@a1']
                                 $name: #NameExpr['require_paths']
                              ]
                              $right: #Array['[]']
                           ]
                           $statement: #AssignExpr[
                              $left: #NameExpr['e']
                              $right: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['assert_raises']
                                 $param: #List[
                                    $expression: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['InvalidSpecificationException']
                                    ]
                                 ]
                                 $body: #Block[
                                    $body: #ApplyExpr[
                                       $recv: #NameExpr['@a1']
                                       $recv: #NameExpr['validate']
                                    ]
                                 ]
                              ]
                           ]
                           $statement: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['assert_equal']
                              $param: #List[
                                 $expression: #StringExpr['specification must have at least one require_path']
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['e']
                                    $recv: #NameExpr['message']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_files']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['skip']
                              $param: #List[
                                 $expression: #StringExpr['test_validate_files skipped on MS Windows (symlink)']
                              ]
                           ]
                           $cond: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['win_platform?']
                           ]
                        ]
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #AddAssign[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['files']
                           ]
                           $right: #Array[
                              $index: #List[
                                 $expression: #StringExpr['lib']
                                 $expression: #StringExpr['lib2']
                              ]
                           ]
                        ]
                        $statement: #LShiftExpr[
                           $left: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['extensions']
                           ]
                           $right: #StringExpr['ext/a/extconf.rb']
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #Unless[
                                    $then: #ApplyExpr[
                                       $base: #NameExpr['FileUtils']
                                       $recv: #NameExpr['ln_s']
                                       $param: #List[
                                          $expression: #StringExpr['lib/code.rb']
                                          $expression: #StringExpr['lib2']
                                       ]
                                    ]
                                    $cond: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['vc_windows?']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['use_ui']
                                    $param: #List[
                                       $expression: #NameExpr['@ui']
                                    ]
                                    $body: #Block[
                                       $body: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['validate']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_match']
                                    $param: #List[
                                       $expression: #StringExpr['WARNING:  lib2 is a symlink, which is not supported on all platforms']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@ui']
                                          $recv: #NameExpr['error']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #ParcentNotation['%w[bin/exec ext/a/extconf.rb lib/code.rb lib2 test/suite.rb]']
                                 $recv: #NameExpr['sort']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['files']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_files_recursive']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['touch']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['file_name']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['files']
                           ]
                           $right: #Array[
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['file_name']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['e']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['assert_raises']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                              ]
                              $body: #Block[
                                 $body: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['validate']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr[
                                 $inner: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['full_name']
                                 ]
                                 $inner: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['file_name']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['e']
                                 $recv: #NameExpr['message']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_homepage']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['homepage']
                                    ]
                                    $right: #Nil['nil']
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['use_ui']
                                    $param: #List[
                                       $expression: #NameExpr['@ui']
                                    ]
                                    $body: #Block[
                                       $body: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['validate']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_match']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['w']
                                       ]
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@ui']
                                          $recv: #NameExpr['error']
                                       ]
                                       $expression: #StringExpr['error']
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['@ui']
                                    $right: #ApplyExpr[
                                       $recv: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['MockGemUi']
                                       ]
                                       $recv: #NameExpr['new']
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['homepage']
                                    ]
                                    $right: #StringExpr['']
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['use_ui']
                                    $param: #List[
                                       $expression: #NameExpr['@ui']
                                    ]
                                    $body: #Block[
                                       $body: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['validate']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_match']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['w']
                                       ]
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@ui']
                                          $recv: #NameExpr['error']
                                       ]
                                       $expression: #StringExpr['error']
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['homepage']
                                    ]
                                    $right: #StringExpr['over at my cool site']
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['e']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['assert_raises']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                       ]
                                       $body: #Block[
                                          $body: #ApplyExpr[
                                             $recv: #NameExpr['@a1']
                                             $recv: #NameExpr['validate']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #StringExpr['"over at my cool site" is not a URI']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['e']
                                          $recv: #NameExpr['message']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_license']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['use_ui']
                           $param: #List[
                              $expression: #NameExpr['@ui']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #NameExpr['@a1']
                                       $recv: #NameExpr['licenses']
                                    ]
                                    $recv: #NameExpr['clear']
                                 ]
                                 $statement: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['validate']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_match']
                           $param: #List[
                              $expression: #HereDocument['WARNING:  licenses is empty, but is recommended.  Use a license identifier from\nhttp://spdx.org/licenses or \'Nonstandard\' for a nonstandard license.\n']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_license_values']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['use_ui']
                           $param: #List[
                              $expression: #NameExpr['@ui']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['licenses']
                                    ]
                                    $right: #Array[
                                       $index: #List[
                                          $expression: #StringExpr['BSD']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['validate']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_match']
                           $param: #List[
                              $expression: #HereDocument['WARNING:  license value \'BSD\' is invalid.  Use a license identifier from\nhttp://spdx.org/licenses or \'Nonstandard\' for a nonstandard license.\n']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_license_values_plus']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['use_ui']
                           $param: #List[
                              $expression: #NameExpr['@ui']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['licenses']
                                    ]
                                    $right: #Array[
                                       $index: #List[
                                          $expression: #StringExpr['GPL-2.0+']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['validate']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ui']
                                 $recv: #NameExpr['error']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_license_values_with']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['use_ui']
                           $param: #List[
                              $expression: #NameExpr['@ui']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['licenses']
                                    ]
                                    $right: #Array[
                                       $index: #List[
                                          $expression: #StringExpr['GPL-2.0+ WITH Autoconf-exception-2.0']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['validate']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_empty']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ui']
                                 $recv: #NameExpr['error']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_license_with_nonsense_suffix']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['use_ui']
                           $param: #List[
                              $expression: #NameExpr['@ui']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['licenses']
                                    ]
                                    $right: #Array[
                                       $index: #List[
                                          $expression: #StringExpr['GPL-2.0+ FOO']
                                          $expression: #StringExpr['GPL-2.0 FOO']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['validate']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_match']
                           $param: #List[
                              $expression: #HereDocument['WARNING:  license value \'GPL-2.0+ FOO\' is invalid.  Use a license identifier from\nhttp://spdx.org/licenses or \'Nonstandard\' for a nonstandard license.\n']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_match']
                           $param: #List[
                              $expression: #HereDocument['WARNING:  license value \'GPL-2.0 FOO\' is invalid.  Use a license identifier from\nhttp://spdx.org/licenses or \'Nonstandard\' for a nonstandard license.\n']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_license_gives_suggestions']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['use_ui']
                           $param: #List[
                              $expression: #NameExpr['@ui']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['licenses']
                                    ]
                                    $right: #Array[
                                       $index: #List[
                                          $expression: #StringExpr['ruby']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['validate']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_match']
                           $param: #List[
                              $expression: #HereDocument['WARNING:  license value \'ruby\' is invalid.  Use a license identifier from\nhttp://spdx.org/licenses or \'Nonstandard\' for a nonstandard license.\nDid you mean \'Ruby\'?\n']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_name']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #AssignExpr[
                           $left: #NameExpr['e']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['assert_raises']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                              ]
                              $body: #Block[
                                 $body: #List[
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['@a1']
                                          $name: #NameExpr['name']
                                       ]
                                       $right: #NameExpr['json']
                                    ]
                                    $statement: #ApplyExpr[
                                       $recv: #NameExpr['@a1']
                                       $recv: #NameExpr['validate']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr['invalid value for attribute name: ":json"']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['e']
                                 $recv: #NameExpr['message']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_non_nil']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert']
                                    $param: #List[
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['validate']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Specification']
                                       ]
                                       $recv: #NameExpr['non_nil_attributes']
                                    ]
                                    $recv: #NameExpr['each']
                                    $body: #Block[
                                       $param: #NameExpr['name']
                                       $body: #List[
                                          $statement: #IfExpr[
                                             $then: #Next['next']
                                             $cond: #EqExpr[
                                                $left: #NameExpr['name']
                                                $right: #NameExpr['files']
                                             ]
                                          ]
                                          $statement: #AssignExpr[
                                             $left: #NameExpr['spec']
                                             $right: #ApplyExpr[
                                                $recv: #NameExpr['@a1']
                                                $recv: #NameExpr['dup']
                                             ]
                                          ]
                                          $statement: #ApplyExpr[
                                             $base: #NameExpr['spec']
                                             $recv: #NameExpr['instance_variable_set']
                                             $param: #List[
                                                $expression: #StringExpr[
                                                   $inner: #NameExpr['name']
                                                ]
                                                $expression: #Nil['nil']
                                             ]
                                          ]
                                          $statement: #AssignExpr[
                                             $left: #NameExpr['e']
                                             $right: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['assert_raises']
                                                $param: #List[
                                                   $expression: #Field[
                                                      $recv: #NameExpr['Gem']
                                                      $name: #NameExpr['InvalidSpecificationException']
                                                   ]
                                                ]
                                                $body: #Block[
                                                   $body: #ApplyExpr[
                                                      $recv: #NameExpr['spec']
                                                      $recv: #NameExpr['validate']
                                                   ]
                                                ]
                                             ]
                                          ]
                                          $statement: #ApplyExpr[
                                             #Self['self']
                                             $recv: #NameExpr['assert_match']
                                             $param: #List[
                                                $expression: #Regex['%r%^#{name}%']
                                                $expression: #ApplyExpr[
                                                   $recv: #NameExpr['e']
                                                   $recv: #NameExpr['message']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_permissions']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['skip']
                              $param: #List[
                                 $expression: #StringExpr['chmod not supported']
                              ]
                           ]
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['Gem']
                              $recv: #NameExpr['win_platform?']
                           ]
                        ]
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['File']
                                    $recv: #NameExpr['chmod']
                                    $param: #List[
                                       $expression: #OctalInteger['0640']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['File']
                                          $recv: #NameExpr['join']
                                          $param: #List[
                                             $expression: #StringExpr['lib']
                                             $expression: #StringExpr['code.rb']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['File']
                                    $recv: #NameExpr['chmod']
                                    $param: #List[
                                       $expression: #OctalInteger['0640']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['File']
                                          $recv: #NameExpr['join']
                                          $param: #List[
                                             $expression: #StringExpr['bin']
                                             $expression: #StringExpr['exec']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['use_ui']
                                    $param: #List[
                                       $expression: #NameExpr['@ui']
                                    ]
                                    $body: #Block[
                                       $body: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['validate']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_match']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['w']
                                       ]
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@ui']
                                          $recv: #NameExpr['error']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_match']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['w']
                                       ]
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@ui']
                                          $recv: #NameExpr['error']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_match']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['w']
                                       ]
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@ui']
                                          $recv: #NameExpr['error']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_permissions_of_missing_file_non_packaging']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['skip']
                              $param: #List[
                                 $expression: #StringExpr['chmod not supported']
                              ]
                           ]
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['Gem']
                              $recv: #NameExpr['win_platform?']
                           ]
                        ]
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['File']
                                    $recv: #NameExpr['delete']
                                    $param: #List[
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['File']
                                          $recv: #NameExpr['join']
                                          $param: #List[
                                             $expression: #StringExpr['lib']
                                             $expression: #StringExpr['code.rb']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['use_ui']
                                    $param: #List[
                                       $expression: #NameExpr['@ui']
                                    ]
                                    $body: #Block[
                                       $body: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['assert']
                                          $param: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #NameExpr['@a1']
                                                $recv: #NameExpr['validate']
                                                $param: #List[
                                                   $expression: #FalseExpr['false']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_platform_legacy']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['platform']
                                    ]
                                    $right: #StringExpr['mswin32']
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert']
                                    $param: #List[
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['validate']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['platform']
                                    ]
                                    $right: #StringExpr['i586-linux']
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert']
                                    $param: #List[
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['validate']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['platform']
                                    ]
                                    $right: #StringExpr['powerpc-darwin']
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert']
                                    $param: #List[
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['validate']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_rubygems_version']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['rubygems_version']
                           ]
                           $right: #StringExpr['3']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['e']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['assert_raises']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                              ]
                              $body: #Block[
                                 $body: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['validate']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #StringExpr[
                                 $inner: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['VERSION']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['e']
                                 $recv: #NameExpr['message']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_specification_version']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['specification_version']
                                    ]
                                    $right: #StringExpr['1.0']
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['e']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['assert_raises']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                       ]
                                       $body: #Block[
                                          $body: #ApplyExpr[
                                             #Self['self']
                                             $recv: #NameExpr['use_ui']
                                             $param: #List[
                                                $expression: #NameExpr['@ui']
                                             ]
                                             $body: #Block[
                                                $body: #ApplyExpr[
                                                   $recv: #NameExpr['@a1']
                                                   $recv: #NameExpr['validate']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['err']
                                    $right: #StringExpr['specification_version must be an Integer (did you mean version?)']
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #NameExpr['err']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['e']
                                          $recv: #NameExpr['message']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_summary']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['summary']
                                    ]
                                    $right: #StringExpr['']
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['use_ui']
                                    $param: #List[
                                       $expression: #NameExpr['@ui']
                                    ]
                                    $body: #Block[
                                       $body: #ApplyExpr[
                                          $recv: #NameExpr['@a1']
                                          $recv: #NameExpr['validate']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_match']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['w']
                                       ]
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['@ui']
                                          $recv: #NameExpr['error']
                                       ]
                                       $expression: #StringExpr['error']
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['summary']
                                    ]
                                    $right: #StringExpr[
                                       $inner: #NameExpr['f']
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['e']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['assert_raises']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                       ]
                                       $body: #Block[
                                          $body: #ApplyExpr[
                                             $recv: #NameExpr['@a1']
                                             $recv: #NameExpr['validate']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #ParcentNotation['%{"#{f}" or "#{t}" is not a summary}']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['e']
                                          $recv: #NameExpr['message']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['@a1']
                                       $name: #NameExpr['summary']
                                    ]
                                    $right: #StringExpr[
                                       $inner: #NameExpr['t']
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['e']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['assert_raises']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                       ]
                                       $body: #Block[
                                          $body: #ApplyExpr[
                                             $recv: #NameExpr['@a1']
                                             $recv: #NameExpr['validate']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #ParcentNotation['%{"#{f}" or "#{t}" is not a summary}']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['e']
                                          $recv: #NameExpr['message']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_validate_warning']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['use_ui']
                           $param: #List[
                              $expression: #NameExpr['@ui']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #NameExpr['@a1']
                                       $recv: #NameExpr['licenses']
                                    ]
                                    $recv: #NameExpr['clear']
                                 ]
                                 $statement: #ApplyExpr[
                                    $recv: #NameExpr['@a1']
                                    $recv: #NameExpr['validate']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_match']
                           $param: #List[
                              $expression: #StringExpr['See http://guides.rubygems.org/specification-reference/ for help']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ui']
                                 $recv: #NameExpr['error']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_version']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['assert_equal']
                        $param: #List[
                           $expression: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Version']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #StringExpr['1']
                              ]
                           ]
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['version']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_version_change_reset_full_name']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['orig_full_name']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['full_name']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['version']
                           ]
                           $right: #StringExpr['2']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_equal']
                           $param: #List[
                              $expression: #NameExpr['orig_full_name']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['full_name']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_version_change_reset_cache_file']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['orig_cache_file']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['cache_file']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@a1']
                              $name: #NameExpr['version']
                           ]
                           $right: #StringExpr['2']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute_equal']
                           $param: #List[
                              $expression: #NameExpr['orig_cache_file']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@a1']
                                 $recv: #NameExpr['cache_file']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test__load_fixes_Date_objects']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['a']
                                 $expression: #IntExpr['1']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@date']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['Date']
                                 $recv: #NameExpr['today']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $base: #NameExpr['Marshal']
                              $recv: #NameExpr['load']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['Marshal']
                                    $recv: #NameExpr['dump']
                                    $param: #List[
                                       $expression: #NameExpr['spec']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_kind_of']
                           $param: #List[
                              $expression: #NameExpr['Time']
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['date']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_load_errors_contain_filename']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['specfile']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['Tempfile']
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #ApplyExpr[
                                          $recv: #Self['self']
                                          $recv: #NameExpr['class']
                                       ]
                                       $recv: #NameExpr['name']
                                    ]
                                    $recv: #NameExpr['downcase']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['specfile']
                           $recv: #NameExpr['write']
                           $param: #List[
                              $expression: #StringExpr['raise \'boom\'']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['specfile']
                           $recv: #NameExpr['close']
                        ]
                        $statement: #ExceptionBlock[
                           $main: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['capture_io']
                              $body: #Block[
                                 $body: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Specification']
                                    ]
                                    $recv: #NameExpr['load']
                                    $param: #List[
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['specfile']
                                          $recv: #NameExpr['path']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                           $rescue: #List[
                              $rescue: #Rescue[
                                 $target: #NameExpr['e']
                                 $then: #List[
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['name_rexp']
                                       $right: #ApplyExpr[
                                          $recv: #NameExpr['Regexp']
                                          $recv: #NameExpr['new']
                                          $param: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #NameExpr['Regexp']
                                                $recv: #NameExpr['escape']
                                                $param: #List[
                                                   $expression: #ApplyExpr[
                                                      $recv: #NameExpr['specfile']
                                                      $recv: #NameExpr['path']
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['assert']
                                       $param: #List[
                                          $expression: #ApplyExpr[
                                             $recv: #ApplyExpr[
                                                $recv: #ApplyExpr[
                                                   $recv: #NameExpr['e']
                                                   $recv: #NameExpr['backtrace']
                                                ]
                                                $recv: #NameExpr['grep']
                                                $param: #List[
                                                   $expression: #NameExpr['name_rexp']
                                                ]
                                             ]
                                             $recv: #NameExpr['any?']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                     $ensure: #ApplyExpr[
                        $recv: #NameExpr['specfile']
                        $recv: #NameExpr['delete']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_latest_specs']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['spec_fetcher']
                           $body: #Block[
                              $param: #NameExpr['fetcher']
                              $body: #List[
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['fetcher']
                                    $recv: #NameExpr['spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #IntExpr['1']
                                    ]
                                    $body: #Block[
                                       $param: #NameExpr['s']
                                       $body: #AssignExpr[
                                          $left: #Field[
                                             $base: #NameExpr['s']
                                             $name: #NameExpr['platform']
                                          ]
                                          $right: #ApplyExpr[
                                             $base: #Field[
                                                $recv: #NameExpr['Gem']
                                                $name: #NameExpr['Platform']
                                             ]
                                             $recv: #NameExpr['new']
                                             $param: #List[
                                                $expression: #StringExpr['x86-my_platform1']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['fetcher']
                                    $recv: #NameExpr['spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #IntExpr['2']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['fetcher']
                                    $recv: #NameExpr['spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #IntExpr['2']
                                    ]
                                    $body: #Block[
                                       $param: #NameExpr['s']
                                       $body: #AssignExpr[
                                          $left: #Field[
                                             $base: #NameExpr['s']
                                             $name: #NameExpr['platform']
                                          ]
                                          $right: #ApplyExpr[
                                             $base: #Field[
                                                $recv: #NameExpr['Gem']
                                                $name: #NameExpr['Platform']
                                             ]
                                             $recv: #NameExpr['new']
                                             $param: #List[
                                                $expression: #StringExpr['x86-my_platform1']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['fetcher']
                                    $recv: #NameExpr['spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #IntExpr['2']
                                    ]
                                    $body: #Block[
                                       $param: #NameExpr['s']
                                       $body: #AssignExpr[
                                          $left: #Field[
                                             $base: #NameExpr['s']
                                             $name: #NameExpr['platform']
                                          ]
                                          $right: #ApplyExpr[
                                             $base: #Field[
                                                $recv: #NameExpr['Gem']
                                                $name: #NameExpr['Platform']
                                             ]
                                             $recv: #NameExpr['new']
                                             $param: #List[
                                                $expression: #StringExpr['x86-other_platform1']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['fetcher']
                                    $recv: #NameExpr['spec']
                                    $param: #List[
                                       $expression: #StringExpr['a']
                                       $expression: #IntExpr['3']
                                    ]
                                    $body: #Block[
                                       $param: #NameExpr['s']
                                       $body: #AssignExpr[
                                          $left: #Field[
                                             $base: #NameExpr['s']
                                             $name: #NameExpr['platform']
                                          ]
                                          $right: #ApplyExpr[
                                             $base: #Field[
                                                $recv: #NameExpr['Gem']
                                                $name: #NameExpr['Platform']
                                             ]
                                             $recv: #NameExpr['new']
                                             $param: #List[
                                                $expression: #StringExpr['x86-other_platform1']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['expected']
                           $right: #ParcentNotation['%W[\n                  a-2\n                  a-2-x86-my_platform-1\n                  a-3-x86-other_platform-1\n                 ]']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['latest_specs']
                           $right: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Specification']
                                    ]
                                    $recv: #NameExpr['latest_specs']
                                 ]
                                 $recv: #NameExpr['map']
                                 $param: #List[
                                    $procedure: #Procedure[
                                       $base: #NameExpr['full_name']
                                    ]
                                 ]
                              ]
                              $recv: #NameExpr['sort']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['expected']
                              $expression: #NameExpr['latest_specs']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_metadata_validates_ok']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['@m1']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['quick_gem']
                                       $param: #List[
                                          $expression: #StringExpr['m']
                                          $expression: #StringExpr['1']
                                       ]
                                       $body: #Block[
                                          $param: #NameExpr['s']
                                          $body: #List[
                                             $statement: #AssignExpr[
                                                $left: #Field[
                                                   $base: #NameExpr['s']
                                                   $name: #NameExpr['files']
                                                ]
                                                $right: #ParcentNotation['%w[lib/code.rb]']
                                             ]
                                             $statement: #AssignExpr[
                                                $left: #Field[
                                                   $base: #NameExpr['s']
                                                   $name: #NameExpr['metadata']
                                                ]
                                                $right: #List[
                                                   $hash: #Hash[
                                                      $key: #StringExpr['one']
                                                      $value: #StringExpr['two']
                                                   ]
                                                   $hash: #Hash[
                                                      $key: #StringExpr['two']
                                                      $value: #StringExpr['three']
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['use_ui']
                                    $param: #List[
                                       $expression: #NameExpr['@ui']
                                    ]
                                    $body: #Block[
                                       $body: #ApplyExpr[
                                          $recv: #NameExpr['@m1']
                                          $recv: #NameExpr['validate']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_metadata_key_type_validation_fails']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['@m2']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['quick_gem']
                                       $param: #List[
                                          $expression: #StringExpr['m']
                                          $expression: #StringExpr['2']
                                       ]
                                       $body: #Block[
                                          $param: #NameExpr['s']
                                          $body: #List[
                                             $statement: #AssignExpr[
                                                $left: #Field[
                                                   $base: #NameExpr['s']
                                                   $name: #NameExpr['files']
                                                ]
                                                $right: #ParcentNotation['%w[lib/code.rb]']
                                             ]
                                             $statement: #AssignExpr[
                                                $left: #Field[
                                                   $base: #NameExpr['s']
                                                   $name: #NameExpr['metadata']
                                                ]
                                                $right: #List[
                                                   $hash: #Hash[
                                                      $key: #IntExpr['1']
                                                      $value: #StringExpr['fail']
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['e']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['assert_raises']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                       ]
                                       $body: #Block[
                                          $body: #ApplyExpr[
                                             $recv: #NameExpr['@m2']
                                             $recv: #NameExpr['validate']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #StringExpr['metadata keys must be a String']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['e']
                                          $recv: #NameExpr['message']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_metadata_key_size_validation_fails']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['@m2']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['quick_gem']
                                       $param: #List[
                                          $expression: #StringExpr['m']
                                          $expression: #StringExpr['2']
                                       ]
                                       $body: #Block[
                                          $param: #NameExpr['s']
                                          $body: #List[
                                             $statement: #AssignExpr[
                                                $left: #Field[
                                                   $base: #NameExpr['s']
                                                   $name: #NameExpr['files']
                                                ]
                                                $right: #ParcentNotation['%w[lib/code.rb]']
                                             ]
                                             $statement: #AssignExpr[
                                                $left: #Field[
                                                   $base: #NameExpr['s']
                                                   $name: #NameExpr['metadata']
                                                ]
                                                $right: #List[
                                                   $hash: #Hash[
                                                      $key: #MulExpr[
                                                         $left: #StringExpr['x']
                                                         $right: #IntExpr['129']
                                                      ]
                                                      $value: #StringExpr['fail']
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['e']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['assert_raises']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                       ]
                                       $body: #Block[
                                          $body: #ApplyExpr[
                                             $recv: #NameExpr['@m2']
                                             $recv: #NameExpr['validate']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #StringExpr['metadata key too large (129 > 128)']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['e']
                                          $recv: #NameExpr['message']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_metadata_value_type_validation_fails']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['@m2']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['quick_gem']
                                       $param: #List[
                                          $expression: #StringExpr['m']
                                          $expression: #StringExpr['2']
                                       ]
                                       $body: #Block[
                                          $param: #NameExpr['s']
                                          $body: #List[
                                             $statement: #AssignExpr[
                                                $left: #Field[
                                                   $base: #NameExpr['s']
                                                   $name: #NameExpr['files']
                                                ]
                                                $right: #ParcentNotation['%w[lib/code.rb]']
                                             ]
                                             $statement: #AssignExpr[
                                                $left: #Field[
                                                   $base: #NameExpr['s']
                                                   $name: #NameExpr['metadata']
                                                ]
                                                $right: #List[
                                                   $hash: #Hash[
                                                      $key: #StringExpr['fail']
                                                      $value: #Array['[]']
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['e']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['assert_raises']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                       ]
                                       $body: #Block[
                                          $body: #ApplyExpr[
                                             $recv: #NameExpr['@m2']
                                             $recv: #NameExpr['validate']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #StringExpr['metadata values must be a String']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['e']
                                          $recv: #NameExpr['message']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_metadata_value_size_validation_fails']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['util_setup_validate']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['Dir']
                           $recv: #NameExpr['chdir']
                           $param: #List[
                              $expression: #NameExpr['@tempdir']
                           ]
                           $body: #Block[
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['@m2']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['quick_gem']
                                       $param: #List[
                                          $expression: #StringExpr['m']
                                          $expression: #StringExpr['2']
                                       ]
                                       $body: #Block[
                                          $param: #NameExpr['s']
                                          $body: #List[
                                             $statement: #AssignExpr[
                                                $left: #Field[
                                                   $base: #NameExpr['s']
                                                   $name: #NameExpr['files']
                                                ]
                                                $right: #ParcentNotation['%w[lib/code.rb]']
                                             ]
                                             $statement: #AssignExpr[
                                                $left: #Field[
                                                   $base: #NameExpr['s']
                                                   $name: #NameExpr['metadata']
                                                ]
                                                $right: #List[
                                                   $hash: #Hash[
                                                      $key: #StringExpr['fail']
                                                      $value: #MulExpr[
                                                         $left: #StringExpr['x']
                                                         $right: #IntExpr['1025']
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['e']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['assert_raises']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                       ]
                                       $body: #Block[
                                          $body: #ApplyExpr[
                                             $recv: #NameExpr['@m2']
                                             $recv: #NameExpr['validate']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['assert_equal']
                                    $param: #List[
                                       $expression: #StringExpr['metadata value too large (1025 > 1024)']
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['e']
                                          $recv: #NameExpr['message']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_metadata_specs']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['valid_ruby_spec']
                           $right: #HereDocument['# -*- encoding: utf-8 -*-\n# stub: m 1 ruby lib\n\nGem::Specification.new do |s|\n  s.name = "m".freeze\n  s.version = "1"\n\n  s.required_rubygems_version = Gem::Requirement.new(">= 0".freeze) if s.respond_to? :required_rubygems_version=\n  s.metadata = { "one" => "two", "two" => "three" } if s.respond_to? :metadata=\n  s.require_paths = ["lib".freeze]\n  s.authors = ["A User".freeze]\n  s.date = "#{Gem::Specification::TODAY.strftime("%Y-%m-%d")}"\n  s.description = "This is a test description".freeze\n  s.email = "example@example.com".freeze\n  s.files = ["lib/code.rb".freeze]\n  s.homepage = "http://example.com".freeze\n  s.rubygems_version = "#{Gem::VERSION}".freeze\n  s.summary = "this is a summary".freeze\nend\n']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@m1']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['quick_gem']
                              $param: #List[
                                 $expression: #StringExpr['m']
                                 $expression: #StringExpr['1']
                              ]
                              $body: #Block[
                                 $param: #NameExpr['s']
                                 $body: #List[
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['files']
                                       ]
                                       $right: #ParcentNotation['%w[lib/code.rb]']
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['s']
                                          $name: #NameExpr['metadata']
                                       ]
                                       $right: #List[
                                          $hash: #Hash[
                                             $key: #StringExpr['one']
                                             $value: #StringExpr['two']
                                          ]
                                          $hash: #Hash[
                                             $key: #StringExpr['two']
                                             $value: #StringExpr['three']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@m1']
                                 $recv: #NameExpr['to_ruby']
                              ]
                              $expression: #NameExpr['valid_ruby_spec']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_missing_extensions_eh']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['ext_spec']
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['missing_extensions?']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['extconf_rb']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['@ext']
                                    $recv: #NameExpr['gem_dir']
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #NameExpr['@ext']
                                       $recv: #NameExpr['extensions']
                                    ]
                                    $recv: #NameExpr['first']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['FileUtils']
                           $recv: #NameExpr['mkdir_p']
                           $param: #List[
                              $command: #ApplyExpr[
                                 $base: #NameExpr['File']
                                 $recv: #NameExpr['dirname']
                                 $param: #List[
                                    $expression: #NameExpr['extconf_rb']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['open']
                           $param: #List[
                              $expression: #NameExpr['extconf_rb']
                              $expression: #StringExpr['w']
                           ]
                           $body: #Block[
                              $param: #NameExpr['f']
                              $body: #List[
                                 $statement: #LShiftExpr[
                                    $left: #ApplyExpr[
                                       $recv: #NameExpr['f']
                                       $recv: #NameExpr['write']
                                    ]
                                    $right: #MinusExpr[
                                       $expr: #StringExpr['RUBY']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['open']
                                    $param: #List[
                                       $expression: #StringExpr['Makefile']
                                       $expression: #StringExpr['w']
                                    ]
                                    $body: #Block[
                                       $param: #NameExpr['f']
                                       $body: #List[
                                          $statement: #ApplyExpr[
                                             $base: #NameExpr['f']
                                             $recv: #NameExpr['puts']
                                             $param: #List[
                                                $expression: #StringExpr['clean:\\n\\techo clean']
                                             ]
                                          ]
                                          $statement: #ApplyExpr[
                                             $base: #NameExpr['f']
                                             $recv: #NameExpr['puts']
                                             $param: #List[
                                                $expression: #StringExpr['default:\\n\\techo built']
                                             ]
                                          ]
                                          $statement: #ApplyExpr[
                                             $base: #NameExpr['f']
                                             $recv: #NameExpr['puts']
                                             $param: #List[
                                                $expression: #StringExpr['install:\\n\\techo installed']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #NameExpr['RUBY']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@ext']
                           $recv: #NameExpr['build_extensions']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['missing_extensions?']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_missing_extensions_eh_default_gem']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_default_spec']
                              $param: #List[
                                 $expression: #StringExpr['default']
                                 $expression: #IntExpr['1']
                              ]
                           ]
                        ]
                        $statement: #LShiftExpr[
                           $left: #ApplyExpr[
                              $recv: #NameExpr['spec']
                              $recv: #NameExpr['extensions']
                           ]
                           $right: #StringExpr['extconf.rb']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['missing_extensions?']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_missing_extensions_eh_legacy']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['ext_spec']
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@ext']
                              $name: #NameExpr['installed_by_version']
                           ]
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['v']
                              $param: #List[
                                 $expression: #StringExpr['2.2.0.preview.2']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['missing_extensions?']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['@ext']
                              $name: #NameExpr['installed_by_version']
                           ]
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['v']
                              $param: #List[
                                 $expression: #StringExpr['2.2.0.preview.1']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['refute']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['@ext']
                                 $recv: #NameExpr['missing_extensions?']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_missing_extensions_eh_none']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['refute']
                        $param: #List[
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['@a1']
                              $recv: #NameExpr['missing_extensions?']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_find_by_name']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $command: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['util_spec']
                                 $param: #List[
                                    $expression: #StringExpr['a']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $command: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['util_spec']
                                 $param: #List[
                                    $expression: #StringExpr['a']
                                    $expression: #IntExpr['1']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $command: #ApplyExpr[
                                 $base: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['find_by_name']
                                 $param: #List[
                                    $expression: #StringExpr['a']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $command: #ApplyExpr[
                                 $base: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['find_by_name']
                                 $param: #List[
                                    $expression: #StringExpr['a']
                                    $expression: #StringExpr['1']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $command: #ApplyExpr[
                                 $base: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['find_by_name']
                                 $param: #List[
                                    $expression: #StringExpr['a']
                                    $expression: #StringExpr['>1']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_raises']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['MissingSpecError']
                              ]
                           ]
                           $body: #Block[
                              $body: #ApplyExpr[
                                 $base: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['find_by_name']
                                 $param: #List[
                                    $expression: #StringExpr['monkeys']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_find_by_name_prerelease']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['b']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['b']
                                 $expression: #StringExpr['2.a']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['b']
                           $recv: #NameExpr['activate']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $expression: #NameExpr['b']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $command: #ApplyExpr[
                                 $base: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['find_by_name']
                                 $param: #List[
                                    $expression: #StringExpr['b']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_raises']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['MissingSpecVersionError']
                              ]
                           ]
                           $body: #Block[
                              $body: #ApplyExpr[
                                 $base: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['find_by_name']
                                 $param: #List[
                                    $expression: #StringExpr['b']
                                    $expression: #StringExpr['1']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $command: #ApplyExpr[
                                 $base: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['find_by_name']
                                 $param: #List[
                                    $expression: #StringExpr['b']
                                    $expression: #StringExpr['>1']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_find_by_path']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['a']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['foo']
                                 $expression: #StringExpr['1']
                                 $expression: #Nil['nil']
                                 $expression: #StringExpr['lib/foo.rb']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $expression: #NameExpr['a']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['a']
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['find_by_path']
                                 $param: #List[
                                    $expression: #StringExpr['foo']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['a']
                           $recv: #NameExpr['activate']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['a']
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['find_by_path']
                                 $param: #List[
                                    $expression: #StringExpr['foo']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_find_inactive_by_path']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['a']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['foo']
                                 $expression: #StringExpr['1']
                                 $expression: #Nil['nil']
                                 $expression: #StringExpr['lib/foo.rb']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['install_specs']
                           $param: #List[
                              $expression: #NameExpr['a']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #NameExpr['a']
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['find_inactive_by_path']
                                 $param: #List[
                                    $expression: #StringExpr['foo']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['a']
                           $recv: #NameExpr['activate']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Nil['nil']
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['find_inactive_by_path']
                                 $param: #List[
                                    $expression: #StringExpr['foo']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_load_default_gem']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $recv: #Field[
                              $recv: #NameExpr['Gem']
                              $name: #NameExpr['Specification']
                           ]
                           $recv: #NameExpr['reset']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array['[]']
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['map']
                                 $param: #List[
                                    $procedure: #Procedure[
                                       $base: #NameExpr['full_name']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['default_gem_spec']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_default_spec']
                              $param: #List[
                                 $expression: #StringExpr['default']
                                 $expression: #StringExpr['2.0.0.0']
                                 $expression: #Nil['nil']
                                 $expression: #StringExpr['default/gem.rb']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec_path']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #NameExpr['@default_spec_dir']
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['default_gem_spec']
                                    $recv: #NameExpr['spec_name']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['write_file']
                           $param: #List[
                              $expression: #NameExpr['spec_path']
                           ]
                           $body: #Block[
                              $param: #NameExpr['file']
                              $body: #ApplyExpr[
                                 $recv: #NameExpr['file']
                                 $recv: #NameExpr['print']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['default_gem_spec']
                                       $recv: #NameExpr['to_ruby']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #Field[
                              $recv: #NameExpr['Gem']
                              $name: #NameExpr['Specification']
                           ]
                           $recv: #NameExpr['reset']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert_equal']
                           $param: #List[
                              $expression: #Array[
                                 $index: #List[
                                    $expression: #StringExpr['default-2.0.0.0']
                                 ]
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Specification']
                                 ]
                                 $recv: #NameExpr['map']
                                 $param: #List[
                                    $procedure: #Procedure[
                                       $base: #NameExpr['full_name']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_detect_bundled_gem_in_old_ruby']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['util_set_RUBY_VERSION']
                           $param: #List[
                              $expression: #StringExpr['1.9.3']
                              $expression: #IntExpr['551']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['new_spec']
                              $param: #List[
                                 $expression: #StringExpr['bigdecimal']
                                 $expression: #StringExpr['1.1.0']
                              ]
                              $body: #Block[
                                 $param: #NameExpr['s']
                                 $body: #AssignExpr[
                                    $left: #Field[
                                       $base: #NameExpr['s']
                                       $name: #NameExpr['summary']
                                    ]
                                    $right: #StringExpr['This bigdecimal is bundled with Ruby']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['assert']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['bundled_gem_in_old_ruby?']
                              ]
                           ]
                        ]
                     ]
                     $ensure: #NameExpr['util_restore_RUBY_VERSION']
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['util_setup_deps']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['@gem']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['util_spec']
                              $param: #List[
                                 $expression: #StringExpr['awesome']
                                 $expression: #StringExpr['1.0']
                              ]
                              $body: #Block[
                                 $param: #NameExpr['awesome']
                                 $body: #List[
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['awesome']
                                       $recv: #NameExpr['add_runtime_dependency']
                                       $param: #List[
                                          $expression: #StringExpr['bonobo']
                                          $expression: #Array['[]']
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['awesome']
                                       $recv: #NameExpr['add_development_dependency']
                                       $param: #List[
                                          $expression: #StringExpr['monkey']
                                          $expression: #Array['[]']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@bonobo']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Dependency']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #StringExpr['bonobo']
                                 $expression: #Array['[]']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@monkey']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Dependency']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #StringExpr['monkey']
                                 $expression: #Array['[]']
                                 $expression: #NameExpr['development']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['util_setup_validate']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $base: #NameExpr['Dir']
                        $recv: #NameExpr['chdir']
                        $param: #List[
                           $expression: #NameExpr['@tempdir']
                        ]
                        $body: #Block[
                           $body: #List[
                              $statement: #ApplyExpr[
                                 $base: #NameExpr['FileUtils']
                                 $recv: #NameExpr['mkdir_p']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['File']
                                       $recv: #NameExpr['join']
                                       $param: #List[
                                          $expression: #StringExpr['ext']
                                          $expression: #StringExpr['a']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $base: #NameExpr['FileUtils']
                                 $recv: #NameExpr['mkdir_p']
                                 $param: #List[
                                    $expression: #StringExpr['lib']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $base: #NameExpr['FileUtils']
                                 $recv: #NameExpr['mkdir_p']
                                 $param: #List[
                                    $expression: #StringExpr['test']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $base: #NameExpr['FileUtils']
                                 $recv: #NameExpr['mkdir_p']
                                 $param: #List[
                                    $expression: #StringExpr['bin']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $base: #NameExpr['FileUtils']
                                 $recv: #NameExpr['touch']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['File']
                                       $recv: #NameExpr['join']
                                       $param: #List[
                                          $expression: #StringExpr['ext']
                                          $expression: #StringExpr['a']
                                          $expression: #StringExpr['extconf.rb']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $base: #NameExpr['FileUtils']
                                 $recv: #NameExpr['touch']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['File']
                                       $recv: #NameExpr['join']
                                       $param: #List[
                                          $expression: #StringExpr['lib']
                                          $expression: #StringExpr['code.rb']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $base: #NameExpr['FileUtils']
                                 $recv: #NameExpr['touch']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['File']
                                       $recv: #NameExpr['join']
                                       $param: #List[
                                          $expression: #StringExpr['test']
                                          $expression: #StringExpr['suite.rb']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $base: #NameExpr['File']
                                 $recv: #NameExpr['open']
                                 $param: #List[
                                    $expression: #StringExpr['bin/exec']
                                    $expression: #StringExpr['w']
                                    $expression: #OctalInteger['0755']
                                 ]
                                 $body: #Block[
                                    $param: #NameExpr['fp']
                                    $body: #ApplyExpr[
                                       $base: #NameExpr['fp']
                                       $recv: #NameExpr['puts']
                                       $param: #List[
                                          $expression: #StringExpr[
                                             $inner: #ApplyExpr[
                                                $recv: #NameExpr['Gem']
                                                $recv: #NameExpr['ruby']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['with_syck']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ExceptionBlock[
                           $main: #List[
                              $statement: #MultipleAssign[
                                 $left: #MultipleLeftHandSideExpression[
                                    $item: #NameExpr['verbose']
                                    $item: #NameExpr['$VERBOSE']
                                 ]
                                 $right: #MultipleRightHandSideExpression[
                                    $expression: #NameExpr['$VERBOSE']
                                    $expression: #Nil['nil']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['yaml']
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['old_engine']
                                 $right: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['YAML']
                                       $name: #NameExpr['ENGINE']
                                    ]
                                    $recv: #NameExpr['yamler']
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #Field[
                                    $base: #Field[
                                       $recv: #NameExpr['YAML']
                                       $name: #NameExpr['ENGINE']
                                    ]
                                    $name: #NameExpr['yamler']
                                 ]
                                 $right: #StringExpr['syck']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['load']
                                 $param: #List[
                                    $expression: #StringExpr['rubygems/syck_hack.rb']
                                 ]
                              ]
                           ]
                           $rescue: #List[
                              $rescue: #Rescue[
                                 $class: #NameExpr['NameError']
                                 $then: #Empty['']
                              ]
                           ]
                           $ensure: #AssignExpr[
                              $left: #NameExpr['$VERBOSE']
                              $right: #NameExpr['verbose']
                           ]
                        ]
                        $statement: #Yield['yield']
                     ]
                     $ensure: #ExceptionBlock[
                        $main: #List[
                           $statement: #AssignExpr[
                              $left: #Field[
                                 $base: #Field[
                                    $recv: #NameExpr['YAML']
                                    $name: #NameExpr['ENGINE']
                                 ]
                                 $name: #NameExpr['yamler']
                              ]
                              $right: #NameExpr['old_engine']
                           ]
                           $statement: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['load']
                              $param: #List[
                                 $expression: #StringExpr['rubygems/syck_hack.rb']
                              ]
                           ]
                        ]
                        $rescue: #List[
                           $rescue: #Rescue[
                              $class: #NameExpr['NameError']
                              $then: #Empty['']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['with_psych']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ExceptionBlock[
                           $main: #List[
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['yaml']
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['old_engine']
                                 $right: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['YAML']
                                       $name: #NameExpr['ENGINE']
                                    ]
                                    $recv: #NameExpr['yamler']
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #Field[
                                    $base: #Field[
                                       $recv: #NameExpr['YAML']
                                       $name: #NameExpr['ENGINE']
                                    ]
                                    $name: #NameExpr['yamler']
                                 ]
                                 $right: #StringExpr['psych']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['load']
                                 $param: #List[
                                    $expression: #StringExpr['rubygems/syck_hack.rb']
                                 ]
                              ]
                           ]
                           $rescue: #List[
                              $rescue: #Rescue[
                                 $class: #NameExpr['NameError']
                                 $then: #Empty['']
                              ]
                           ]
                        ]
                        $statement: #Yield['yield']
                     ]
                     $ensure: #ExceptionBlock[
                        $main: #List[
                           $statement: #AssignExpr[
                              $left: #Field[
                                 $base: #Field[
                                    $recv: #NameExpr['YAML']
                                    $name: #NameExpr['ENGINE']
                                 ]
                                 $name: #NameExpr['yamler']
                              ]
                              $right: #NameExpr['old_engine']
                           ]
                           $statement: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['load']
                              $param: #List[
                                 $expression: #StringExpr['rubygems/syck_hack.rb']
                              ]
                           ]
                        ]
                        $rescue: #List[
                           $rescue: #Rescue[
                              $class: #NameExpr['NameError']
                              $then: #Empty['']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['silence_warnings']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #MultipleAssign[
                           $left: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['old_verbose']
                              $item: #NameExpr['$VERBOSE']
                           ]
                           $right: #MultipleRightHandSideExpression[
                              $expression: #NameExpr['$VERBOSE']
                              $expression: #FalseExpr['false']
                           ]
                        ]
                        $statement: #Yield['yield']
                     ]
                     $ensure: #AssignExpr[
                        $left: #NameExpr['$VERBOSE']
                        $right: #NameExpr['old_verbose']
                     ]
                  ]
               ]
            ]
         ]
      ]
   ]
   #Comsumed['comsumed']
]
