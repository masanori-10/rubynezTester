#Source[
   #List[
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['rubygems/version']
         ]
      ]
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['rubygems/requirement']
         ]
      ]
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['rubygems/platform']
         ]
      ]
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['rubygems/deprecate']
         ]
      ]
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['rubygems/basic_specification']
         ]
      ]
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['rubygems/stub_specification']
         ]
      ]
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['rubygems/util/list']
         ]
      ]
      $statement: #ApplyExpr[
         #Self['self']
         $recv: #NameExpr['require']
         $param: #List[
            $expression: #StringExpr['stringio']
         ]
      ]
      $statement: #Class[
         $name: #NestedName[
            $path: #NameExpr['Gem']
            $name: #NameExpr['Specification']
         ]
         $super: #Field[
            $recv: #NameExpr['Gem']
            $name: #NameExpr['BasicSpecification']
         ]
         $body: #BlockExpr[
            $main: #List[
               $statement: #AssignExpr[
                  $left: #NameExpr['NONEXISTENT_SPECIFICATION_VERSION']
                  $right: #MinusExpr[
                     $expr: #IntExpr['1']
                  ]
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['CURRENT_SPECIFICATION_VERSION']
                  $right: #IntExpr['4']
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['SPECIFICATION_VERSION_HISTORY']
                  $right: #List[
                     $hash: #Hash[
                        $key: #MinusExpr[
                           $expr: #IntExpr['1']
                        ]
                        $value: #Array[
                           $index: #List[
                              $expression: #StringExpr['(RubyGems versions up to and including 0.7 did not have versioned specifications)']
                           ]
                        ]
                     ]
                     $hash: #Hash[
                        $key: #IntExpr['1']
                        $value: #Array[
                           $index: #List[
                              $expression: #StringExpr['Deprecated "test_suite_file" in favor of the new, but equivalent, "test_files"']
                              $expression: #StringExpr['"test_file=x" is a shortcut for "test_files=[x]"']
                           ]
                        ]
                     ]
                     $hash: #Hash[
                        $key: #IntExpr['2']
                        $value: #Array[
                           $index: #List[
                              $expression: #StringExpr['Added "required_rubygems_version"']
                              $expression: #StringExpr['Now forward-compatible with future versions']
                           ]
                        ]
                     ]
                     $hash: #Hash[
                        $key: #IntExpr['3']
                        $value: #Array[
                           $index: #List[
                              $expression: #StringExpr['Added Fixnum validation to the specification_version']
                           ]
                        ]
                     ]
                     $hash: #Hash[
                        $key: #IntExpr['4']
                        $value: #Array[
                           $index: #List[
                              $expression: #StringExpr['Added sandboxed freeform metadata to the specification version.']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['MARSHAL_FIELDS']
                  $right: #List[
                     $hash: #Hash[
                        $key: #MinusExpr[
                           $expr: #IntExpr['1']
                        ]
                        $value: #IntExpr['16']
                     ]
                     $hash: #Hash[
                        $key: #IntExpr['1']
                        $value: #IntExpr['16']
                     ]
                     $hash: #Hash[
                        $key: #IntExpr['2']
                        $value: #IntExpr['16']
                     ]
                     $hash: #Hash[
                        $key: #IntExpr['3']
                        $value: #IntExpr['17']
                     ]
                     $hash: #Hash[
                        $key: #IntExpr['4']
                        $value: #IntExpr['18']
                     ]
                  ]
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['today']
                  $right: #ApplyExpr[
                     $recv: #ApplyExpr[
                        $recv: #NameExpr['Time']
                        $recv: #NameExpr['now']
                     ]
                     $recv: #NameExpr['utc']
                  ]
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['TODAY']
                  $right: #ApplyExpr[
                     $recv: #NameExpr['Time']
                     $recv: #NameExpr['utc']
                     $param: #List[
                        $expression: #ApplyExpr[
                           $recv: #NameExpr['today']
                           $recv: #NameExpr['year']
                        ]
                        $expression: #ApplyExpr[
                           $recv: #NameExpr['today']
                           $recv: #NameExpr['month']
                        ]
                        $expression: #ApplyExpr[
                           $recv: #NameExpr['today']
                           $recv: #NameExpr['day']
                        ]
                     ]
                  ]
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['LOAD_CACHE']
                  $right: #List['{}']
               ]
               $statement: #IfExpr[
                  $then: #ApplyExpr[
                     #Self['self']
                     $recv: #NameExpr['private_constant']
                     $param: #List[
                        $expression: #NameExpr['LOAD_CACHE']
                     ]
                  ]
                  $cond: #ApplyExpr[
                     #Self['self']
                     $recv: #NameExpr['defined?']
                     $param: #List[
                        $expression: #NameExpr['private_constant']
                     ]
                  ]
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['@@required_attributes']
                  $right: #Array[
                     $index: #List[
                        $expression: #NameExpr['rubygems_version']
                        $expression: #NameExpr['specification_version']
                        $expression: #NameExpr['name']
                        $expression: #NameExpr['version']
                        $expression: #NameExpr['date']
                        $expression: #NameExpr['summary']
                        $expression: #NameExpr['require_paths']
                     ]
                  ]
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['@@default_value']
                  $right: #List[
                     $hash: #Hash[
                        $key: #NameExpr['authors']
                        $value: #Array['[]']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['autorequire']
                        $value: #Nil['nil']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['bindir']
                        $value: #StringExpr['bin']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['cert_chain']
                        $value: #Array['[]']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['date']
                        $value: #NameExpr['TODAY']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['dependencies']
                        $value: #Array['[]']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['description']
                        $value: #Nil['nil']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['email']
                        $value: #Nil['nil']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['executables']
                        $value: #Array['[]']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['extensions']
                        $value: #Array['[]']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['extra_rdoc_files']
                        $value: #Array['[]']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['files']
                        $value: #Array['[]']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['homepage']
                        $value: #Nil['nil']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['licenses']
                        $value: #Array['[]']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['metadata']
                        $value: #List['{}']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['name']
                        $value: #Nil['nil']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['platform']
                        $value: #Field[
                           $recv: #Field[
                              $recv: #NameExpr['Gem']
                              $name: #NameExpr['Platform']
                           ]
                           $name: #NameExpr['RUBY']
                        ]
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['post_install_message']
                        $value: #Nil['nil']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['rdoc_options']
                        $value: #Array['[]']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['require_paths']
                        $value: #Array[
                           $index: #List[
                              $expression: #StringExpr['lib']
                           ]
                        ]
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['required_ruby_version']
                        $value: #ApplyExpr[
                           $recv: #Field[
                              $recv: #NameExpr['Gem']
                              $name: #NameExpr['Requirement']
                           ]
                           $recv: #NameExpr['default']
                        ]
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['required_rubygems_version']
                        $value: #ApplyExpr[
                           $recv: #Field[
                              $recv: #NameExpr['Gem']
                              $name: #NameExpr['Requirement']
                           ]
                           $recv: #NameExpr['default']
                        ]
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['requirements']
                        $value: #Array['[]']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['rubyforge_project']
                        $value: #Nil['nil']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['rubygems_version']
                        $value: #Field[
                           $recv: #NameExpr['Gem']
                           $name: #NameExpr['VERSION']
                        ]
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['signing_key']
                        $value: #Nil['nil']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['specification_version']
                        $value: #NameExpr['CURRENT_SPECIFICATION_VERSION']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['summary']
                        $value: #Nil['nil']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['test_files']
                        $value: #Array['[]']
                     ]
                     $hash: #Hash[
                        $key: #NameExpr['version']
                        $value: #Nil['nil']
                     ]
                  ]
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['Dupable']
                  $right: #List['{ }']
               ]
               $statement: #ApplyExpr[
                  $recv: #NameExpr['@@default_value']
                  $recv: #NameExpr['each']
                  $body: #Block[
                     $param: #MultipleLeftHandSideExpression[
                        $item: #NameExpr['k']
                        $item: #NameExpr['v']
                     ]
                     $body: #Case[
                        $cond: #NameExpr['v']
                        $body: #List[
                           $when: #When[
                              $cond: #List[
                                 $expression: #NameExpr['Time']
                                 $expression: #NameExpr['Numeric']
                                 $expression: #NameExpr['Symbol']
                                 $expression: #TrueExpr['true']
                                 $expression: #FalseExpr['false']
                                 $expression: #Nil['nil']
                              ]
                              $then: #AssignExpr[
                                 $left: #Indexer[
                                    $base: #NameExpr['Dupable']
                                    $index: #List[
                                       $expression: #NameExpr['k']
                                    ]
                                 ]
                                 $right: #FalseExpr['false']
                              ]
                           ]
                        ]
                        $else: #AssignExpr[
                           $left: #Indexer[
                              $base: #NameExpr['Dupable']
                              $index: #List[
                                 $expression: #NameExpr['k']
                              ]
                           ]
                           $right: #TrueExpr['true']
                        ]
                     ]
                  ]
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['@@attributes']
                  $right: #ApplyExpr[
                     $recv: #ApplyExpr[
                        $recv: #NameExpr['@@default_value']
                        $recv: #NameExpr['keys']
                     ]
                     $recv: #NameExpr['sort_by']
                     $body: #Block[
                        $param: #NameExpr['s']
                        $body: #ApplyExpr[
                           $recv: #NameExpr['s']
                           $recv: #NameExpr['to_s']
                        ]
                     ]
                  ]
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['@@array_attributes']
                  $right: #ApplyExpr[
                     $recv: #ApplyExpr[
                        $recv: #NameExpr['@@default_value']
                        $recv: #NameExpr['reject']
                        $body: #Block[
                           $param: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['k']
                              $item: #NameExpr['v']
                           ]
                           $body: #NeExpr[
                              $left: #NameExpr['v']
                              $right: #Array['[]']
                           ]
                        ]
                     ]
                     $recv: #NameExpr['keys']
                  ]
               ]
               $statement: #MultipleAssign[
                  $left: #MultipleLeftHandSideExpression[
                     $item: #NameExpr['@@nil_attributes']
                     $item: #NameExpr['@@non_nil_attributes']
                  ]
                  $right: #ApplyExpr[
                     $recv: #ApplyExpr[
                        $recv: #NameExpr['@@default_value']
                        $recv: #NameExpr['keys']
                     ]
                     $recv: #NameExpr['partition']
                     $body: #Block[
                        $param: #NameExpr['k']
                        $body: #ApplyExpr[
                           $recv: #Indexer[
                              $recv: #NameExpr['@@default_value']
                              $index: #List[
                                 $expression: #NameExpr['k']
                              ]
                           ]
                           $recv: #NameExpr['nil?']
                        ]
                     ]
                  ]
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['@@stubs_by_name']
                  $right: #List['{}']
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['NOT_FOUND']
                  $right: #ApplyExpr[
                     $recv: #ApplyExpr[
                        $recv: #NameExpr['Struct']
                        $recv: #NameExpr['new']
                        $param: #List[
                           $expression: #NameExpr['to_spec']
                           $expression: #NameExpr['this']
                        ]
                     ]
                     $recv: #NameExpr['new']
                  ]
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['@@spec_with_requirable_file']
                  $right: #List['{}']
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['@@active_stub_with_requirable_file']
                  $right: #List['{}']
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_accessor']
                  $param: #List[
                     $expression: #NameExpr['name']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_reader']
                  $param: #List[
                     $expression: #NameExpr['version']
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['require_paths=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['val']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@require_paths']
                        $right: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['Array']
                           $param: #List[
                              $expression: #NameExpr['val']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_accessor']
                  $param: #List[
                     $expression: #NameExpr['rubygems_version']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_reader']
                  $param: #List[
                     $expression: #NameExpr['summary']
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['author=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['o']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #Field[
                           $base: #Self['self']
                           $name: #NameExpr['authors']
                        ]
                        $right: #Array[
                           $index: #List[
                              $expression: #NameExpr['o']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['authors=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['value']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@authors']
                        $right: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['Array']
                                 $param: #List[
                                    $expression: #NameExpr['value']
                                 ]
                              ]
                              $recv: #NameExpr['flatten']
                           ]
                           $recv: #NameExpr['grep']
                           $param: #List[
                              $expression: #NameExpr['String']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['platform=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['platform']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $cond: #OrExpr[
                              $left: #ApplyExpr[
                                 $recv: #NameExpr['@original_platform']
                                 $recv: #NameExpr['nil?']
                              ]
                              $right: #EqExpr[
                                 $left: #NameExpr['@original_platform']
                                 $right: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Platform']
                                    ]
                                    $name: #NameExpr['RUBY']
                                 ]
                              ]
                           ]
                           $then: #AssignExpr[
                              $left: #NameExpr['@original_platform']
                              $right: #NameExpr['platform']
                           ]
                        ]
                        $statement: #Case[
                           $cond: #NameExpr['platform']
                           $body: #List[
                              $when: #When[
                                 $cond: #List[
                                    $expression: #Field[
                                       $recv: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Platform']
                                       ]
                                       $name: #NameExpr['CURRENT']
                                    ]
                                 ]
                                 $then: #List[
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['@new_platform']
                                       $right: #ApplyExpr[
                                          $recv: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['Platform']
                                          ]
                                          $recv: #NameExpr['local']
                                       ]
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['@original_platform']
                                       $right: #ApplyExpr[
                                          $recv: #NameExpr['@new_platform']
                                          $recv: #NameExpr['to_s']
                                       ]
                                    ]
                                 ]
                              ]
                              $when: #When[
                                 $cond: #List[
                                    $expression: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Platform']
                                    ]
                                 ]
                                 $then: #AssignExpr[
                                    $left: #NameExpr['@new_platform']
                                    $right: #NameExpr['platform']
                                 ]
                              ]
                              $when: #When[
                                 $cond: #List[
                                    $expression: #Nil['nil']
                                    $expression: #Field[
                                       $recv: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Platform']
                                       ]
                                       $name: #NameExpr['RUBY']
                                    ]
                                 ]
                                 $then: #AssignExpr[
                                    $left: #NameExpr['@new_platform']
                                    $right: #Field[
                                       $recv: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Platform']
                                       ]
                                       $name: #NameExpr['RUBY']
                                    ]
                                 ]
                              ]
                              $when: #When[
                                 $cond: #List[
                                    $expression: #StringExpr['mswin32']
                                 ]
                                 $then: #AssignExpr[
                                    $left: #NameExpr['@new_platform']
                                    $right: #ApplyExpr[
                                       $base: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Platform']
                                       ]
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #StringExpr['x86-mswin32']
                                       ]
                                    ]
                                 ]
                              ]
                              $when: #When[
                                 $cond: #List[
                                    $expression: #StringExpr['i586-linux']
                                 ]
                                 $then: #AssignExpr[
                                    $left: #NameExpr['@new_platform']
                                    $right: #ApplyExpr[
                                       $base: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Platform']
                                       ]
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #StringExpr['x86-linux']
                                       ]
                                    ]
                                 ]
                              ]
                              $when: #When[
                                 $cond: #List[
                                    $expression: #StringExpr['powerpc-darwin']
                                 ]
                                 $then: #AssignExpr[
                                    $left: #NameExpr['@new_platform']
                                    $right: #ApplyExpr[
                                       $base: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Platform']
                                       ]
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #StringExpr['ppc-darwin']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                           $else: #AssignExpr[
                              $left: #NameExpr['@new_platform']
                              $right: #ApplyExpr[
                                 $base: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Platform']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #NameExpr['platform']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@platform']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['@new_platform']
                              $recv: #NameExpr['to_s']
                           ]
                        ]
                        $statement: #NameExpr['invalidate_memoized_attributes']
                        $statement: #NameExpr['@new_platform']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['files']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@files']
                        $right: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #Array[
                                       $index: #List[
                                          $expression: #NameExpr['@files']
                                          $expression: #NameExpr['@test_files']
                                          $expression: #ApplyExpr[
                                             #Self['self']
                                             $recv: #NameExpr['add_bindir']
                                             $param: #List[
                                                $expression: #NameExpr['@executables']
                                             ]
                                          ]
                                          $expression: #NameExpr['@extra_rdoc_files']
                                          $expression: #NameExpr['@extensions']
                                       ]
                                    ]
                                    $recv: #NameExpr['flatten']
                                 ]
                                 $recv: #NameExpr['compact']
                              ]
                              $recv: #NameExpr['uniq']
                           ]
                           $recv: #NameExpr['sort']
                        ]
                     ]
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_accessor']
                  $param: #List[
                     $expression: #NameExpr['bindir']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_accessor']
                  $param: #List[
                     $expression: #NameExpr['cert_chain']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_reader']
                  $param: #List[
                     $expression: #NameExpr['description']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_accessor']
                  $param: #List[
                     $expression: #NameExpr['email']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_accessor']
                  $param: #List[
                     $expression: #NameExpr['homepage']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_accessor']
                  $param: #List[
                     $expression: #NameExpr['post_install_message']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_reader']
                  $param: #List[
                     $expression: #NameExpr['required_ruby_version']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_reader']
                  $param: #List[
                     $expression: #NameExpr['required_rubygems_version']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_accessor']
                  $param: #List[
                     $expression: #NameExpr['signing_key']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_accessor']
                  $param: #List[
                     $expression: #NameExpr['metadata']
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['add_development_dependency']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['gem']
                     ]
                     $param: #VariadicParam[
                        $name: #NameExpr['requirements']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['add_dependency_with_type']
                        $param: #List[
                           $expression: #NameExpr['gem']
                           $expression: #NameExpr['development']
                           $variadic: #Variadic[
                              $base: #NameExpr['requirements']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['add_runtime_dependency']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['gem']
                     ]
                     $param: #VariadicParam[
                        $name: #NameExpr['requirements']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['add_dependency_with_type']
                        $param: #List[
                           $expression: #NameExpr['gem']
                           $expression: #NameExpr['runtime']
                           $variadic: #Variadic[
                              $base: #NameExpr['requirements']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['executables']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@executables']
                        $right: #Array['[]']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['extensions']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@extensions']
                        $right: #Array['[]']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['extra_rdoc_files']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@extra_rdoc_files']
                        $right: #Array['[]']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['installed_by_version']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@installed_by_version']
                        $right: #ApplyExpr[
                           $recv: #Field[
                              $recv: #NameExpr['Gem']
                              $name: #NameExpr['Version']
                           ]
                           $recv: #NameExpr['new']
                           $param: #List[
                              $expression: #IntExpr['0']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['installed_by_version=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['version']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@installed_by_version']
                        $right: #ApplyExpr[
                           $base: #Field[
                              $recv: #NameExpr['Gem']
                              $name: #NameExpr['Version']
                           ]
                           $recv: #NameExpr['new']
                           $param: #List[
                              $expression: #NameExpr['version']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['license=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['o']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #Field[
                           $base: #Self['self']
                           $name: #NameExpr['licenses']
                        ]
                        $right: #Array[
                           $index: #List[
                              $expression: #NameExpr['o']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['licenses=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['licenses']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@licenses']
                        $right: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['Array']
                           $param: #List[
                              $expression: #NameExpr['licenses']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['rdoc_options']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@rdoc_options']
                        $right: #Array['[]']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['required_ruby_version=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['req']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@required_ruby_version']
                        $right: #ApplyExpr[
                           $base: #Field[
                              $recv: #NameExpr['Gem']
                              $name: #NameExpr['Requirement']
                           ]
                           $recv: #NameExpr['create']
                           $param: #List[
                              $expression: #NameExpr['req']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['required_rubygems_version=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['req']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@required_rubygems_version']
                        $right: #ApplyExpr[
                           $base: #Field[
                              $recv: #NameExpr['Gem']
                              $name: #NameExpr['Requirement']
                           ]
                           $recv: #NameExpr['create']
                           $param: #List[
                              $expression: #NameExpr['req']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['requirements']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@requirements']
                        $right: #Array['[]']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_files=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['files']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@test_files']
                        $right: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['Array']
                           $param: #List[
                              $expression: #NameExpr['files']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_accessor']
                  $param: #List[
                     $expression: #NameExpr['activated']
                  ]
               ]
               $statement: #Alias[
                  $newname: #NameExpr['activated?']
                  $target: #NameExpr['activated']
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_accessor']
                  $param: #List[
                     $expression: #NameExpr['autorequire']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_writer']
                  $param: #List[
                     $expression: #NameExpr['default_executable']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_writer']
                  $param: #List[
                     $expression: #NameExpr['original_platform']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_accessor']
                  $param: #List[
                     $expression: #NameExpr['rubyforge_project']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['attr_accessor']
                  $param: #List[
                     $expression: #NameExpr['specification_version']
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['_all']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #Unless[
                           $cond: #Defined[
                              $base: #LAnd[
                                 $left: #NameExpr['@@all']
                                 $right: #NameExpr['@@all']
                              ]
                           ]
                           $then: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['@@all']
                                 $right: #ApplyExpr[
                                    $recv: #NameExpr['stubs']
                                    $recv: #NameExpr['map']
                                    $param: #List[
                                       $procedure: #Procedure[
                                          $base: #NameExpr['to_spec']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['specs']
                                 $right: #List['{}']
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['Gem']
                                    $recv: #NameExpr['loaded_specs']
                                 ]
                                 $recv: #NameExpr['each_value']
                                 $body: #Block[
                                    $param: #NameExpr['s']
                                    $body: #AssignExpr[
                                       $left: #Indexer[
                                          $base: #NameExpr['specs']
                                          $index: #List[
                                             $expression: #NameExpr['s']
                                          ]
                                       ]
                                       $right: #TrueExpr['true']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['@@all']
                                 $recv: #NameExpr['each']
                                 $body: #Block[
                                    $param: #NameExpr['s']
                                    $body: #IfExpr[
                                       $then: #AssignExpr[
                                          $left: #Field[
                                             $base: #NameExpr['s']
                                             $name: #NameExpr['activated']
                                          ]
                                          $right: #TrueExpr['true']
                                       ]
                                       $cond: #Indexer[
                                          $recv: #NameExpr['specs']
                                          $index: #List[
                                             $expression: #NameExpr['s']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #NameExpr['@@all']
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['_clear_load_cache']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['LOAD_CACHE']
                        $recv: #NameExpr['clear']
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['each_gemspec']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['dirs']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['dirs']
                        $recv: #NameExpr['each']
                        $body: #Block[
                           $param: #NameExpr['dir']
                           $body: #ApplyExpr[
                              $recv: #Indexer[
                                 $recv: #NameExpr['Dir']
                                 $index: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['File']
                                       $recv: #NameExpr['join']
                                       $param: #List[
                                          $expression: #NameExpr['dir']
                                          $expression: #StringExpr['*.gemspec']
                                       ]
                                    ]
                                 ]
                              ]
                              $recv: #NameExpr['each']
                              $body: #Block[
                                 $param: #NameExpr['path']
                                 $body: #Yield[
                                    $param: #List[
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['path']
                                          $recv: #NameExpr['untaint']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['gemspec_stubs_in']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['dir']
                     ]
                     $param: #Param[
                        $param: #NameExpr['pattern']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #ApplyExpr[
                           $recv: #Indexer[
                              $recv: #NameExpr['Dir']
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['File']
                                    $recv: #NameExpr['join']
                                    $param: #List[
                                       $expression: #NameExpr['dir']
                                       $expression: #NameExpr['pattern']
                                    ]
                                 ]
                              ]
                           ]
                           $recv: #NameExpr['map']
                           $body: #Block[
                              $param: #NameExpr['path']
                              $body: #Yield[
                                 $param: #List[
                                    $expression: #NameExpr['path']
                                 ]
                              ]
                           ]
                        ]
                        $recv: #NameExpr['select']
                        $param: #List[
                           $procedure: #Procedure[
                              $base: #NameExpr['valid?']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['private_class_method']
                  $param: #List[
                     $expression: #NameExpr['gemspec_stubs_in']
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['default_stubs']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['pattern']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['base_dir']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['Gem']
                              $recv: #NameExpr['default_dir']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['gems_dir']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #NameExpr['base_dir']
                                 $expression: #StringExpr['gems']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['gemspec_stubs_in']
                           $param: #List[
                              $expression: #NameExpr['default_specifications_dir']
                              $expression: #NameExpr['pattern']
                           ]
                           $body: #Block[
                              $param: #NameExpr['path']
                              $body: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['StubSpecification']
                                 ]
                                 $recv: #NameExpr['default_gemspec_stub']
                                 $param: #List[
                                    $expression: #NameExpr['path']
                                    $expression: #NameExpr['base_dir']
                                    $expression: #NameExpr['gems_dir']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['private_class_method']
                  $param: #List[
                     $expression: #NameExpr['default_stubs']
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['installed_stubs']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['dirs']
                     ]
                     $param: #Param[
                        $param: #NameExpr['pattern']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['map_stubs']
                        $param: #List[
                           $expression: #NameExpr['dirs']
                           $expression: #NameExpr['pattern']
                        ]
                        $body: #Block[
                           $param: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['path']
                              $item: #NameExpr['base_dir']
                              $item: #NameExpr['gems_dir']
                           ]
                           $body: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['StubSpecification']
                              ]
                              $recv: #NameExpr['gemspec_stub']
                              $param: #List[
                                 $expression: #NameExpr['path']
                                 $expression: #NameExpr['base_dir']
                                 $expression: #NameExpr['gems_dir']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['private_class_method']
                  $param: #List[
                     $expression: #NameExpr['installed_stubs']
                  ]
               ]
               $statement: #IfExpr[
                  $cond: #ApplyExpr[
                     $base: #Array['[]']
                     $recv: #NameExpr['respond_to?']
                     $param: #List[
                        $expression: #NameExpr['flat_map']
                     ]
                  ]
                  $then: #SFuncDecl[
                     $path: #Self['self']
                     $name: #NameExpr['map_stubs']
                     $param: #List[
                        $param: #Param[
                           $param: #NameExpr['dirs']
                        ]
                        $param: #Param[
                           $param: #NameExpr['pattern']
                        ]
                     ]
                     $body: #BlockExpr[
                        $main: #ApplyExpr[
                           $recv: #NameExpr['dirs']
                           $recv: #NameExpr['flat_map']
                           $body: #Block[
                              $param: #NameExpr['dir']
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['base_dir']
                                    $right: #ApplyExpr[
                                       $base: #NameExpr['File']
                                       $recv: #NameExpr['dirname']
                                       $param: #List[
                                          $expression: #NameExpr['dir']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['gems_dir']
                                    $right: #ApplyExpr[
                                       $base: #NameExpr['File']
                                       $recv: #NameExpr['join']
                                       $param: #List[
                                          $expression: #NameExpr['base_dir']
                                          $expression: #StringExpr['gems']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['gemspec_stubs_in']
                                    $param: #List[
                                       $expression: #NameExpr['dir']
                                       $expression: #NameExpr['pattern']
                                    ]
                                    $body: #Block[
                                       $param: #NameExpr['path']
                                       $body: #Yield[
                                          $param: #List[
                                             $expression: #NameExpr['path']
                                             $expression: #NameExpr['base_dir']
                                             $expression: #NameExpr['gems_dir']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
                  $else: #SFuncDecl[
                     $path: #Self['self']
                     $name: #NameExpr['map_stubs']
                     $param: #List[
                        $param: #Param[
                           $param: #NameExpr['dirs']
                        ]
                        $param: #Param[
                           $param: #NameExpr['pattern']
                        ]
                     ]
                     $body: #BlockExpr[
                        $main: #ApplyExpr[
                           $base: #ApplyExpr[
                              $recv: #NameExpr['dirs']
                              $recv: #NameExpr['map']
                              $body: #Block[
                                 $param: #NameExpr['dir']
                                 $body: #List[
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['base_dir']
                                       $right: #ApplyExpr[
                                          $base: #NameExpr['File']
                                          $recv: #NameExpr['dirname']
                                          $param: #List[
                                             $expression: #NameExpr['dir']
                                          ]
                                       ]
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['gems_dir']
                                       $right: #ApplyExpr[
                                          $base: #NameExpr['File']
                                          $recv: #NameExpr['join']
                                          $param: #List[
                                             $expression: #NameExpr['base_dir']
                                             $expression: #StringExpr['gems']
                                          ]
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['gemspec_stubs_in']
                                       $param: #List[
                                          $expression: #NameExpr['dir']
                                          $expression: #NameExpr['pattern']
                                       ]
                                       $body: #Block[
                                          $param: #NameExpr['path']
                                          $body: #Yield[
                                             $param: #List[
                                                $expression: #NameExpr['path']
                                                $expression: #NameExpr['base_dir']
                                                $expression: #NameExpr['gems_dir']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                           $recv: #NameExpr['flatten']
                           $param: #List[
                              $expression: #IntExpr['1']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['private_class_method']
                  $param: #List[
                     $expression: #NameExpr['map_stubs']
                  ]
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['uniq_takes_a_block']
                  $right: #FalseExpr['false']
               ]
               $statement: #ApplyExpr[
                  $recv: #Array[
                     $index: #List[
                        $expression: #IntExpr['1']
                        $expression: #IntExpr['2']
                     ]
                  ]
                  $recv: #NameExpr['uniq']
                  $body: #Block[
                     $body: #AssignExpr[
                        $left: #NameExpr['uniq_takes_a_block']
                        $right: #TrueExpr['true']
                     ]
                  ]
               ]
               $statement: #IfExpr[
                  $cond: #NameExpr['uniq_takes_a_block']
                  $then: #SFuncDecl[
                     $path: #Self['self']
                     $name: #NameExpr['uniq_by']
                     $param: #List[
                        $param: #Param[
                           $param: #NameExpr['list']
                        ]
                        $param: #ProcedureParam[
                           $name: #NameExpr['block']
                        ]
                     ]
                     $body: #BlockExpr[
                        $main: #ApplyExpr[
                           $recv: #NameExpr['list']
                           $recv: #NameExpr['uniq']
                           $param: #List[
                              $procedure: #Procedure[
                                 $base: #NameExpr['block']
                              ]
                           ]
                        ]
                     ]
                  ]
                  $else: #SFuncDecl[
                     $path: #Self['self']
                     $name: #NameExpr['uniq_by']
                     $param: #List[
                        $param: #Param[
                           $param: #NameExpr['list']
                        ]
                     ]
                     $body: #BlockExpr[
                        $main: #List[
                           $statement: #AssignExpr[
                              $left: #NameExpr['values']
                              $right: #List['{}']
                           ]
                           $statement: #ApplyExpr[
                              $recv: #NameExpr['list']
                              $recv: #NameExpr['each']
                              $body: #Block[
                                 $param: #NameExpr['item']
                                 $body: #List[
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['value']
                                       $right: #Yield[
                                          $param: #List[
                                             $expression: #NameExpr['item']
                                          ]
                                       ]
                                    ]
                                    $statement: #LOrAssign[
                                       $left: #Indexer[
                                          $base: #NameExpr['values']
                                          $index: #List[
                                             $expression: #NameExpr['value']
                                          ]
                                       ]
                                       $right: #NameExpr['item']
                                    ]
                                 ]
                              ]
                           ]
                           $statement: #ApplyExpr[
                              $recv: #NameExpr['values']
                              $recv: #NameExpr['values']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['private_class_method']
                  $param: #List[
                     $expression: #NameExpr['uniq_by']
                  ]
               ]
               $statement: #IfExpr[
                  $cond: #ApplyExpr[
                     $base: #Array['[]']
                     $recv: #NameExpr['respond_to?']
                     $param: #List[
                        $expression: #NameExpr['sort_by!']
                     ]
                  ]
                  $then: #SFuncDecl[
                     $path: #Self['self']
                     $name: #NameExpr['sort_by!']
                     $param: #List[
                        $param: #Param[
                           $param: #NameExpr['list']
                        ]
                        $param: #ProcedureParam[
                           $name: #NameExpr['block']
                        ]
                     ]
                     $body: #BlockExpr[
                        $main: #ApplyExpr[
                           $recv: #NameExpr['list']
                           $recv: #NameExpr['sort_by!']
                           $param: #List[
                              $procedure: #Procedure[
                                 $base: #NameExpr['block']
                              ]
                           ]
                        ]
                     ]
                  ]
                  $else: #SFuncDecl[
                     $path: #Self['self']
                     $name: #NameExpr['sort_by!']
                     $param: #List[
                        $param: #Param[
                           $param: #NameExpr['list']
                        ]
                        $param: #ProcedureParam[
                           $name: #NameExpr['block']
                        ]
                     ]
                     $body: #BlockExpr[
                        $main: #ApplyExpr[
                           $base: #NameExpr['list']
                           $recv: #NameExpr['replace']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['list']
                                 $recv: #NameExpr['sort_by']
                                 $param: #List[
                                    $procedure: #Procedure[
                                       $base: #NameExpr['block']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['private_class_method']
                  $param: #List[
                     $expression: #NameExpr['sort_by!']
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['each_spec']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['dirs']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['each_gemspec']
                        $param: #List[
                           $expression: #NameExpr['dirs']
                        ]
                        $body: #Block[
                           $param: #NameExpr['path']
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['spec']
                                 $right: #ApplyExpr[
                                    $base: #Self['self']
                                    $recv: #NameExpr['load']
                                    $param: #List[
                                       $expression: #NameExpr['path']
                                    ]
                                 ]
                              ]
                              $statement: #IfExpr[
                                 $then: #Yield[
                                    $param: #List[
                                       $expression: #NameExpr['spec']
                                    ]
                                 ]
                                 $cond: #NameExpr['spec']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['stubs']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@@stubs']
                        $right: #ExceptionBlock[
                           $main: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['pattern']
                                 $right: #StringExpr['*.gemspec']
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['stubs']
                                 $right: #ApplyExpr[
                                    $base: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['default_stubs']
                                       $param: #List[
                                          $expression: #NameExpr['pattern']
                                       ]
                                    ]
                                    $recv: #NameExpr['concat']
                                    $param: #List[
                                       $expression: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['installed_stubs']
                                          $param: #List[
                                             $expression: #NameExpr['dirs']
                                             $expression: #NameExpr['pattern']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['stubs']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['uniq_by']
                                    $param: #List[
                                       $expression: #NameExpr['stubs']
                                    ]
                                    $body: #Block[
                                       $param: #NameExpr['stub']
                                       $body: #ApplyExpr[
                                          $recv: #NameExpr['stub']
                                          $recv: #NameExpr['full_name']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['_resort!']
                                 $param: #List[
                                    $expression: #NameExpr['stubs']
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['@@stubs_by_name']
                                 $right: #ApplyExpr[
                                    $recv: #NameExpr['stubs']
                                    $recv: #NameExpr['group_by']
                                    $param: #List[
                                       $procedure: #Procedure[
                                          $base: #NameExpr['name']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #NameExpr['stubs']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['EMPTY']
                  $right: #ApplyExpr[
                     $recv: #Array['[]']
                     $recv: #NameExpr['freeze']
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['stubs_for']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['name']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #IfExpr[
                        $cond: #NameExpr['@@stubs']
                        $then: #LOr[
                           $left: #Indexer[
                              $recv: #NameExpr['@@stubs_by_name']
                              $index: #List[
                                 $expression: #NameExpr['name']
                              ]
                           ]
                           $right: #Array['[]']
                        ]
                        $else: #List[
                           $statement: #AssignExpr[
                              $left: #NameExpr['pattern']
                              $right: #StringExpr[
                                 $inner: #NameExpr['name']
                              ]
                           ]
                           $statement: #AssignExpr[
                              $left: #NameExpr['stubs']
                              $right: #AddExpr[
                                 $left: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['default_stubs']
                                    $param: #List[
                                       $expression: #NameExpr['pattern']
                                    ]
                                 ]
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['installed_stubs']
                                    $param: #List[
                                       $expression: #NameExpr['dirs']
                                       $expression: #NameExpr['pattern']
                                    ]
                                 ]
                              ]
                           ]
                           $statement: #AssignExpr[
                              $left: #NameExpr['stubs']
                              $right: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['uniq_by']
                                    $param: #List[
                                       $expression: #NameExpr['stubs']
                                    ]
                                    $body: #Block[
                                       $param: #NameExpr['stub']
                                       $body: #ApplyExpr[
                                          $recv: #NameExpr['stub']
                                          $recv: #NameExpr['full_name']
                                       ]
                                    ]
                                 ]
                                 $recv: #NameExpr['group_by']
                                 $param: #List[
                                    $procedure: #Procedure[
                                       $base: #NameExpr['name']
                                    ]
                                 ]
                              ]
                           ]
                           $statement: #ApplyExpr[
                              $recv: #NameExpr['stubs']
                              $recv: #NameExpr['each_value']
                              $body: #Block[
                                 $param: #NameExpr['v']
                                 $body: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['_resort!']
                                    $param: #List[
                                       $expression: #NameExpr['v']
                                    ]
                                 ]
                              ]
                           ]
                           $statement: #ApplyExpr[
                              $base: #NameExpr['@@stubs_by_name']
                              $recv: #NameExpr['merge!']
                              $param: #List[
                                 $expression: #NameExpr['stubs']
                              ]
                           ]
                           $statement: #LOrAssign[
                              $left: #Indexer[
                                 $base: #NameExpr['@@stubs_by_name']
                                 $index: #List[
                                    $expression: #NameExpr['name']
                                 ]
                              ]
                              $right: #NameExpr['EMPTY']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['_resort!']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['specs']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['specs']
                        $recv: #NameExpr['sort!']
                        $body: #Block[
                           $param: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['a']
                              $item: #NameExpr['b']
                           ]
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['names']
                                 $right: #CompExpr[
                                    $left: #ApplyExpr[
                                       $recv: #NameExpr['a']
                                       $recv: #NameExpr['name']
                                    ]
                                    $right: #ApplyExpr[
                                       $recv: #NameExpr['b']
                                       $recv: #NameExpr['name']
                                    ]
                                 ]
                              ]
                              $statement: #IfExpr[
                                 $then: #Next[
                                    $expr: #List[
                                       $expression: #NameExpr['names']
                                    ]
                                 ]
                                 $cond: #ApplyExpr[
                                    $recv: #NameExpr['names']
                                    $recv: #NameExpr['nonzero?']
                                 ]
                              ]
                              $statement: #CompExpr[
                                 $left: #ApplyExpr[
                                    $recv: #NameExpr['b']
                                    $recv: #NameExpr['version']
                                 ]
                                 $right: #ApplyExpr[
                                    $recv: #NameExpr['a']
                                    $recv: #NameExpr['version']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['load_defaults']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['each_spec']
                        $param: #List[
                           $expression: #Array[
                              $index: #List[
                                 $expression: #NameExpr['default_specifications_dir']
                              ]
                           ]
                        ]
                        $body: #Block[
                           $param: #NameExpr['spec']
                           $body: #ApplyExpr[
                              $recv: #NameExpr['Gem']
                              $recv: #NameExpr['register_default_spec']
                              $param: #List[
                                 $expression: #NameExpr['spec']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['add_spec']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['spec']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #Unless[
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['warn']
                              $param: #List[
                                 $expression: #StringExpr['Gem::Specification.add_spec is deprecated and will be removed in Rubygems 3.0']
                              ]
                           ]
                           $cond: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Deprecate']
                              ]
                              $recv: #NameExpr['skip']
                           ]
                        ]
                        $statement: #Unless[
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #StringExpr['nil spec!']
                              ]
                           ]
                           $cond: #NameExpr['spec']
                        ]
                        $statement: #IfExpr[
                           $then: #RReturnStmt['return']
                           $cond: #ApplyExpr[
                              $base: #NameExpr['_all']
                              $recv: #NameExpr['include?']
                              $param: #List[
                                 $expression: #NameExpr['spec']
                              ]
                           ]
                        ]
                        $statement: #LShiftExpr[
                           $left: #NameExpr['_all']
                           $right: #NameExpr['spec']
                        ]
                        $statement: #LShiftExpr[
                           $left: #NameExpr['stubs']
                           $right: #NameExpr['spec']
                        ]
                        $statement: #LShiftExpr[
                           $left: #LOrAssign[
                              $left: #Indexer[
                                 $base: #NameExpr['@@stubs_by_name']
                                 $index: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['spec']
                                       $recv: #NameExpr['name']
                                    ]
                                 ]
                              ]
                              $right: #Array['[]']
                           ]
                           $right: #NameExpr['spec']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['sort_by!']
                           $param: #List[
                              $expression: #Indexer[
                                 $recv: #NameExpr['@@stubs_by_name']
                                 $index: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['spec']
                                       $recv: #NameExpr['name']
                                    ]
                                 ]
                              ]
                           ]
                           $body: #Block[
                              $param: #NameExpr['s']
                              $body: #ApplyExpr[
                                 $recv: #NameExpr['s']
                                 $recv: #NameExpr['version']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['_resort!']
                           $param: #List[
                              $expression: #NameExpr['_all']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['_resort!']
                           $param: #List[
                              $expression: #NameExpr['stubs']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['add_specs']
                  $param: #List[
                     $param: #VariadicParam[
                        $name: #NameExpr['specs']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #Unless[
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['warn']
                              $param: #List[
                                 $expression: #StringExpr['Gem::Specification.add_specs is deprecated and will be removed in Rubygems 3.0']
                              ]
                           ]
                           $cond: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Deprecate']
                              ]
                              $recv: #NameExpr['skip']
                           ]
                        ]
                        $statement: #IfExpr[
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #StringExpr['nil spec!']
                              ]
                           ]
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['specs']
                              $recv: #NameExpr['any?']
                              $param: #List[
                                 $procedure: #Procedure[
                                    $base: #NameExpr['nil?']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #Field[
                              $recv: #NameExpr['Gem']
                              $name: #NameExpr['Deprecate']
                           ]
                           $recv: #NameExpr['skip_during']
                           $body: #Block[
                              $body: #ApplyExpr[
                                 $recv: #NameExpr['specs']
                                 $recv: #NameExpr['each']
                                 $body: #Block[
                                    $param: #NameExpr['spec']
                                    $body: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['add_spec']
                                       $param: #List[
                                          $expression: #NameExpr['spec']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['all']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #Unless[
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['warn']
                              $param: #List[
                                 $expression: #StringExpr[
                                    $inner: #ApplyExpr[
                                       $recv: #NameExpr['caller']
                                       $recv: #NameExpr['first']
                                    ]
                                 ]
                              ]
                           ]
                           $cond: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Deprecate']
                              ]
                              $recv: #NameExpr['skip']
                           ]
                        ]
                        $statement: #NameExpr['_all']
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['all=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['specs']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['@@stubs_by_name']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['specs']
                              $recv: #NameExpr['group_by']
                              $param: #List[
                                 $procedure: #Procedure[
                                    $base: #NameExpr['name']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@@all']
                           $right: #AssignExpr[
                              $left: #NameExpr['@@stubs']
                              $right: #NameExpr['specs']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['all_names']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #ApplyExpr[
                           $recv: #Self['self']
                           $recv: #NameExpr['_all']
                        ]
                        $recv: #NameExpr['map']
                        $param: #List[
                           $procedure: #Procedure[
                              $base: #NameExpr['full_name']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['array_attributes']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['@@array_attributes']
                        $recv: #NameExpr['dup']
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['attribute_names']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['@@attributes']
                        $recv: #NameExpr['dup']
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['dirs']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@@dirs']
                        $right: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #NameExpr['Gem']
                              $recv: #NameExpr['path']
                           ]
                           $recv: #NameExpr['collect']
                           $body: #Block[
                              $param: #NameExpr['dir']
                              $body: #ApplyExpr[
                                 $base: #NameExpr['File']
                                 $recv: #NameExpr['join']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #ApplyExpr[
                                          $recv: #NameExpr['dir']
                                          $recv: #NameExpr['dup']
                                       ]
                                       $recv: #NameExpr['untaint']
                                    ]
                                    $expression: #StringExpr['specifications']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['dirs=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['dirs']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $recv: #Self['self']
                           $recv: #NameExpr['reset']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@@dirs']
                           $right: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['Array']
                                 $param: #List[
                                    $expression: #NameExpr['dirs']
                                 ]
                              ]
                              $recv: #NameExpr['map']
                              $body: #Block[
                                 $param: #NameExpr['dir']
                                 $body: #ApplyExpr[
                                    $base: #NameExpr['File']
                                    $recv: #NameExpr['join']
                                    $param: #List[
                                       $expression: #NameExpr['dir']
                                       $expression: #StringExpr['specifications']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['extend']
                  $param: #List[
                     $expression: #NameExpr['Enumerable']
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['each']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #Unless[
                           $then: #RReturnStmt[
                              $expr: #List[
                                 $expression: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['enum_for']
                                    $param: #List[
                                       $expression: #NameExpr['each']
                                    ]
                                 ]
                              ]
                           ]
                           $cond: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['block_given?']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #Self['self']
                              $recv: #NameExpr['_all']
                           ]
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['x']
                              $body: #Yield[
                                 $param: #List[
                                    $expression: #NameExpr['x']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['find_all_by_name']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['name']
                     ]
                     $param: #VariadicParam[
                        $name: #NameExpr['requirements']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $then: #AssignExpr[
                              $left: #NameExpr['requirements']
                              $right: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Requirement']
                                 ]
                                 $recv: #NameExpr['default']
                              ]
                           ]
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['requirements']
                              $recv: #NameExpr['empty?']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Dependency']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #NameExpr['name']
                                 $variadic: #Variadic[
                                    $base: #NameExpr['requirements']
                                 ]
                              ]
                           ]
                           $recv: #NameExpr['matching_specs']
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['find_by_name']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['name']
                     ]
                     $param: #VariadicParam[
                        $name: #NameExpr['requirements']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $then: #AssignExpr[
                              $left: #NameExpr['requirements']
                              $right: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Requirement']
                                 ]
                                 $recv: #NameExpr['default']
                              ]
                           ]
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['requirements']
                              $recv: #NameExpr['empty?']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Dependency']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #NameExpr['name']
                                 $variadic: #Variadic[
                                    $base: #NameExpr['requirements']
                                 ]
                              ]
                           ]
                           $recv: #NameExpr['to_spec']
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['find_by_path']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['path']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['path']
                           $right: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #NameExpr['path']
                                 $recv: #NameExpr['dup']
                              ]
                              $recv: #NameExpr['freeze']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #LOrAssign[
                              $left: #Indexer[
                                 $base: #NameExpr['@@spec_with_requirable_file']
                                 $index: #List[
                                    $expression: #NameExpr['path']
                                 ]
                              ]
                              $right: #LOr[
                                 $left: #ApplyExpr[
                                    $recv: #NameExpr['stubs']
                                    $recv: #NameExpr['find']
                                    $body: #Block[
                                       $param: #NameExpr['s']
                                       $body: #ApplyExpr[
                                          $base: #NameExpr['s']
                                          $recv: #NameExpr['contains_requirable_file?']
                                          $param: #List[
                                             $expression: #NameExpr['path']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $right: #NameExpr['NOT_FOUND']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['spec']
                           $recv: #NameExpr['to_spec']
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['find_inactive_by_path']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['path']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['stub']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['stubs']
                              $recv: #NameExpr['find']
                              $body: #Block[
                                 $param: #NameExpr['s']
                                 $body: #Unless[
                                    $then: #ApplyExpr[
                                       $base: #NameExpr['s']
                                       $recv: #NameExpr['contains_requirable_file?']
                                       $param: #List[
                                          $expression: #NameExpr['path']
                                       ]
                                    ]
                                    $cond: #ApplyExpr[
                                       $recv: #NameExpr['s']
                                       $recv: #NameExpr['activated?']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['stub']
                           $recv: #NameExpr['&']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['stub']
                                 $recv: #NameExpr['to_spec']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['find_active_stub_by_path']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['path']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['stub']
                           $right: #LOrAssign[
                              $left: #Indexer[
                                 $base: #NameExpr['@@active_stub_with_requirable_file']
                                 $index: #List[
                                    $expression: #NameExpr['path']
                                 ]
                              ]
                              $right: #LOr[
                                 $left: #ApplyExpr[
                                    $recv: #NameExpr['stubs']
                                    $recv: #NameExpr['find']
                                    $body: #Block[
                                       $param: #NameExpr['s']
                                       $body: #AndExpr[
                                          $left: #ApplyExpr[
                                             $recv: #NameExpr['s']
                                             $recv: #NameExpr['activated?']
                                          ]
                                          $right: #ApplyExpr[
                                             $base: #NameExpr['s']
                                             $recv: #NameExpr['contains_requirable_file?']
                                             $param: #List[
                                                $expression: #NameExpr['path']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $right: #NameExpr['NOT_FOUND']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['stub']
                           $recv: #NameExpr['this']
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['find_in_unresolved']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['path']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['specs']
                           $right: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['unresolved_deps']
                                    $recv: #NameExpr['values']
                                 ]
                                 $recv: #NameExpr['map']
                                 $body: #Block[
                                    $param: #NameExpr['dep']
                                    $body: #ApplyExpr[
                                       $recv: #NameExpr['dep']
                                       $recv: #NameExpr['to_specs']
                                    ]
                                 ]
                              ]
                              $recv: #NameExpr['flatten']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['specs']
                           $recv: #NameExpr['find_all']
                           $body: #Block[
                              $param: #NameExpr['spec']
                              $body: #ApplyExpr[
                                 $base: #NameExpr['spec']
                                 $recv: #NameExpr['contains_requirable_file?']
                                 $param: #List[
                                    $expression: #NameExpr['path']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['find_in_unresolved_tree']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['path']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['specs']
                           $right: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['unresolved_deps']
                                    $recv: #NameExpr['values']
                                 ]
                                 $recv: #NameExpr['map']
                                 $body: #Block[
                                    $param: #NameExpr['dep']
                                    $body: #ApplyExpr[
                                       $recv: #NameExpr['dep']
                                       $recv: #NameExpr['to_specs']
                                    ]
                                 ]
                              ]
                              $recv: #NameExpr['flatten']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['specs']
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['spec']
                              $body: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['traverse']
                                 $body: #Block[
                                    $param: #MultipleLeftHandSideExpression[
                                       $item: #NameExpr['from_spec']
                                       $item: #NameExpr['dep']
                                       $item: #NameExpr['to_spec']
                                       $item: #NameExpr['trail']
                                    ]
                                    $body: #IfExpr[
                                       $cond: #LOr[
                                          $left: #ApplyExpr[
                                             $recv: #NameExpr['to_spec']
                                             $recv: #NameExpr['has_conflicts?']
                                          ]
                                          $right: #ApplyExpr[
                                             $recv: #NameExpr['to_spec']
                                             $recv: #NameExpr['conficts_when_loaded_with?']
                                             $param: #List[
                                                $expression: #NameExpr['trail']
                                             ]
                                          ]
                                       ]
                                       $then: #NameExpr['next']
                                       $else: #IfExpr[
                                          $then: #RReturnStmt[
                                             $expr: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #NameExpr['trail']
                                                   $recv: #NameExpr['reverse']
                                                ]
                                             ]
                                          ]
                                          $cond: #ApplyExpr[
                                             $base: #NameExpr['to_spec']
                                             $recv: #NameExpr['contains_requirable_file?']
                                             $param: #List[
                                                $expression: #NameExpr['path']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #Array['[]']
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['from_yaml']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['input']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['Gem']
                           $recv: #NameExpr['load_yaml']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['input']
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['normalize_yaml_input']
                              $param: #List[
                                 $expression: #NameExpr['input']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $base: #NameExpr['YAML']
                              $recv: #NameExpr['load']
                              $param: #List[
                                 $expression: #NameExpr['input']
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #ApplyExpr[
                              $base: #NameExpr['spec']
                              $recv: #NameExpr['&']
                              $param: #List[
                                 $expression: #EqExpr[
                                    $left: #ApplyExpr[
                                       $recv: #NameExpr['spec']
                                       $recv: #NameExpr['class']
                                    ]
                                    $right: #NameExpr['FalseClass']
                                 ]
                              ]
                           ]
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['EndOfYAMLException']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $cond: #StrictEquals[
                              $left: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $right: #NameExpr['spec']
                           ]
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Exception']
                                 ]
                                 $expression: #StringExpr['YAML data doesn\'t evaluate to gem specification']
                              ]
                           ]
                        ]
                        $statement: #LOrAssign[
                           $left: #Field[
                              $base: #NameExpr['spec']
                              $name: #NameExpr['specification_version']
                           ]
                           $right: #NameExpr['NONEXISTENT_SPECIFICATION_VERSION']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['spec']
                           $recv: #NameExpr['reset_nil_attributes_to_default']
                        ]
                        $statement: #NameExpr['spec']
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['latest_specs']
                  $param: #List[
                     $param: #OptionalParam[
                        $name: #NameExpr['prerelease']
                        $default: #FalseExpr['false']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #NameExpr['_latest_specs']
                        $param: #List[
                           $expression: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['_all']
                           ]
                           $expression: #NameExpr['prerelease']
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['_latest_specs']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['specs']
                     ]
                     $param: #OptionalParam[
                        $name: #NameExpr['prerelease']
                        $default: #FalseExpr['false']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['result']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['Hash']
                              $recv: #NameExpr['new']
                              $body: #Block[
                                 $param: #MultipleLeftHandSideExpression[
                                    $item: #NameExpr['h']
                                    $item: #NameExpr['k']
                                 ]
                                 $body: #AssignExpr[
                                    $left: #Indexer[
                                       $base: #NameExpr['h']
                                       $index: #List[
                                          $expression: #NameExpr['k']
                                       ]
                                    ]
                                    $right: #List['{}']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['native']
                           $right: #List['{}']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['specs']
                           $recv: #NameExpr['reverse_each']
                           $body: #Block[
                              $param: #NameExpr['spec']
                              $body: #List[
                                 $statement: #Unless[
                                    $then: #IfExpr[
                                       $then: #Next['next']
                                       $cond: #ApplyExpr[
                                          $recv: #ApplyExpr[
                                             $recv: #NameExpr['spec']
                                             $recv: #NameExpr['version']
                                          ]
                                          $recv: #NameExpr['prerelease?']
                                       ]
                                    ]
                                    $cond: #NameExpr['prerelease']
                                 ]
                                 $statement: #IfExpr[
                                    $then: #AssignExpr[
                                       $left: #Indexer[
                                          $base: #NameExpr['native']
                                          $index: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #NameExpr['spec']
                                                $recv: #NameExpr['name']
                                             ]
                                          ]
                                       ]
                                       $right: #ApplyExpr[
                                          $recv: #NameExpr['spec']
                                          $recv: #NameExpr['version']
                                       ]
                                    ]
                                    $cond: #EqExpr[
                                       $left: #ApplyExpr[
                                          $recv: #NameExpr['spec']
                                          $recv: #NameExpr['platform']
                                       ]
                                       $right: #Field[
                                          $recv: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['Platform']
                                          ]
                                          $name: #NameExpr['RUBY']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Indexer[
                                       $base: #Indexer[
                                          $recv: #NameExpr['result']
                                          $index: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #NameExpr['spec']
                                                $recv: #NameExpr['name']
                                             ]
                                          ]
                                       ]
                                       $index: #List[
                                          $expression: #ApplyExpr[
                                             $recv: #NameExpr['spec']
                                             $recv: #NameExpr['platform']
                                          ]
                                       ]
                                    ]
                                    $right: #NameExpr['spec']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #NameExpr['result']
                                       $recv: #NameExpr['map']
                                       $param: #List[
                                          $procedure: #Procedure[
                                             $base: #NameExpr['last']
                                          ]
                                       ]
                                    ]
                                    $recv: #NameExpr['map']
                                    $param: #List[
                                       $procedure: #Procedure[
                                          $base: #NameExpr['values']
                                       ]
                                    ]
                                 ]
                                 $recv: #NameExpr['flatten']
                              ]
                              $recv: #NameExpr['reject']
                              $body: #Block[
                                 $param: #NameExpr['spec']
                                 $body: #List[
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['minimum']
                                       $right: #Indexer[
                                          $recv: #NameExpr['native']
                                          $index: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #NameExpr['spec']
                                                $recv: #NameExpr['name']
                                             ]
                                          ]
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $base: #NameExpr['minimum']
                                       $recv: #NameExpr['&']
                                       $param: #List[
                                          $expression: #LtExpr[
                                             $left: #ApplyExpr[
                                                $recv: #NameExpr['spec']
                                                $recv: #NameExpr['version']
                                             ]
                                             $right: #NameExpr['minimum']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                           $recv: #NameExpr['sort_by']
                           $body: #Block[
                              $param: #NameExpr['tup']
                              $body: #ApplyExpr[
                                 $recv: #NameExpr['tup']
                                 $recv: #NameExpr['name']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['load']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['file']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #Unless[
                           $then: #RReturnStmt['return']
                           $cond: #NameExpr['file']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['_spec']
                           $right: #Indexer[
                              $recv: #NameExpr['LOAD_CACHE']
                              $index: #List[
                                 $expression: #NameExpr['file']
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $then: #RReturnStmt[
                              $expr: #List[
                                 $expression: #NameExpr['_spec']
                              ]
                           ]
                           $cond: #NameExpr['_spec']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['file']
                           $right: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #NameExpr['file']
                                 $recv: #NameExpr['dup']
                              ]
                              $recv: #NameExpr['untaint']
                           ]
                        ]
                        $statement: #Unless[
                           $then: #RReturnStmt['return']
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['File']
                              $recv: #NameExpr['file?']
                              $param: #List[
                                 $expression: #NameExpr['file']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['code']
                           $right: #IfExpr[
                              $cond: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['defined?']
                                 $param: #List[
                                    $expression: #NameExpr['Encoding']
                                 ]
                              ]
                              $then: #ApplyExpr[
                                 $base: #NameExpr['File']
                                 $recv: #NameExpr['read']
                                 $param: #List[
                                    $expression: #NameExpr['file']
                                    $hash: #Hash[
                                       $key: #NameExpr['mode']
                                       $value: #StringExpr['r:UTF-8:-']
                                    ]
                                 ]
                              ]
                              $else: #ApplyExpr[
                                 $base: #NameExpr['File']
                                 $recv: #NameExpr['read']
                                 $param: #List[
                                    $expression: #NameExpr['file']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['code']
                           $recv: #NameExpr['untaint']
                        ]
                        $statement: #ExceptionBlock[
                           $main: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['_spec']
                                 $right: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['eval']
                                    $param: #List[
                                       $expression: #NameExpr['code']
                                       $expression: #NameExpr['binding']
                                       $expression: #NameExpr['file']
                                    ]
                                 ]
                              ]
                              $statement: #IfExpr[
                                 $cond: #StrictEquals[
                                    $left: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Specification']
                                    ]
                                    $right: #NameExpr['_spec']
                                 ]
                                 $then: #List[
                                    $statement: #AssignExpr[
                                       $left: #Field[
                                          $base: #NameExpr['_spec']
                                          $name: #NameExpr['loaded_from']
                                       ]
                                       $right: #ApplyExpr[
                                          $base: #NameExpr['File']
                                          $recv: #NameExpr['expand_path']
                                          $param: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #NameExpr['file']
                                                $recv: #NameExpr['to_s']
                                             ]
                                          ]
                                       ]
                                    ]
                                    $statement: #AssignExpr[
                                       $left: #Indexer[
                                          $base: #NameExpr['LOAD_CACHE']
                                          $index: #List[
                                             $expression: #NameExpr['file']
                                          ]
                                       ]
                                       $right: #NameExpr['_spec']
                                    ]
                                    $statement: #RReturnStmt[
                                       $expr: #List[
                                          $expression: #NameExpr['_spec']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['warn']
                                 $param: #List[
                                    $expression: #StringExpr[
                                       $inner: #NameExpr['file']
                                       $inner: #ApplyExpr[
                                          $recv: #NameExpr['_spec']
                                          $recv: #NameExpr['class']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                           $rescue: #List[
                              $rescue: #Rescue[
                                 $class: #MultipleRightHandSideExpression[
                                    $expression: #NameExpr['SignalException']
                                    $expression: #NameExpr['SystemExit']
                                 ]
                                 $then: #NameExpr['raise']
                              ]
                              $rescue: #Rescue[
                                 $class: #MultipleRightHandSideExpression[
                                    $expression: #NameExpr['SyntaxError']
                                    $expression: #NameExpr['Exception']
                                 ]
                                 $target: #NameExpr['e']
                                 $then: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['warn']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['file']
                                          $inner: #NameExpr['e']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #Nil['nil']
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['non_nil_attributes']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['@@non_nil_attributes']
                        $recv: #NameExpr['dup']
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['normalize_yaml_input']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['input']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['result']
                           $right: #Conditional[
                              $cond: #ApplyExpr[
                                 $recv: #NameExpr['input']
                                 $recv: #NameExpr['respond_to?']
                                 $param: #List[
                                    $expression: #NameExpr['read']
                                 ]
                              ]
                              $then: #ApplyExpr[
                                 $recv: #NameExpr['input']
                                 $recv: #NameExpr['read']
                              ]
                              $else: #NameExpr['input']
                           ]
                        ]
                        $statement: #Unless[
                           $then: #AssignExpr[
                              $left: #NameExpr['result']
                              $right: #AddExpr[
                                 $left: #StringExpr['--- ']
                                 $right: #NameExpr['result']
                              ]
                           ]
                           $cond: #AssignExpr[
                              $left: #NameExpr['result']
                              $right: #ComplExpr[
                                 $expr: #Regex['/\\A--- /']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['result']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['result']
                              $recv: #NameExpr['dup']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['result']
                           $recv: #NameExpr['gsub!']
                           $param: #List[
                              $expression: #Regex['/ !!null \\n/']
                              $expression: #StringExpr[' \\n']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['result']
                           $recv: #NameExpr['gsub!']
                           $param: #List[
                              $expression: #Regex['/^(date: \\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\.\\d+?)Z/']
                              $expression: #StringExpr['\\1 Z']
                           ]
                        ]
                        $statement: #NameExpr['result']
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['outdated']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['outdated_and_latest_version']
                        $recv: #NameExpr['map']
                        $body: #Block[
                           $param: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['local']
                              $item: #NameExpr['_']
                           ]
                           $body: #ApplyExpr[
                              $recv: #NameExpr['local']
                              $recv: #NameExpr['name']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['outdated_and_latest_version']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #Unless[
                           $then: #RReturnStmt[
                              $expr: #List[
                                 $command: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['enum_for']
                                    $param: #List[
                                       $expression: #NameExpr['__method__']
                                    ]
                                 ]
                              ]
                           ]
                           $cond: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['block_given?']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['fetcher']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['SpecFetcher']
                              ]
                              $recv: #NameExpr['fetcher']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['latest_specs']
                              $param: #List[
                                 $expression: #TrueExpr['true']
                              ]
                           ]
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['local_spec']
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['dependency']
                                    $right: #ApplyExpr[
                                       $base: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Dependency']
                                       ]
                                       $recv: #NameExpr['new']
                                       $param: #List[
                                          $expression: #ApplyExpr[
                                             $recv: #NameExpr['local_spec']
                                             $recv: #NameExpr['name']
                                          ]
                                          $expression: #StringExpr[
                                             $inner: #ApplyExpr[
                                                $recv: #NameExpr['local_spec']
                                                $recv: #NameExpr['version']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #MultipleAssign[
                                    $left: #MultipleLeftHandSideExpression[
                                       $item: #NameExpr['remotes']
                                    ]
                                    $right: #ApplyExpr[
                                       $base: #NameExpr['fetcher']
                                       $recv: #NameExpr['search_for_dependency']
                                       $param: #List[
                                          $expression: #NameExpr['dependency']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['remotes']
                                    $right: #ApplyExpr[
                                       $recv: #NameExpr['remotes']
                                       $recv: #NameExpr['map']
                                       $body: #Block[
                                          $param: #MultipleLeftHandSideExpression[
                                             $item: #NameExpr['n']
                                             $item: #NameExpr['_']
                                          ]
                                          $body: #ApplyExpr[
                                             $recv: #NameExpr['n']
                                             $recv: #NameExpr['version']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['latest_remote']
                                    $right: #ApplyExpr[
                                       $recv: #ApplyExpr[
                                          $recv: #NameExpr['remotes']
                                          $recv: #NameExpr['sort']
                                       ]
                                       $recv: #NameExpr['last']
                                    ]
                                 ]
                                 $statement: #IfExpr[
                                    $then: #Yield[
                                       $param: #List[
                                          $expression: #Array[
                                             $index: #List[
                                                $expression: #NameExpr['local_spec']
                                                $expression: #NameExpr['latest_remote']
                                             ]
                                          ]
                                       ]
                                    ]
                                    $cond: #AndExpr[
                                       $left: #NameExpr['latest_remote']
                                       $right: #LtExpr[
                                          $left: #ApplyExpr[
                                             $recv: #NameExpr['local_spec']
                                             $recv: #NameExpr['version']
                                          ]
                                          $right: #NameExpr['latest_remote']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #Nil['nil']
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['remove_spec']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['spec']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #Unless[
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['warn']
                              $param: #List[
                                 $expression: #StringExpr['Gem::Specification.remove_spec is deprecated and will be removed in Rubygems 3.0']
                              ]
                           ]
                           $cond: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Deprecate']
                              ]
                              $recv: #NameExpr['skip']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['_all']
                           $recv: #NameExpr['delete']
                           $param: #List[
                              $expression: #NameExpr['spec']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['stubs']
                           $recv: #NameExpr['delete_if']
                           $body: #Block[
                              $param: #NameExpr['s']
                              $body: #EqExpr[
                                 $left: #ApplyExpr[
                                    $recv: #NameExpr['s']
                                    $recv: #NameExpr['full_name']
                                 ]
                                 $right: #ApplyExpr[
                                    $recv: #NameExpr['spec']
                                    $recv: #NameExpr['full_name']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #LOr[
                              $left: #Indexer[
                                 $recv: #NameExpr['@@stubs_by_name']
                                 $index: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['spec']
                                       $recv: #NameExpr['name']
                                    ]
                                 ]
                              ]
                              $right: #Array['[]']
                           ]
                           $recv: #NameExpr['delete_if']
                           $body: #Block[
                              $param: #NameExpr['s']
                              $body: #EqExpr[
                                 $left: #ApplyExpr[
                                    $recv: #NameExpr['s']
                                    $recv: #NameExpr['full_name']
                                 ]
                                 $right: #ApplyExpr[
                                    $recv: #NameExpr['spec']
                                    $recv: #NameExpr['full_name']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #NameExpr['reset']
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['required_attribute?']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['name']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $base: #NameExpr['@@required_attributes']
                        $recv: #NameExpr['include?']
                        $param: #List[
                           $expression: #ApplyExpr[
                              $recv: #NameExpr['name']
                              $recv: #NameExpr['to_sym']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['required_attributes']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['@@required_attributes']
                        $recv: #NameExpr['dup']
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['reset']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['@@dirs']
                           $right: #Nil['nil']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #NameExpr['Gem']
                              $recv: #NameExpr['pre_reset_hooks']
                           ]
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['hook']
                              $body: #ApplyExpr[
                                 $recv: #NameExpr['hook']
                                 $recv: #NameExpr['call']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@@all']
                           $right: #Nil['nil']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@@stubs']
                           $right: #Nil['nil']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@@stubs_by_name']
                           $right: #List['{}']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@@spec_with_requirable_file']
                           $right: #List['{}']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@@active_stub_with_requirable_file']
                           $right: #List['{}']
                        ]
                        $statement: #NameExpr['_clear_load_cache']
                        $statement: #AssignExpr[
                           $left: #NameExpr['unresolved']
                           $right: #NameExpr['unresolved_deps']
                        ]
                        $statement: #Unless[
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['unresolved']
                              $recv: #NameExpr['empty?']
                           ]
                           $then: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['w']
                                 $right: #AddExpr[
                                    $left: #StringExpr['W']
                                    $right: #StringExpr['ARN']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['warn']
                                 $param: #List[
                                    $expression: #StringExpr[
                                       $inner: #NameExpr['w']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['unresolved']
                                    $recv: #NameExpr['values']
                                 ]
                                 $recv: #NameExpr['each']
                                 $body: #Block[
                                    $param: #NameExpr['dep']
                                    $body: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['warn']
                                       $param: #List[
                                          $expression: #StringExpr[
                                             $inner: #NameExpr['dep']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['warn']
                                 $param: #List[
                                    $expression: #StringExpr[
                                       $inner: #NameExpr['w']
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['warn']
                                 $param: #List[
                                    $expression: #StringExpr['Please report a bug if this causes problems.']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['unresolved']
                                 $recv: #NameExpr['clear']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #NameExpr['Gem']
                              $recv: #NameExpr['post_reset_hooks']
                           ]
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['hook']
                              $body: #ApplyExpr[
                                 $recv: #NameExpr['hook']
                                 $recv: #NameExpr['call']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['unresolved_deps']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@unresolved_deps']
                        $right: #ApplyExpr[
                           $recv: #NameExpr['Hash']
                           $recv: #NameExpr['new']
                           $body: #Block[
                              $param: #MultipleLeftHandSideExpression[
                                 $item: #NameExpr['h']
                                 $item: #NameExpr['n']
                              ]
                              $body: #AssignExpr[
                                 $left: #Indexer[
                                    $base: #NameExpr['h']
                                    $index: #List[
                                       $expression: #NameExpr['n']
                                    ]
                                 ]
                                 $right: #ApplyExpr[
                                    $base: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Dependency']
                                    ]
                                    $recv: #NameExpr['new']
                                    $param: #List[
                                       $expression: #NameExpr['n']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #Self['self']
                  $name: #NameExpr['_load']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['str']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['array']
                           $right: #ApplyExpr[
                              $base: #NameExpr['Marshal']
                              $recv: #NameExpr['load']
                              $param: #List[
                                 $expression: #NameExpr['str']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['new']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@specification_version']
                              $expression: #Indexer[
                                 $recv: #NameExpr['array']
                                 $index: #List[
                                    $expression: #IntExpr['1']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['current_version']
                           $right: #NameExpr['CURRENT_SPECIFICATION_VERSION']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['field_count']
                           $right: #IfExpr[
                              $cond: #GtExpr[
                                 $left: #ApplyExpr[
                                    $recv: #NameExpr['spec']
                                    $recv: #NameExpr['specification_version']
                                 ]
                                 $right: #NameExpr['current_version']
                              ]
                              $then: #List[
                                 $statement: #ApplyExpr[
                                    $base: #NameExpr['spec']
                                    $recv: #NameExpr['instance_variable_set']
                                    $param: #List[
                                       $expression: #NameExpr['@specification_version']
                                       $expression: #NameExpr['current_version']
                                    ]
                                 ]
                                 $statement: #Indexer[
                                    $recv: #NameExpr['MARSHAL_FIELDS']
                                    $index: #List[
                                       $expression: #NameExpr['current_version']
                                    ]
                                 ]
                              ]
                              $else: #Indexer[
                                 $recv: #NameExpr['MARSHAL_FIELDS']
                                 $index: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['spec']
                                       $recv: #NameExpr['specification_version']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #LtExpr[
                              $left: #ApplyExpr[
                                 $recv: #NameExpr['array']
                                 $recv: #NameExpr['size']
                              ]
                              $right: #NameExpr['field_count']
                           ]
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #NameExpr['TypeError']
                                 $expression: #StringExpr[
                                    $inner: #ApplyExpr[
                                       $recv: #NameExpr['array']
                                       $recv: #NameExpr['inspect']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['array']
                           $recv: #NameExpr['map!']
                           $body: #Block[
                              $param: #NameExpr['e']
                              $body: #Conditional[
                                 $cond: #ApplyExpr[
                                    $recv: #NameExpr['e']
                                    $recv: #NameExpr['kind_of?']
                                    $param: #List[
                                       $expression: #Field[
                                          $recv: #NameExpr['YAML']
                                          $name: #NameExpr['PrivateType']
                                       ]
                                    ]
                                 ]
                                 $then: #Nil['nil']
                                 $else: #NameExpr['e']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@rubygems_version']
                              $expression: #Indexer[
                                 $recv: #NameExpr['array']
                                 $index: #List[
                                    $expression: #IntExpr['0']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@name']
                              $expression: #Indexer[
                                 $recv: #NameExpr['array']
                                 $index: #List[
                                    $expression: #IntExpr['2']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@version']
                              $expression: #Indexer[
                                 $recv: #NameExpr['array']
                                 $index: #List[
                                    $expression: #IntExpr['3']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['spec']
                              $name: #NameExpr['date']
                           ]
                           $right: #Indexer[
                              $recv: #NameExpr['array']
                              $index: #List[
                                 $expression: #IntExpr['4']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@summary']
                              $expression: #Indexer[
                                 $recv: #NameExpr['array']
                                 $index: #List[
                                    $expression: #IntExpr['5']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@required_ruby_version']
                              $expression: #Indexer[
                                 $recv: #NameExpr['array']
                                 $index: #List[
                                    $expression: #IntExpr['6']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@required_rubygems_version']
                              $expression: #Indexer[
                                 $recv: #NameExpr['array']
                                 $index: #List[
                                    $expression: #IntExpr['7']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@original_platform']
                              $expression: #Indexer[
                                 $recv: #NameExpr['array']
                                 $index: #List[
                                    $expression: #IntExpr['8']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@dependencies']
                              $expression: #Indexer[
                                 $recv: #NameExpr['array']
                                 $index: #List[
                                    $expression: #IntExpr['9']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@rubyforge_project']
                              $expression: #Indexer[
                                 $recv: #NameExpr['array']
                                 $index: #List[
                                    $expression: #IntExpr['10']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@email']
                              $expression: #Indexer[
                                 $recv: #NameExpr['array']
                                 $index: #List[
                                    $expression: #IntExpr['11']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@authors']
                              $expression: #Indexer[
                                 $recv: #NameExpr['array']
                                 $index: #List[
                                    $expression: #IntExpr['12']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@description']
                              $expression: #Indexer[
                                 $recv: #NameExpr['array']
                                 $index: #List[
                                    $expression: #IntExpr['13']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@homepage']
                              $expression: #Indexer[
                                 $recv: #NameExpr['array']
                                 $index: #List[
                                    $expression: #IntExpr['14']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@has_rdoc']
                              $expression: #Indexer[
                                 $recv: #NameExpr['array']
                                 $index: #List[
                                    $expression: #IntExpr['15']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@new_platform']
                              $expression: #Indexer[
                                 $recv: #NameExpr['array']
                                 $index: #List[
                                    $expression: #IntExpr['16']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@platform']
                              $expression: #ApplyExpr[
                                 $recv: #Indexer[
                                    $recv: #NameExpr['array']
                                    $index: #List[
                                       $expression: #IntExpr['16']
                                    ]
                                 ]
                                 $recv: #NameExpr['to_s']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@license']
                              $expression: #Indexer[
                                 $recv: #NameExpr['array']
                                 $index: #List[
                                    $expression: #IntExpr['17']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@metadata']
                              $expression: #Indexer[
                                 $recv: #NameExpr['array']
                                 $index: #List[
                                    $expression: #IntExpr['18']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@loaded']
                              $expression: #FalseExpr['false']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['spec']
                           $recv: #NameExpr['instance_variable_set']
                           $param: #List[
                              $expression: #NameExpr['@activated']
                              $expression: #FalseExpr['false']
                           ]
                        ]
                        $statement: #NameExpr['spec']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['<=>']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['other']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #CompExpr[
                        $left: #NameExpr['sort_obj']
                        $right: #ApplyExpr[
                           $recv: #NameExpr['other']
                           $recv: #NameExpr['sort_obj']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['==']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['other']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #LAnd[
                        $left: #LAnd[
                           $left: #LAnd[
                              $left: #StrictEquals[
                                 $left: #ApplyExpr[
                                    $recv: #Self['self']
                                    $recv: #NameExpr['class']
                                 ]
                                 $right: #NameExpr['other']
                              ]
                              $right: #EqExpr[
                                 $left: #NameExpr['name']
                                 $right: #ApplyExpr[
                                    $recv: #NameExpr['other']
                                    $recv: #NameExpr['name']
                                 ]
                              ]
                           ]
                           $right: #EqExpr[
                              $left: #NameExpr['version']
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['other']
                                 $recv: #NameExpr['version']
                              ]
                           ]
                        ]
                        $right: #EqExpr[
                           $left: #NameExpr['platform']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['other']
                              $recv: #NameExpr['platform']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['_dump']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['limit']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $base: #NameExpr['Marshal']
                        $recv: #NameExpr['dump']
                        $param: #List[
                           $expression: #Array[
                              $index: #List[
                                 $expression: #NameExpr['@rubygems_version']
                                 $expression: #NameExpr['@specification_version']
                                 $expression: #NameExpr['@name']
                                 $expression: #NameExpr['@version']
                                 $expression: #NameExpr['date']
                                 $expression: #NameExpr['@summary']
                                 $expression: #NameExpr['@required_ruby_version']
                                 $expression: #NameExpr['@required_rubygems_version']
                                 $expression: #NameExpr['@original_platform']
                                 $expression: #NameExpr['@dependencies']
                                 $expression: #NameExpr['@rubyforge_project']
                                 $expression: #NameExpr['@email']
                                 $expression: #NameExpr['@authors']
                                 $expression: #NameExpr['@description']
                                 $expression: #NameExpr['@homepage']
                                 $expression: #TrueExpr['true']
                                 $expression: #NameExpr['@new_platform']
                                 $expression: #NameExpr['@licenses']
                                 $expression: #NameExpr['@metadata']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['activate']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['other']
                           $right: #Indexer[
                              $recv: #ApplyExpr[
                                 $recv: #NameExpr['Gem']
                                 $recv: #NameExpr['loaded_specs']
                              ]
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Self['self']
                                    $recv: #NameExpr['name']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #NameExpr['other']
                           $then: #List[
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['check_version_conflict']
                                 $param: #List[
                                    $expression: #NameExpr['other']
                                 ]
                              ]
                              $statement: #RReturnStmt[
                                 $expr: #List[
                                    $expression: #FalseExpr['false']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #NameExpr['raise_if_conflicts']
                        $statement: #NameExpr['activate_dependencies']
                        $statement: #NameExpr['add_self_to_load_path']
                        $statement: #AssignExpr[
                           $left: #Indexer[
                              $base: #ApplyExpr[
                                 $recv: #NameExpr['Gem']
                                 $recv: #NameExpr['loaded_specs']
                              ]
                              $index: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #Self['self']
                                    $recv: #NameExpr['name']
                                 ]
                              ]
                           ]
                           $right: #Self['self']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@activated']
                           $right: #TrueExpr['true']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@loaded']
                           $right: #TrueExpr['true']
                        ]
                        $statement: #RReturnStmt[
                           $expr: #List[
                              $expression: #TrueExpr['true']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['activate_dependencies']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['unresolved']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Specification']
                              ]
                              $recv: #NameExpr['unresolved_deps']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #Self['self']
                              $recv: #NameExpr['runtime_dependencies']
                           ]
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['spec_dep']
                              $body: #List[
                                 $statement: #IfExpr[
                                    $cond: #AssignExpr[
                                       $left: #NameExpr['loaded']
                                       $right: #Indexer[
                                          $recv: #ApplyExpr[
                                             $recv: #NameExpr['Gem']
                                             $recv: #NameExpr['loaded_specs']
                                          ]
                                          $index: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #NameExpr['spec_dep']
                                                $recv: #NameExpr['name']
                                             ]
                                          ]
                                       ]
                                    ]
                                    $then: #List[
                                       $statement: #IfExpr[
                                          $then: #Next['next']
                                          $cond: #ApplyExpr[
                                             $base: #NameExpr['spec_dep']
                                             $recv: #NameExpr['matches_spec?']
                                             $param: #List[
                                                $expression: #NameExpr['loaded']
                                             ]
                                          ]
                                       ]
                                       $statement: #AssignExpr[
                                          $left: #NameExpr['msg']
                                          $right: #StringExpr[
                                             $inner: #NameExpr['spec_dep']
                                             $inner: #ApplyExpr[
                                                $recv: #NameExpr['loaded']
                                                $recv: #NameExpr['full_name']
                                             ]
                                          ]
                                       ]
                                       $statement: #AssignExpr[
                                          $left: #NameExpr['e']
                                          $right: #ApplyExpr[
                                             $base: #Field[
                                                $recv: #NameExpr['Gem']
                                                $name: #NameExpr['LoadError']
                                             ]
                                             $recv: #NameExpr['new']
                                             $param: #List[
                                                $expression: #NameExpr['msg']
                                             ]
                                          ]
                                       ]
                                       $statement: #AssignExpr[
                                          $left: #Field[
                                             $base: #NameExpr['e']
                                             $name: #NameExpr['name']
                                          ]
                                          $right: #ApplyExpr[
                                             $recv: #NameExpr['spec_dep']
                                             $recv: #NameExpr['name']
                                          ]
                                       ]
                                       $statement: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['raise']
                                          $param: #List[
                                             $expression: #NameExpr['e']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['specs']
                                    $right: #ApplyExpr[
                                       $recv: #NameExpr['spec_dep']
                                       $recv: #NameExpr['to_specs']
                                    ]
                                 ]
                                 $statement: #IfExpr[
                                    $cond: #EqExpr[
                                       $left: #ApplyExpr[
                                          $recv: #NameExpr['specs']
                                          $recv: #NameExpr['size']
                                       ]
                                       $right: #IntExpr['1']
                                    ]
                                    $then: #ApplyExpr[
                                       $recv: #ApplyExpr[
                                          $recv: #NameExpr['specs']
                                          $recv: #NameExpr['first']
                                       ]
                                       $recv: #NameExpr['activate']
                                    ]
                                    $else: #List[
                                       $statement: #AssignExpr[
                                          $left: #NameExpr['name']
                                          $right: #ApplyExpr[
                                             $recv: #NameExpr['spec_dep']
                                             $recv: #NameExpr['name']
                                          ]
                                       ]
                                       $statement: #AssignExpr[
                                          $left: #Indexer[
                                             $base: #NameExpr['unresolved']
                                             $index: #List[
                                                $expression: #NameExpr['name']
                                             ]
                                          ]
                                          $right: #ApplyExpr[
                                             $base: #Indexer[
                                                $recv: #NameExpr['unresolved']
                                                $index: #List[
                                                   $expression: #NameExpr['name']
                                                ]
                                             ]
                                             $recv: #NameExpr['merge']
                                             $param: #List[
                                                $expression: #NameExpr['spec_dep']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['unresolved']
                           $recv: #NameExpr['delete']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #Self['self']
                                 $recv: #NameExpr['name']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['abbreviate']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #Self['self']
                              $name: #NameExpr['files']
                           ]
                           $right: #Array['[]']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #Self['self']
                              $name: #NameExpr['test_files']
                           ]
                           $right: #Array['[]']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #Self['self']
                              $name: #NameExpr['rdoc_options']
                           ]
                           $right: #Array['[]']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #Self['self']
                              $name: #NameExpr['extra_rdoc_files']
                           ]
                           $right: #Array['[]']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #Self['self']
                              $name: #NameExpr['cert_chain']
                           ]
                           $right: #Array['[]']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['sanitize']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #Self['self']
                              $name: #NameExpr['summary']
                           ]
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['sanitize_string']
                              $param: #List[
                                 $expression: #NameExpr['summary']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #Self['self']
                              $name: #NameExpr['description']
                           ]
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['sanitize_string']
                              $param: #List[
                                 $expression: #NameExpr['description']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #Self['self']
                              $name: #NameExpr['post_install_message']
                           ]
                           $right: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['sanitize_string']
                              $param: #List[
                                 $expression: #NameExpr['post_install_message']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #Self['self']
                              $name: #NameExpr['authors']
                           ]
                           $right: #ApplyExpr[
                              $recv: #NameExpr['authors']
                              $recv: #NameExpr['collect']
                              $body: #Block[
                                 $param: #NameExpr['a']
                                 $body: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['sanitize_string']
                                    $param: #List[
                                       $expression: #NameExpr['a']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['sanitize_string']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['string']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #Unless[
                           $then: #RReturnStmt[
                              $expr: #List[
                                 $expression: #NameExpr['string']
                              ]
                           ]
                           $cond: #NameExpr['string']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['string']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['string']
                              $recv: #NameExpr['to_s']
                           ]
                        ]
                        $statement: #ExceptionBlock[
                           $main: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Builder']
                                 $name: #NameExpr['XChar']
                              ]
                              $recv: #NameExpr['encode']
                              $param: #List[
                                 $expression: #NameExpr['string']
                              ]
                           ]
                           $rescue: #List[
                              $rescue: #Rescue[
                                 $class: #MultipleRightHandSideExpression[
                                    $expression: #NameExpr['NameError']
                                    $expression: #NameExpr['NoMethodError']
                                 ]
                                 $then: #ApplyExpr[
                                    $recv: #NameExpr['string']
                                    $recv: #NameExpr['to_xs']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['add_bindir']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['executables']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $then: #RReturnStmt[
                              $expr: #List[
                                 $expression: #Nil['nil']
                              ]
                           ]
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['executables']
                              $recv: #NameExpr['nil?']
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #NameExpr['@bindir']
                           $then: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['Array']
                                 $param: #List[
                                    $expression: #NameExpr['executables']
                                 ]
                              ]
                              $recv: #NameExpr['map']
                              $body: #Block[
                                 $param: #NameExpr['e']
                                 $body: #ApplyExpr[
                                    $recv: #NameExpr['File']
                                    $recv: #NameExpr['join']
                                    $param: #List[
                                       $expression: #NameExpr['@bindir']
                                       $expression: #NameExpr['e']
                                    ]
                                 ]
                              ]
                           ]
                           $else: #NameExpr['executables']
                        ]
                     ]
                     $rescue: #List[
                        $rescue: #Rescue[
                           $then: #RReturnStmt[
                              $expr: #List[
                                 $expression: #Nil['nil']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['add_dependency_with_type']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['dependency']
                     ]
                     $param: #Param[
                        $param: #NameExpr['type']
                     ]
                     $param: #VariadicParam[
                        $name: #NameExpr['requirements']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['requirements']
                           $right: #IfExpr[
                              $cond: #ApplyExpr[
                                 $recv: #NameExpr['requirements']
                                 $recv: #NameExpr['empty?']
                              ]
                              $then: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Requirement']
                                 ]
                                 $recv: #NameExpr['default']
                              ]
                              $else: #ApplyExpr[
                                 $recv: #NameExpr['requirements']
                                 $recv: #NameExpr['flatten']
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $cond: #LAnd[
                              $left: #ApplyExpr[
                                 $recv: #NameExpr['dependency']
                                 $recv: #NameExpr['respond_to?']
                                 $param: #List[
                                    $expression: #NameExpr['name']
                                 ]
                              ]
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['dependency']
                                 $recv: #NameExpr['respond_to?']
                                 $param: #List[
                                    $expression: #NameExpr['requirement']
                                 ]
                              ]
                           ]
                           $then: #AssignExpr[
                              $left: #NameExpr['dependency']
                              $right: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Dependency']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['dependency']
                                       $recv: #NameExpr['to_s']
                                    ]
                                    $expression: #NameExpr['requirements']
                                    $expression: #NameExpr['type']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #LShiftExpr[
                           $left: #NameExpr['dependencies']
                           $right: #NameExpr['dependency']
                        ]
                     ]
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['private']
                  $param: #List[
                     $expression: #NameExpr['add_dependency_with_type']
                  ]
               ]
               $statement: #Alias[
                  $newname: #NameExpr['add_dependency']
                  $target: #NameExpr['add_runtime_dependency']
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['add_self_to_load_path']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $then: #RReturnStmt['return']
                           $cond: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['default_gem?']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['paths']
                           $right: #NameExpr['full_require_paths']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['insert_index']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['Gem']
                              $recv: #NameExpr['load_path_insert_index']
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #NameExpr['insert_index']
                           $then: #ApplyExpr[
                              $recv: #NameExpr['$LOAD_PATH']
                              $recv: #NameExpr['insert']
                              $param: #List[
                                 $expression: #NameExpr['insert_index']
                                 $variadic: #Variadic[
                                    $base: #NameExpr['paths']
                                 ]
                              ]
                           ]
                           $else: #ApplyExpr[
                              $recv: #NameExpr['$LOAD_PATH']
                              $recv: #NameExpr['unshift']
                              $param: #List[
                                 $variadic: #Variadic[
                                    $base: #NameExpr['paths']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['author']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #AndExpr[
                        $left: #AssignExpr[
                           $left: #NameExpr['val']
                           $right: #NameExpr['authors']
                        ]
                        $right: #ApplyExpr[
                           $recv: #NameExpr['val']
                           $recv: #NameExpr['first']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['authors']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@authors']
                        $right: #Array['[]']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['bin_dir']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@bin_dir']
                        $right: #ApplyExpr[
                           $base: #NameExpr['File']
                           $recv: #NameExpr['join']
                           $param: #List[
                              $expression: #NameExpr['gem_dir']
                              $expression: #NameExpr['bindir']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['bin_file']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['name']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $base: #NameExpr['File']
                        $recv: #NameExpr['join']
                        $param: #List[
                           $expression: #NameExpr['bin_dir']
                           $expression: #NameExpr['name']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['build_args']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #IfExpr[
                        $cond: #ApplyExpr[
                           $base: #NameExpr['File']
                           $recv: #NameExpr['exist?']
                           $param: #List[
                              $expression: #NameExpr['build_info_file']
                           ]
                        ]
                        $then: #List[
                           $statement: #AssignExpr[
                              $left: #NameExpr['build_info']
                              $right: #ApplyExpr[
                                 $base: #NameExpr['File']
                                 $recv: #NameExpr['readlines']
                                 $param: #List[
                                    $expression: #NameExpr['build_info_file']
                                 ]
                              ]
                           ]
                           $statement: #AssignExpr[
                              $left: #NameExpr['build_info']
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['build_info']
                                 $recv: #NameExpr['map']
                                 $body: #Block[
                                    $param: #NameExpr['x']
                                    $body: #ApplyExpr[
                                       $recv: #NameExpr['x']
                                       $recv: #NameExpr['strip']
                                    ]
                                 ]
                              ]
                           ]
                           $statement: #ApplyExpr[
                              $base: #NameExpr['build_info']
                              $recv: #NameExpr['delete']
                              $param: #List[
                                 $expression: #StringExpr['']
                              ]
                           ]
                           $statement: #NameExpr['build_info']
                        ]
                        $else: #Array['[]']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['build_extensions']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $then: #RReturnStmt['return']
                           $cond: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['default_gem?']
                           ]
                        ]
                        $statement: #IfExpr[
                           $then: #RReturnStmt['return']
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['extensions']
                              $recv: #NameExpr['empty?']
                           ]
                        ]
                        $statement: #IfExpr[
                           $then: #RReturnStmt['return']
                           $cond: #LtExpr[
                              $left: #NameExpr['installed_by_version']
                              $right: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Version']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #StringExpr['2.2.0.preview.2']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $then: #RReturnStmt['return']
                           $cond: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['exist?']
                              $param: #List[
                                 $expression: #NameExpr['gem_build_complete_path']
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $then: #RReturnStmt['return']
                           $cond: #NotExpr[
                              $expr: #ApplyExpr[
                                 $recv: #NameExpr['File']
                                 $recv: #NameExpr['writable?']
                                 $param: #List[
                                    $expression: #NameExpr['base_dir']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $then: #RReturnStmt['return']
                           $cond: #NotExpr[
                              $expr: #ApplyExpr[
                                 $recv: #NameExpr['File']
                                 $recv: #NameExpr['exist?']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['File']
                                       $recv: #NameExpr['join']
                                       $param: #List[
                                          $expression: #NameExpr['base_dir']
                                          $expression: #StringExpr['extensions']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ExceptionBlock[
                           $main: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['unresolved_deps']
                                 $right: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Specification']
                                       ]
                                       $recv: #NameExpr['unresolved_deps']
                                    ]
                                    $recv: #NameExpr['dup']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Specification']
                                    ]
                                    $recv: #NameExpr['unresolved_deps']
                                 ]
                                 $recv: #NameExpr['clear']
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['rubygems/config_file']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['rubygems/ext']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['rubygems/user_interaction']
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['ui']
                                 $right: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['SilentUI']
                                    ]
                                    $recv: #NameExpr['new']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $base: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['DefaultUserInteraction']
                                 ]
                                 $recv: #NameExpr['use_ui']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['ui']
                                       $body: #Block[
                                          $body: #List[
                                             $statement: #AssignExpr[
                                                $left: #NameExpr['builder']
                                                $right: #ApplyExpr[
                                                   $base: #Field[
                                                      $recv: #Field[
                                                         $recv: #NameExpr['Gem']
                                                         $name: #NameExpr['Ext']
                                                      ]
                                                      $name: #NameExpr['Builder']
                                                   ]
                                                   $recv: #NameExpr['new']
                                                   $param: #List[
                                                      $expression: #Self['self']
                                                   ]
                                                ]
                                             ]
                                             $statement: #ApplyExpr[
                                                $recv: #NameExpr['builder']
                                                $recv: #NameExpr['build_extensions']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                           $ensure: #List[
                              $statement: #IfExpr[
                                 $then: #ApplyExpr[
                                    $recv: #NameExpr['ui']
                                    $recv: #NameExpr['close']
                                 ]
                                 $cond: #NameExpr['ui']
                              ]
                              $statement: #ApplyExpr[
                                 $base: #ApplyExpr[
                                    $recv: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Specification']
                                    ]
                                    $recv: #NameExpr['unresolved_deps']
                                 ]
                                 $recv: #NameExpr['replace']
                                 $param: #List[
                                    $expression: #NameExpr['unresolved_deps']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['build_info_dir']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $base: #NameExpr['File']
                        $recv: #NameExpr['join']
                        $param: #List[
                           $expression: #NameExpr['base_dir']
                           $expression: #StringExpr['build_info']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['build_info_file']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $base: #NameExpr['File']
                        $recv: #NameExpr['join']
                        $param: #List[
                           $expression: #NameExpr['build_info_dir']
                           $expression: #StringExpr[
                              $inner: #NameExpr['full_name']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['bundled_gem_in_old_ruby?']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LAnd[
                        $left: #LAnd[
                           $left: #NotExpr[
                              $expr: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['default_gem?']
                              ]
                           ]
                           $right: #LtExpr[
                              $left: #NameExpr['RUBY_VERSION']
                              $right: #StringExpr['2.0.0']
                           ]
                        ]
                        $right: #EqExpr[
                           $left: #NameExpr['summary']
                           $right: #StringExpr[
                              $inner: #NameExpr['name']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['cache_dir']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@cache_dir']
                        $right: #ApplyExpr[
                           $base: #NameExpr['File']
                           $recv: #NameExpr['join']
                           $param: #List[
                              $expression: #NameExpr['base_dir']
                              $expression: #StringExpr['cache']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['cache_file']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@cache_file']
                        $right: #ApplyExpr[
                           $base: #NameExpr['File']
                           $recv: #NameExpr['join']
                           $param: #List[
                              $expression: #NameExpr['cache_dir']
                              $expression: #StringExpr[
                                 $inner: #NameExpr['full_name']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['conflicts']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['conflicts']
                           $right: #List['{}']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #Self['self']
                              $recv: #NameExpr['runtime_dependencies']
                           ]
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['dep']
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['spec']
                                    $right: #Indexer[
                                       $recv: #ApplyExpr[
                                          $recv: #NameExpr['Gem']
                                          $recv: #NameExpr['loaded_specs']
                                       ]
                                       $index: #List[
                                          $expression: #ApplyExpr[
                                             $recv: #NameExpr['dep']
                                             $recv: #NameExpr['name']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #IfExpr[
                                    $cond: #AndExpr[
                                       $left: #NameExpr['spec']
                                       $right: #[
                                          $base: #ApplyExpr[
                                             $base: #NameExpr['spec']
                                             $recv: #NameExpr['satisfies_requirement?']
                                             $param: #List[
                                                $expression: #NameExpr['dep']
                                             ]
                                          ]
                                       ]
                                    ]
                                    $then: #LShiftExpr[
                                       $left: #LOrAssign[
                                          $left: #Indexer[
                                             $base: #NameExpr['conflicts']
                                             $index: #List[
                                                $expression: #NameExpr['spec']
                                             ]
                                          ]
                                          $right: #Array['[]']
                                       ]
                                       $right: #NameExpr['dep']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['env_req']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['Gem']
                              $recv: #NameExpr['env_requirement']
                              $param: #List[
                                 $expression: #NameExpr['name']
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $then: #LShiftExpr[
                              $left: #LOrAssign[
                                 $left: #Indexer[
                                    $base: #NameExpr['conflicts']
                                    $index: #List[
                                       $expression: #Self['self']
                                    ]
                                 ]
                                 $right: #Array['[]']
                              ]
                              $right: #NameExpr['env_req']
                           ]
                           $cond: #ApplyExpr[
                              $base: #NameExpr['env_req']
                              $recv: #NameExpr['satisfied_by?']
                              $param: #List[
                                 $expression: #NameExpr['version']
                              ]
                           ]
                        ]
                        $statement: #NameExpr['conflicts']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['conficts_when_loaded_with?']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['list_of_specs']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['result']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['list_of_specs']
                              $recv: #NameExpr['any?']
                              $body: #Block[
                                 $param: #NameExpr['spec']
                                 $body: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #NameExpr['spec']
                                       $recv: #NameExpr['dependencies']
                                    ]
                                    $recv: #NameExpr['any?']
                                    $body: #Block[
                                       $param: #NameExpr['dep']
                                       $body: #ApplyExpr[
                                          $base: #ApplyExpr[
                                             $recv: #NameExpr['dep']
                                             $recv: #NameExpr['runtime?']
                                          ]
                                          $recv: #NameExpr['&']
                                          $param: #List[
                                             $command: #ApplyExpr[
                                                $base: #EqExpr[
                                                   $left: #ApplyExpr[
                                                      $recv: #NameExpr['dep']
                                                      $recv: #NameExpr['name']
                                                   ]
                                                   $right: #NameExpr['name']
                                                ]
                                                $recv: #NameExpr['&']
                                                $param: #List[
                                                   $expression: #NotExpr[
                                                      $expr: #ApplyExpr[
                                                         #Self['self']
                                                         $recv: #NameExpr['satisfies_requirement?']
                                                         $param: #List[
                                                            $expression: #NameExpr['dep']
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #NameExpr['result']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['has_conflicts?']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #Unless[
                           $then: #RReturnStmt[
                              $expr: #List[
                                 $expression: #TrueExpr['true']
                              ]
                           ]
                           $cond: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #NameExpr['Gem']
                                 $recv: #NameExpr['env_requirement']
                                 $param: #List[
                                    $expression: #NameExpr['name']
                                 ]
                              ]
                              $recv: #NameExpr['satisfied_by?']
                              $param: #List[
                                 $expression: #NameExpr['version']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #Self['self']
                              $recv: #NameExpr['dependencies']
                           ]
                           $recv: #NameExpr['any?']
                           $body: #Block[
                              $param: #NameExpr['dep']
                              $body: #IfExpr[
                                 $cond: #ApplyExpr[
                                    $recv: #NameExpr['dep']
                                    $recv: #NameExpr['runtime?']
                                 ]
                                 $then: #List[
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['spec']
                                       $right: #Indexer[
                                          $recv: #ApplyExpr[
                                             $recv: #NameExpr['Gem']
                                             $recv: #NameExpr['loaded_specs']
                                          ]
                                          $index: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #NameExpr['dep']
                                                $recv: #NameExpr['name']
                                             ]
                                          ]
                                       ]
                                    ]
                                    $statement: #AndExpr[
                                       $left: #NameExpr['spec']
                                       $right: #[
                                          $base: #ApplyExpr[
                                             $base: #NameExpr['spec']
                                             $recv: #NameExpr['satisfies_requirement?']
                                             $param: #List[
                                                $expression: #NameExpr['dep']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $else: #FalseExpr['false']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['date']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@date']
                        $right: #NameExpr['TODAY']
                     ]
                  ]
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['DateLike']
                  $right: #ApplyExpr[
                     $recv: #NameExpr['Object']
                     $recv: #NameExpr['new']
                  ]
               ]
               $statement: #SFuncDecl[
                  $path: #NameExpr['DateLike']
                  $name: #NameExpr['===']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['obj']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AndExpr[
                        $left: #Defined[
                           $base: #NameExpr['Date']
                        ]
                        $right: #StrictEquals[
                           $left: #NameExpr['Date']
                           $right: #NameExpr['obj']
                        ]
                     ]
                  ]
               ]
               $statement: #AssignExpr[
                  $left: #NameExpr['DateTimeFormat']
                  $right: #Regex['/\\A\n     (\\d{4})-(\\d{2})-(\\d{2})\n     (\\s+ \\d{2}:\\d{2}:\\d{2}\\.\\d+ \\s* (Z | [-+]\\d\\d:\\d\\d) )?\n     \\Z/x']
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['date=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['date']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@date']
                        $right: #Case[
                           $cond: #NameExpr['date']
                           $body: #List[
                              $when: #When[
                                 $cond: #List[
                                    $expression: #NameExpr['String']
                                 ]
                                 $then: #IfExpr[
                                    $cond: #AssignExpr[
                                       $left: #NameExpr['DateTimeFormat']
                                       $right: #ComplExpr[
                                          $expr: #NameExpr['date']
                                       ]
                                    ]
                                    $then: #ApplyExpr[
                                       $recv: #NameExpr['Time']
                                       $recv: #NameExpr['utc']
                                       $param: #List[
                                          $expression: #ApplyExpr[
                                             $recv: #MatchedRegex['$1']
                                             $recv: #NameExpr['to_i']
                                          ]
                                          $expression: #ApplyExpr[
                                             $recv: #MatchedRegex['$2']
                                             $recv: #NameExpr['to_i']
                                          ]
                                          $expression: #ApplyExpr[
                                             $recv: #MatchedRegex['$3']
                                             $recv: #NameExpr['to_i']
                                          ]
                                       ]
                                    ]
                                    $else: #IfExpr[
                                       $cond: #Match[
                                          $left: #Regex['/\\A(\\d{4})-(\\d{2})-(\\d{2}) \\d{2}:\\d{2}:\\d{2}\\.\\d+?Z\\z/']
                                          $right: #NameExpr['date']
                                       ]
                                       $then: #ApplyExpr[
                                          $recv: #NameExpr['Time']
                                          $recv: #NameExpr['utc']
                                          $param: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #MatchedRegex['$1']
                                                $recv: #NameExpr['to_i']
                                             ]
                                             $expression: #ApplyExpr[
                                                $recv: #MatchedRegex['$2']
                                                $recv: #NameExpr['to_i']
                                             ]
                                             $expression: #ApplyExpr[
                                                $recv: #MatchedRegex['$3']
                                                $recv: #NameExpr['to_i']
                                             ]
                                          ]
                                       ]
                                       $else: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['raise']
                                          $param: #List[
                                             $expression: #Field[
                                                $recv: #NameExpr['Gem']
                                                $name: #NameExpr['InvalidSpecificationException']
                                             ]
                                             $expression: #StringExpr[
                                                $inner: #ApplyExpr[
                                                   $recv: #NameExpr['date']
                                                   $recv: #NameExpr['inspect']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                              $when: #When[
                                 $cond: #List[
                                    $expression: #NameExpr['Time']
                                    $expression: #NameExpr['DateLike']
                                 ]
                                 $then: #ApplyExpr[
                                    $recv: #NameExpr['Time']
                                    $recv: #NameExpr['utc']
                                    $param: #List[
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['date']
                                          $recv: #NameExpr['year']
                                       ]
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['date']
                                          $recv: #NameExpr['month']
                                       ]
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['date']
                                          $recv: #NameExpr['day']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                           $else: #NameExpr['TODAY']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['default_executable']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $cond: #AndExpr[
                              $left: #Defined[
                                 $base: #NameExpr['@default_executable']
                              ]
                              $right: #NameExpr['@default_executable']
                           ]
                           $then: #AssignExpr[
                              $left: #NameExpr['result']
                              $right: #NameExpr['@default_executable']
                           ]
                           $else: #IfExpr[
                              $cond: #AndExpr[
                                 $left: #NameExpr['@executables']
                                 $right: #EqExpr[
                                    $left: #ApplyExpr[
                                       $recv: #NameExpr['@executables']
                                       $recv: #NameExpr['size']
                                    ]
                                    $right: #IntExpr['1']
                                 ]
                              ]
                              $then: #AssignExpr[
                                 $left: #NameExpr['result']
                                 $right: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['Array']
                                       $param: #List[
                                          $expression: #NameExpr['@executables']
                                       ]
                                    ]
                                    $recv: #NameExpr['first']
                                 ]
                              ]
                              $else: #AssignExpr[
                                 $left: #NameExpr['result']
                                 $right: #Nil['nil']
                              ]
                           ]
                        ]
                        $statement: #NameExpr['result']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['default_value']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['name']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #Indexer[
                        $recv: #NameExpr['@@default_value']
                        $index: #List[
                           $expression: #NameExpr['name']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['dependencies']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@dependencies']
                        $right: #Array['[]']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['dependent_gems']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['out']
                           $right: #Array['[]']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #Field[
                              $recv: #NameExpr['Gem']
                              $name: #NameExpr['Specification']
                           ]
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['spec']
                              $body: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['spec']
                                    $recv: #NameExpr['dependencies']
                                 ]
                                 $recv: #NameExpr['each']
                                 $body: #Block[
                                    $param: #NameExpr['dep']
                                    $body: #IfExpr[
                                       $cond: #ApplyExpr[
                                          $recv: #Self['self']
                                          $recv: #NameExpr['satisfies_requirement?']
                                          $param: #List[
                                             $expression: #NameExpr['dep']
                                          ]
                                       ]
                                       $then: #List[
                                          $statement: #AssignExpr[
                                             $left: #NameExpr['sats']
                                             $right: #Array['[]']
                                          ]
                                          $statement: #ApplyExpr[
                                             #Self['self']
                                             $recv: #NameExpr['find_all_satisfiers']
                                             $param: #List[
                                                $expression: #NameExpr['dep']
                                             ]
                                             $body: #Block[
                                                $param: #NameExpr['sat']
                                                $body: #LShiftExpr[
                                                   $left: #NameExpr['sats']
                                                   $right: #NameExpr['sat']
                                                ]
                                             ]
                                          ]
                                          $statement: #LShiftExpr[
                                             $left: #NameExpr['out']
                                             $right: #Array[
                                                $index: #List[
                                                   $expression: #NameExpr['spec']
                                                   $expression: #NameExpr['dep']
                                                   $expression: #NameExpr['sats']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #NameExpr['out']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['dependent_specs']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #ApplyExpr[
                           $recv: #NameExpr['runtime_dependencies']
                           $recv: #NameExpr['map']
                           $body: #Block[
                              $param: #NameExpr['dep']
                              $body: #ApplyExpr[
                                 $recv: #NameExpr['dep']
                                 $recv: #NameExpr['to_specs']
                              ]
                           ]
                        ]
                        $recv: #NameExpr['flatten']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['description=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['str']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@description']
                        $right: #ApplyExpr[
                           $recv: #NameExpr['str']
                           $recv: #NameExpr['to_s']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['development_dependencies']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['dependencies']
                        $recv: #NameExpr['select']
                        $body: #Block[
                           $param: #NameExpr['d']
                           $body: #EqExpr[
                              $left: #ApplyExpr[
                                 $recv: #NameExpr['d']
                                 $recv: #NameExpr['type']
                              ]
                              $right: #NameExpr['development']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['doc_dir']
                  $param: #List[
                     $param: #OptionalParam[
                        $name: #NameExpr['type']
                        $default: #Nil['nil']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #LOrAssign[
                           $left: #NameExpr['@doc_dir']
                           $right: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #NameExpr['base_dir']
                                 $expression: #StringExpr['doc']
                                 $expression: #NameExpr['full_name']
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #NameExpr['type']
                           $then: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['join']
                              $param: #List[
                                 $expression: #NameExpr['@doc_dir']
                                 $expression: #NameExpr['type']
                              ]
                           ]
                           $else: #NameExpr['@doc_dir']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['encode_with']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['coder']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['mark_version']
                        $statement: #ApplyExpr[
                           $base: #NameExpr['coder']
                           $recv: #NameExpr['add']
                           $param: #List[
                              $expression: #StringExpr['name']
                              $expression: #NameExpr['@name']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['coder']
                           $recv: #NameExpr['add']
                           $param: #List[
                              $expression: #StringExpr['version']
                              $expression: #NameExpr['@version']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['platform']
                           $right: #Case[
                              $cond: #NameExpr['@original_platform']
                              $body: #List[
                                 $when: #When[
                                    $cond: #List[
                                       $expression: #Nil['nil']
                                       $expression: #StringExpr['']
                                    ]
                                    $then: #StringExpr['ruby']
                                 ]
                                 $when: #When[
                                    $cond: #List[
                                       $expression: #NameExpr['String']
                                    ]
                                    $then: #NameExpr['@original_platform']
                                 ]
                              ]
                              $else: #ApplyExpr[
                                 $recv: #NameExpr['@original_platform']
                                 $recv: #NameExpr['to_s']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['coder']
                           $recv: #NameExpr['add']
                           $param: #List[
                              $expression: #StringExpr['platform']
                              $expression: #NameExpr['platform']
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['attributes']
                           $right: #SubExpr[
                              $left: #ApplyExpr[
                                 $recv: #NameExpr['@@attributes']
                                 $recv: #NameExpr['map']
                                 $param: #List[
                                    $procedure: #Procedure[
                                       $base: #NameExpr['to_s']
                                    ]
                                 ]
                              ]
                              $right: #ParcentNotation['%w[name version platform]']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['attributes']
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['name']
                              $body: #ApplyExpr[
                                 $base: #NameExpr['coder']
                                 $recv: #NameExpr['add']
                                 $param: #List[
                                    $expression: #NameExpr['name']
                                    $expression: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['instance_variable_get']
                                       $param: #List[
                                          $expression: #StringExpr[
                                             $inner: #NameExpr['name']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['eql?']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['other']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #LAnd[
                        $left: #StrictEquals[
                           $left: #ApplyExpr[
                              $recv: #Self['self']
                              $recv: #NameExpr['class']
                           ]
                           $right: #NameExpr['other']
                        ]
                        $right: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['same_attributes?']
                           $param: #List[
                              $expression: #NameExpr['other']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['executable']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #AndExpr[
                        $left: #AssignExpr[
                           $left: #NameExpr['val']
                           $right: #NameExpr['executables']
                        ]
                        $right: #ApplyExpr[
                           $recv: #NameExpr['val']
                           $recv: #NameExpr['first']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['executable=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['o']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #Field[
                           $base: #Self['self']
                           $name: #NameExpr['executables']
                        ]
                        $right: #Array[
                           $index: #List[
                              $expression: #NameExpr['o']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['executables=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['value']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@executables']
                        $right: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['Array']
                           $param: #List[
                              $expression: #NameExpr['value']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['extensions=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['extensions']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@extensions']
                        $right: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['Array']
                           $param: #List[
                              $expression: #NameExpr['extensions']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['extra_rdoc_files=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['files']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@extra_rdoc_files']
                        $right: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['Array']
                           $param: #List[
                              $expression: #NameExpr['files']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['file_name']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #StringExpr[
                        $inner: #NameExpr['full_name']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['files=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['files']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@files']
                        $right: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['Array']
                           $param: #List[
                              $expression: #NameExpr['files']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['find_all_satisfiers']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['dep']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #Field[
                           $recv: #NameExpr['Gem']
                           $name: #NameExpr['Specification']
                        ]
                        $recv: #NameExpr['each']
                        $body: #Block[
                           $param: #NameExpr['spec']
                           $body: #IfExpr[
                              $then: #Yield[
                                 $param: #List[
                                    $expression: #NameExpr['spec']
                                 ]
                              ]
                              $cond: #ApplyExpr[
                                 $base: #NameExpr['spec']
                                 $recv: #NameExpr['satisfies_requirement?']
                                 $param: #List[
                                    $expression: #NameExpr['dep']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['private']
                  $param: #List[
                     $expression: #NameExpr['find_all_satisfiers']
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['for_cache']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['spec']
                           $right: #NameExpr['dup']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['spec']
                              $name: #NameExpr['files']
                           ]
                           $right: #Nil['nil']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['spec']
                              $name: #NameExpr['test_files']
                           ]
                           $right: #Nil['nil']
                        ]
                        $statement: #NameExpr['spec']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['full_name']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@full_name']
                        $right: #ApplyExpr[
                           #Self['self']
                           $recv: #Super['super']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['gem_dir']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        #Self['self']
                        $recv: #Super['super']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['gems_dir']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@gems_dir']
                        $right: #ApplyExpr[
                           $recv: #NameExpr['File']
                           $recv: #NameExpr['join']
                           $param: #List[
                              $command: #ApplyExpr[
                                 $base: #NameExpr['loaded_from']
                                 $recv: #NameExpr['&']
                                 $param: #List[
                                    $expression: #LOr[
                                       $left: #NameExpr['base_dir']
                                       $right: #ApplyExpr[
                                          $recv: #NameExpr['Gem']
                                          $recv: #NameExpr['dir']
                                       ]
                                    ]
                                    $expression: #StringExpr['gems']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['has_rdoc']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #TrueExpr['true']
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['has_rdoc=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['ignored']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@has_rdoc']
                        $right: #TrueExpr['true']
                     ]
                  ]
               ]
               $statement: #Alias[
                  $newname: #NameExpr['has_rdoc?']
                  $target: #NameExpr['has_rdoc']
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['has_unit_tests?']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #[
                        $base: #ApplyExpr[
                           $recv: #NameExpr['test_files']
                           $recv: #NameExpr['empty?']
                        ]
                     ]
                  ]
               ]
               $statement: #Alias[
                  $newname: #NameExpr['has_test_suite?']
                  $target: #NameExpr['has_unit_tests?']
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['hash']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #XorExpr[
                        $left: #ApplyExpr[
                           $recv: #NameExpr['name']
                           $recv: #NameExpr['hash']
                        ]
                        $right: #ApplyExpr[
                           $recv: #NameExpr['version']
                           $recv: #NameExpr['hash']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['init_with']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['coder']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #LOrAssign[
                           $left: #NameExpr['@installed_by_version']
                           $right: #Nil['nil']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['yaml_initialize']
                           $param: #List[
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['coder']
                                 $recv: #NameExpr['tag']
                              ]
                              $expression: #ApplyExpr[
                                 $recv: #NameExpr['coder']
                                 $recv: #NameExpr['map']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['initialize']
                  $param: #List[
                     $param: #OptionalParam[
                        $name: #NameExpr['name']
                        $default: #Nil['nil']
                     ]
                     $param: #OptionalParam[
                        $name: #NameExpr['version']
                        $default: #Nil['nil']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #Super['super']
                           $param: #Empty['']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@gems_dir']
                           $right: #Nil['nil']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@base_dir']
                           $right: #Nil['nil']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@loaded']
                           $right: #FalseExpr['false']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@activated']
                           $right: #FalseExpr['false']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@loaded_from']
                           $right: #Nil['nil']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@original_platform']
                           $right: #Nil['nil']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@installed_by_version']
                           $right: #Nil['nil']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@@nil_attributes']
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['key']
                              $body: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['instance_variable_set']
                                 $param: #List[
                                    $expression: #StringExpr[
                                       $inner: #NameExpr['key']
                                    ]
                                    $expression: #Nil['nil']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@@non_nil_attributes']
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['key']
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['default']
                                    $right: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['default_value']
                                       $param: #List[
                                          $expression: #NameExpr['key']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['value']
                                    $right: #Conditional[
                                       $cond: #Indexer[
                                          $recv: #NameExpr['Dupable']
                                          $index: #List[
                                             $expression: #NameExpr['key']
                                          ]
                                       ]
                                       $then: #ApplyExpr[
                                          $recv: #NameExpr['default']
                                          $recv: #NameExpr['dup']
                                       ]
                                       $else: #NameExpr['default']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['instance_variable_set']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['key']
                                       ]
                                       $expression: #NameExpr['value']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@new_platform']
                           $right: #Field[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Platform']
                              ]
                              $name: #NameExpr['RUBY']
                           ]
                        ]
                        $statement: #IfExpr[
                           $then: #AssignExpr[
                              $left: #Field[
                                 $base: #Self['self']
                                 $name: #NameExpr['name']
                              ]
                              $right: #NameExpr['name']
                           ]
                           $cond: #NameExpr['name']
                        ]
                        $statement: #IfExpr[
                           $then: #AssignExpr[
                              $left: #Field[
                                 $base: #Self['self']
                                 $name: #NameExpr['version']
                              ]
                              $right: #NameExpr['version']
                           ]
                           $cond: #NameExpr['version']
                        ]
                        $statement: #IfExpr[
                           $then: #Yield[
                              $param: #List[
                                 $expression: #Self['self']
                              ]
                           ]
                           $cond: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['block_given?']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['initialize_copy']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['other_spec']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #Self['self']
                              $recv: #NameExpr['class']
                           ]
                           $recv: #NameExpr['array_attributes']
                        ]
                        $recv: #NameExpr['each']
                        $body: #Block[
                           $param: #NameExpr['name']
                           $body: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['name']
                                 $right: #NameExpr[
                                    $inner: #NameExpr['name']
                                 ]
                              ]
                              $statement: #Unless[
                                 $then: #Next['next']
                                 $cond: #ApplyExpr[
                                    $base: #NameExpr['other_spec']
                                    $recv: #NameExpr['instance_variable_defined?']
                                    $param: #List[
                                       $expression: #NameExpr['name']
                                    ]
                                 ]
                              ]
                              $statement: #ExceptionBlock[
                                 $main: #List[
                                    $statement: #AssignExpr[
                                       $left: #NameExpr['val']
                                       $right: #ApplyExpr[
                                          $recv: #NameExpr['other_spec']
                                          $recv: #NameExpr['instance_variable_get']
                                          $param: #List[
                                             $expression: #NameExpr['name']
                                          ]
                                       ]
                                    ]
                                    $statement: #IfExpr[
                                       $cond: #NameExpr['val']
                                       $then: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['instance_variable_set']
                                          $param: #List[
                                             $expression: #NameExpr['name']
                                             $expression: #ApplyExpr[
                                                $recv: #NameExpr['val']
                                                $recv: #NameExpr['dup']
                                             ]
                                          ]
                                       ]
                                       $else: #IfExpr[
                                          $cond: #ApplyExpr[
                                             $recv: #ApplyExpr[
                                                $recv: #NameExpr['Gem']
                                                $recv: #NameExpr['configuration']
                                             ]
                                             $recv: #NameExpr['really_verbose']
                                          ]
                                          $then: #ApplyExpr[
                                             #Self['self']
                                             $recv: #NameExpr['warn']
                                             $param: #List[
                                                $expression: #StringExpr[
                                                   $inner: #NameExpr['full_name']
                                                   $inner: #NameExpr['name']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $rescue: #List[
                                    $rescue: #Rescue[
                                       $class: #NameExpr['TypeError']
                                       $then: #List[
                                          $statement: #AssignExpr[
                                             $left: #NameExpr['e']
                                             $right: #ApplyExpr[
                                                $base: #Field[
                                                   $recv: #NameExpr['Gem']
                                                   $name: #NameExpr['FormatException']
                                                ]
                                                $recv: #NameExpr['new']
                                                $param: #List[
                                                   $expression: #StringExpr[
                                                      $inner: #NameExpr['full_name']
                                                      $inner: #NameExpr['name']
                                                   ]
                                                ]
                                             ]
                                          ]
                                          $statement: #AssignExpr[
                                             $left: #Field[
                                                $base: #NameExpr['e']
                                                $name: #NameExpr['file_path']
                                             ]
                                             $right: #NameExpr['loaded_from']
                                          ]
                                          $statement: #ApplyExpr[
                                             #Self['self']
                                             $recv: #NameExpr['raise']
                                             $param: #List[
                                                $expression: #NameExpr['e']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['base_dir']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #Unless[
                           $then: #RReturnStmt[
                              $expr: #List[
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['Gem']
                                    $recv: #NameExpr['dir']
                                 ]
                              ]
                           ]
                           $cond: #NameExpr['loaded_from']
                        ]
                        $statement: #LOrAssign[
                           $left: #NameExpr['@base_dir']
                           $right: #IfExpr[
                              $cond: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['default_gem?']
                              ]
                              $then: #ApplyExpr[
                                 $base: #NameExpr['File']
                                 $recv: #NameExpr['dirname']
                                 $param: #List[
                                    $command: #ApplyExpr[
                                       $base: #NameExpr['File']
                                       $recv: #NameExpr['dirname']
                                       $param: #List[
                                          $command: #ApplyExpr[
                                             $base: #NameExpr['File']
                                             $recv: #NameExpr['dirname']
                                             $param: #List[
                                                $expression: #NameExpr['loaded_from']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                              $else: #ApplyExpr[
                                 $base: #NameExpr['File']
                                 $recv: #NameExpr['dirname']
                                 $param: #List[
                                    $command: #ApplyExpr[
                                       $base: #NameExpr['File']
                                       $recv: #NameExpr['dirname']
                                       $param: #List[
                                          $expression: #NameExpr['loaded_from']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['invalidate_memoized_attributes']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['@full_name']
                           $right: #Nil['nil']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@cache_file']
                           $right: #Nil['nil']
                        ]
                     ]
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['private']
                  $param: #List[
                     $expression: #NameExpr['invalidate_memoized_attributes']
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['inspect']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #IfExpr[
                        $cond: #NameExpr['$DEBUG']
                        $then: #ApplyExpr[
                           #Self['self']
                           $recv: #Super['super']
                        ]
                        $else: #StringExpr[
                           $inner: #ApplyExpr[
                              $recv: #Self['self']
                              $recv: #NameExpr['class']
                           ]
                           $inner: #ApplyExpr[
                              $recv: #NameExpr['__id__']
                              $recv: #NameExpr['to_s']
                              $param: #List[
                                 $expression: #IntExpr['16']
                              ]
                           ]
                           $inner: #NameExpr['full_name']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['lib_files']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['@files']
                        $recv: #NameExpr['select']
                        $body: #Block[
                           $param: #NameExpr['file']
                           $body: #ApplyExpr[
                              $recv: #NameExpr['require_paths']
                              $recv: #NameExpr['any?']
                              $body: #Block[
                                 $param: #NameExpr['path']
                                 $body: #ApplyExpr[
                                    $base: #NameExpr['file']
                                    $recv: #NameExpr['start_with?']
                                    $param: #List[
                                       $expression: #NameExpr['path']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['license']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['licenses']
                        $recv: #NameExpr['first']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['licenses']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@licenses']
                        $right: #Array['[]']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['internal_init']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #Super['super']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@bin_dir']
                           $right: #Nil['nil']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@cache_dir']
                           $right: #Nil['nil']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@cache_file']
                           $right: #Nil['nil']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@doc_dir']
                           $right: #Nil['nil']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@ri_dir']
                           $right: #Nil['nil']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@spec_dir']
                           $right: #Nil['nil']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@spec_file']
                           $right: #Nil['nil']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['mark_version']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@rubygems_version']
                        $right: #Field[
                           $recv: #NameExpr['Gem']
                           $name: #NameExpr['VERSION']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['method_missing']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['sym']
                     ]
                     $param: #VariadicParam[
                        $name: #NameExpr['a']
                     ]
                     $param: #ProcedureParam[
                        $name: #NameExpr['b']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #IfExpr[
                        $cond: #AndExpr[
                           $left: #GtExpr[
                              $left: #NameExpr['@specification_version']
                              $right: #NameExpr['CURRENT_SPECIFICATION_VERSION']
                           ]
                           $right: #AssignExpr[
                              $left: #Field[
                                 $base: #NameExpr['sym']
                                 $name: #NameExpr['to_s']
                              ]
                              $right: #ComplExpr[
                                 $expr: #Regex['/=$/']
                              ]
                           ]
                        ]
                        $then: #IfExpr[
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['warn']
                              $param: #List[
                                 $expression: #StringExpr[
                                    $inner: #NameExpr['sym']
                                    $inner: #NameExpr['full_name']
                                 ]
                              ]
                           ]
                           $cond: #NameExpr['$DEBUG']
                        ]
                        $else: #ApplyExpr[
                           #Self['self']
                           $recv: #Super['super']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['missing_extensions?']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $then: #RReturnStmt[
                              $expr: #List[
                                 $expression: #FalseExpr['false']
                              ]
                           ]
                           $cond: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['default_gem?']
                           ]
                        ]
                        $statement: #IfExpr[
                           $then: #RReturnStmt[
                              $expr: #List[
                                 $expression: #FalseExpr['false']
                              ]
                           ]
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['extensions']
                              $recv: #NameExpr['empty?']
                           ]
                        ]
                        $statement: #IfExpr[
                           $then: #RReturnStmt[
                              $expr: #List[
                                 $expression: #FalseExpr['false']
                              ]
                           ]
                           $cond: #LtExpr[
                              $left: #NameExpr['installed_by_version']
                              $right: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Version']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #StringExpr['2.2.0.preview.2']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $then: #RReturnStmt[
                              $expr: #List[
                                 $expression: #FalseExpr['false']
                              ]
                           ]
                           $cond: #ApplyExpr[
                              $base: #NameExpr['File']
                              $recv: #NameExpr['exist?']
                              $param: #List[
                                 $expression: #NameExpr['gem_build_complete_path']
                              ]
                           ]
                        ]
                        $statement: #TrueExpr['true']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['normalize']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $cond: #AndExpr[
                              $left: #Defined[
                                 $base: #NameExpr['@extra_rdoc_files']
                              ]
                              $right: #NameExpr['@extra_rdoc_files']
                           ]
                           $then: #List[
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['@extra_rdoc_files']
                                 $recv: #NameExpr['uniq!']
                              ]
                              $statement: #LOrAssign[
                                 $left: #NameExpr['@files']
                                 $right: #Array['[]']
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['@files']
                                 $recv: #NameExpr['concat']
                                 $param: #List[
                                    $expression: #NameExpr['@extra_rdoc_files']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $then: #AssignExpr[
                              $left: #NameExpr['@files']
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['@files']
                                 $recv: #NameExpr['uniq']
                              ]
                           ]
                           $cond: #NameExpr['@files']
                        ]
                        $statement: #IfExpr[
                           $then: #AssignExpr[
                              $left: #NameExpr['@extensions']
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['@extensions']
                                 $recv: #NameExpr['uniq']
                              ]
                           ]
                           $cond: #NameExpr['@extensions']
                        ]
                        $statement: #IfExpr[
                           $then: #AssignExpr[
                              $left: #NameExpr['@test_files']
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['@test_files']
                                 $recv: #NameExpr['uniq']
                              ]
                           ]
                           $cond: #NameExpr['@test_files']
                        ]
                        $statement: #IfExpr[
                           $then: #AssignExpr[
                              $left: #NameExpr['@executables']
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['@executables']
                                 $recv: #NameExpr['uniq']
                              ]
                           ]
                           $cond: #NameExpr['@executables']
                        ]
                        $statement: #IfExpr[
                           $then: #AssignExpr[
                              $left: #NameExpr['@extra_rdoc_files']
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['@extra_rdoc_files']
                                 $recv: #NameExpr['uniq']
                              ]
                           ]
                           $cond: #NameExpr['@extra_rdoc_files']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['name_tuple']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $base: #Field[
                           $recv: #NameExpr['Gem']
                           $name: #NameExpr['NameTuple']
                        ]
                        $recv: #NameExpr['new']
                        $param: #List[
                           $expression: #NameExpr['name']
                           $expression: #NameExpr['version']
                           $expression: #NameExpr['original_platform']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['original_name']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #IfExpr[
                        $cond: #OrExpr[
                           $left: #EqExpr[
                              $left: #NameExpr['platform']
                              $right: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Platform']
                                 ]
                                 $name: #NameExpr['RUBY']
                              ]
                           ]
                           $right: #ApplyExpr[
                              $recv: #NameExpr['platform']
                              $recv: #NameExpr['nil?']
                           ]
                        ]
                        $then: #StringExpr[
                           $inner: #NameExpr['@name']
                           $inner: #NameExpr['@version']
                        ]
                        $else: #StringExpr[
                           $inner: #NameExpr['@name']
                           $inner: #NameExpr['@version']
                           $inner: #NameExpr['@original_platform']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['original_platform']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@original_platform']
                        $right: #NameExpr['platform']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['platform']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@new_platform']
                        $right: #Field[
                           $recv: #Field[
                              $recv: #NameExpr['Gem']
                              $name: #NameExpr['Platform']
                           ]
                           $name: #NameExpr['RUBY']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['pretty_print']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['q']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $base: #NameExpr['q']
                        $recv: #NameExpr['group']
                        $param: #List[
                           $expression: #IntExpr['2']
                           $expression: #StringExpr['Gem::Specification.new do |s|']
                           $expression: #StringExpr['end']
                        ]
                        $body: #Block[
                           $body: #List[
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['q']
                                 $recv: #NameExpr['breakable']
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['attributes']
                                 $right: #SubExpr[
                                    $left: #NameExpr['@@attributes']
                                    $right: #Array[
                                       $index: #List[
                                          $expression: #NameExpr['name']
                                          $expression: #NameExpr['version']
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $base: #NameExpr['attributes']
                                 $recv: #NameExpr['unshift']
                                 $param: #List[
                                    $expression: #NameExpr['installed_by_version']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $base: #NameExpr['attributes']
                                 $recv: #NameExpr['unshift']
                                 $param: #List[
                                    $expression: #NameExpr['version']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $base: #NameExpr['attributes']
                                 $recv: #NameExpr['unshift']
                                 $param: #List[
                                    $expression: #NameExpr['name']
                                 ]
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['attributes']
                                 $recv: #NameExpr['each']
                                 $body: #Block[
                                    $param: #NameExpr['attr_name']
                                    $body: #List[
                                       $statement: #AssignExpr[
                                          $left: #NameExpr['current_value']
                                          $right: #ApplyExpr[
                                             $base: #Self['self']
                                             $recv: #NameExpr['send']
                                             $param: #List[
                                                $expression: #NameExpr['attr_name']
                                             ]
                                          ]
                                       ]
                                       $statement: #IfExpr[
                                          $cond: #OrExpr[
                                             $left: #NeExpr[
                                                $left: #NameExpr['current_value']
                                                $right: #ApplyExpr[
                                                   #Self['self']
                                                   $recv: #NameExpr['default_value']
                                                   $param: #List[
                                                      $expression: #NameExpr['attr_name']
                                                   ]
                                                ]
                                             ]
                                             $right: #ApplyExpr[
                                                $base: #ApplyExpr[
                                                   $recv: #Self['self']
                                                   $recv: #NameExpr['class']
                                                ]
                                                $recv: #NameExpr['required_attribute?']
                                                $param: #List[
                                                   $expression: #NameExpr['attr_name']
                                                ]
                                             ]
                                          ]
                                          $then: #List[
                                             $statement: #ApplyExpr[
                                                $base: #NameExpr['q']
                                                $recv: #NameExpr['text']
                                                $param: #List[
                                                   $expression: #StringExpr[
                                                      $inner: #NameExpr['attr_name']
                                                   ]
                                                ]
                                             ]
                                             $statement: #IfExpr[
                                                $cond: #EqExpr[
                                                   $left: #NameExpr['attr_name']
                                                   $right: #NameExpr['date']
                                                ]
                                                $then: #List[
                                                   $statement: #AssignExpr[
                                                      $left: #NameExpr['current_value']
                                                      $right: #ApplyExpr[
                                                         $recv: #NameExpr['current_value']
                                                         $recv: #NameExpr['utc']
                                                      ]
                                                   ]
                                                   $statement: #ApplyExpr[
                                                      $base: #NameExpr['q']
                                                      $recv: #NameExpr['text']
                                                      $param: #List[
                                                         $expression: #StringExpr[
                                                            $inner: #ApplyExpr[
                                                               $recv: #NameExpr['current_value']
                                                               $recv: #NameExpr['year']
                                                            ]
                                                            $inner: #ApplyExpr[
                                                               $recv: #NameExpr['current_value']
                                                               $recv: #NameExpr['month']
                                                            ]
                                                            $inner: #ApplyExpr[
                                                               $recv: #NameExpr['current_value']
                                                               $recv: #NameExpr['day']
                                                            ]
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                                $else: #ApplyExpr[
                                                   $base: #NameExpr['q']
                                                   $recv: #NameExpr['pp']
                                                   $param: #List[
                                                      $expression: #NameExpr['current_value']
                                                   ]
                                                ]
                                             ]
                                             $statement: #ApplyExpr[
                                                $recv: #NameExpr['q']
                                                $recv: #NameExpr['breakable']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['check_version_conflict']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['other']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $then: #RReturnStmt['return']
                           $cond: #EqExpr[
                              $left: #ApplyExpr[
                                 $recv: #Self['self']
                                 $recv: #NameExpr['version']
                              ]
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['other']
                                 $recv: #NameExpr['version']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['msg']
                           $right: #StringExpr[
                              $inner: #NameExpr['full_name']
                              $inner: #ApplyExpr[
                                 $recv: #NameExpr['other']
                                 $recv: #NameExpr['full_name']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['e']
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['LoadError']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #NameExpr['msg']
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #NameExpr['e']
                              $name: #NameExpr['name']
                           ]
                           $right: #ApplyExpr[
                              $recv: #Self['self']
                              $recv: #NameExpr['name']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['raise']
                           $param: #List[
                              $expression: #NameExpr['e']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['private']
                  $param: #List[
                     $expression: #NameExpr['check_version_conflict']
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['raise_if_conflicts']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #IfExpr[
                        $cond: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['has_conflicts?']
                        ]
                        $then: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['raise']
                           $param: #List[
                              $command: #ApplyExpr[
                                 $base: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['ConflictError']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #Self['self']
                                    $expression: #NameExpr['conflicts']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['rdoc_options=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['options']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@rdoc_options']
                        $right: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['Array']
                           $param: #List[
                              $expression: #NameExpr['options']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['require_path']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #AndExpr[
                        $left: #AssignExpr[
                           $left: #NameExpr['val']
                           $right: #NameExpr['require_paths']
                        ]
                        $right: #ApplyExpr[
                           $recv: #NameExpr['val']
                           $recv: #NameExpr['first']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['require_path=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['path']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #Field[
                           $base: #Self['self']
                           $name: #NameExpr['require_paths']
                        ]
                        $right: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['Array']
                           $param: #List[
                              $expression: #NameExpr['path']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['requirements=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['req']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@requirements']
                        $right: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['Array']
                           $param: #List[
                              $expression: #NameExpr['req']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['respond_to_missing?']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['m']
                     ]
                     $param: #OptionalParam[
                        $name: #NameExpr['include_private']
                        $default: #FalseExpr['false']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #FalseExpr['false']
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['ri_dir']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@ri_dir']
                        $right: #ApplyExpr[
                           $base: #NameExpr['File']
                           $recv: #NameExpr['join']
                           $param: #List[
                              $expression: #NameExpr['base_dir']
                              $expression: #StringExpr['ri']
                              $expression: #NameExpr['full_name']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['ruby_code']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['obj']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #Case[
                        $cond: #NameExpr['obj']
                        $body: #List[
                           $when: #When[
                              $cond: #List[
                                 $expression: #NameExpr['String']
                              ]
                              $then: #AddExpr[
                                 $left: #ApplyExpr[
                                    $recv: #NameExpr['obj']
                                    $recv: #NameExpr['dump']
                                 ]
                                 $right: #StringExpr['.freeze']
                              ]
                           ]
                           $when: #When[
                              $cond: #List[
                                 $expression: #NameExpr['Array']
                              ]
                              $then: #AddExpr[
                                 $left: #AddExpr[
                                    $left: #StringExpr['[']
                                    $right: #ApplyExpr[
                                       $recv: #ApplyExpr[
                                          $recv: #NameExpr['obj']
                                          $recv: #NameExpr['map']
                                          $body: #Block[
                                             $param: #NameExpr['x']
                                             $body: #ApplyExpr[
                                                #Self['self']
                                                $recv: #NameExpr['ruby_code']
                                                $param: #List[
                                                   $expression: #NameExpr['x']
                                                ]
                                             ]
                                          ]
                                       ]
                                       $recv: #NameExpr['join']
                                       $param: #List[
                                          $expression: #StringExpr[', ']
                                       ]
                                    ]
                                 ]
                                 $right: #StringExpr[']']
                              ]
                           ]
                           $when: #When[
                              $cond: #List[
                                 $expression: #NameExpr['Hash']
                              ]
                              $then: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['seg']
                                    $right: #ApplyExpr[
                                       $recv: #ApplyExpr[
                                          $recv: #ApplyExpr[
                                             $recv: #NameExpr['obj']
                                             $recv: #NameExpr['keys']
                                          ]
                                          $recv: #NameExpr['sort']
                                       ]
                                       $recv: #NameExpr['map']
                                       $body: #Block[
                                          $param: #NameExpr['k']
                                          $body: #StringExpr[
                                             $inner: #ApplyExpr[
                                                $recv: #ApplyExpr[
                                                   $recv: #NameExpr['k']
                                                   $recv: #NameExpr['to_s']
                                                ]
                                                $recv: #NameExpr['dump']
                                             ]
                                             $inner: #ApplyExpr[
                                                $recv: #ApplyExpr[
                                                   $recv: #Indexer[
                                                      $recv: #NameExpr['obj']
                                                      $index: #List[
                                                         $expression: #NameExpr['k']
                                                      ]
                                                   ]
                                                   $recv: #NameExpr['to_s']
                                                ]
                                                $recv: #NameExpr['dump']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #StringExpr[
                                    $inner: #ApplyExpr[
                                       $recv: #NameExpr['seg']
                                       $recv: #NameExpr['join']
                                       $param: #List[
                                          $expression: #StringExpr[', ']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                           $when: #When[
                              $cond: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Version']
                                 ]
                              ]
                              $then: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['obj']
                                    $recv: #NameExpr['to_s']
                                 ]
                                 $recv: #NameExpr['dump']
                              ]
                           ]
                           $when: #When[
                              $cond: #List[
                                 $expression: #NameExpr['DateLike']
                              ]
                              $then: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['obj']
                                    $recv: #NameExpr['strftime']
                                    $param: #List[
                                       $expression: #StringExpr['%Y-%m-%d']
                                    ]
                                 ]
                                 $recv: #NameExpr['dump']
                              ]
                           ]
                           $when: #When[
                              $cond: #List[
                                 $expression: #NameExpr['Time']
                              ]
                              $then: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['obj']
                                    $recv: #NameExpr['strftime']
                                    $param: #List[
                                       $expression: #StringExpr['%Y-%m-%d']
                                    ]
                                 ]
                                 $recv: #NameExpr['dump']
                              ]
                           ]
                           $when: #When[
                              $cond: #List[
                                 $expression: #NameExpr['Numeric']
                              ]
                              $then: #ApplyExpr[
                                 $recv: #NameExpr['obj']
                                 $recv: #NameExpr['inspect']
                              ]
                           ]
                           $when: #When[
                              $cond: #List[
                                 $expression: #TrueExpr['true']
                                 $expression: #FalseExpr['false']
                                 $expression: #Nil['nil']
                              ]
                              $then: #ApplyExpr[
                                 $recv: #NameExpr['obj']
                                 $recv: #NameExpr['inspect']
                              ]
                           ]
                           $when: #When[
                              $cond: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Platform']
                                 ]
                              ]
                              $then: #StringExpr[
                                 $inner: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       $recv: #NameExpr['obj']
                                       $recv: #NameExpr['to_a']
                                    ]
                                    $recv: #NameExpr['inspect']
                                 ]
                              ]
                           ]
                           $when: #When[
                              $cond: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Requirement']
                                 ]
                              ]
                              $then: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['list']
                                    $right: #ApplyExpr[
                                       $recv: #NameExpr['obj']
                                       $recv: #NameExpr['as_list']
                                    ]
                                 ]
                                 $statement: #StringExpr[
                                    $inner: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['ruby_code']
                                       $param: #List[
                                          $expression: #Conditional[
                                             $cond: #EqExpr[
                                                $left: #ApplyExpr[
                                                   $recv: #NameExpr['list']
                                                   $recv: #NameExpr['size']
                                                ]
                                                $right: #IntExpr['1']
                                             ]
                                             $then: #ApplyExpr[
                                                $recv: #NameExpr['obj']
                                                $recv: #NameExpr['to_s']
                                             ]
                                             $else: #NameExpr['list']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $else: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['raise']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Exception']
                              ]
                              $expression: #StringExpr[
                                 $inner: #ApplyExpr[
                                    $recv: #NameExpr['obj']
                                    $recv: #NameExpr['class']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['private']
                  $param: #List[
                     $expression: #NameExpr['ruby_code']
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['runtime_dependencies']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['dependencies']
                        $recv: #NameExpr['select']
                        $param: #List[
                           $procedure: #Procedure[
                              $base: #NameExpr['runtime?']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['same_attributes?']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['spec']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['@@attributes']
                        $recv: #NameExpr['all?']
                        $body: #Block[
                           $param: #MultipleLeftHandSideExpression[
                              $item: #NameExpr['name']
                              $item: #NameExpr['default']
                           ]
                           $body: #EqExpr[
                              $left: #ApplyExpr[
                                 $recv: #Self['self']
                                 $recv: #NameExpr['send']
                                 $param: #List[
                                    $expression: #NameExpr['name']
                                 ]
                              ]
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['spec']
                                 $recv: #NameExpr['send']
                                 $param: #List[
                                    $expression: #NameExpr['name']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['private']
                  $param: #List[
                     $expression: #NameExpr['same_attributes?']
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['satisfies_requirement?']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['dependency']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #RReturnStmt[
                        $expr: #List[
                           $expression: #LAnd[
                              $left: #EqExpr[
                                 $left: #NameExpr['@name']
                                 $right: #ApplyExpr[
                                    $recv: #NameExpr['dependency']
                                    $recv: #NameExpr['name']
                                 ]
                              ]
                              $right: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['dependency']
                                    $recv: #NameExpr['requirement']
                                 ]
                                 $recv: #NameExpr['satisfied_by?']
                                 $param: #List[
                                    $expression: #NameExpr['@version']
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['sort_obj']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #Array[
                        $index: #List[
                           $expression: #NameExpr['@name']
                           $expression: #NameExpr['@version']
                           $expression: #Conditional[
                              $cond: #EqExpr[
                                 $left: #NameExpr['@new_platform']
                                 $right: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Platform']
                                    ]
                                    $name: #NameExpr['RUBY']
                                 ]
                              ]
                              $then: #MinusExpr[
                                 $expr: #IntExpr['1']
                              ]
                              $else: #IntExpr['1']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['source']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #Field[
                           $recv: #Field[
                              $recv: #NameExpr['Gem']
                              $name: #NameExpr['Source']
                           ]
                           $name: #NameExpr['Installed']
                        ]
                        $recv: #NameExpr['new']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['spec_dir']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@spec_dir']
                        $right: #ApplyExpr[
                           $base: #NameExpr['File']
                           $recv: #NameExpr['join']
                           $param: #List[
                              $expression: #NameExpr['base_dir']
                              $expression: #StringExpr['specifications']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['spec_file']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #LOrAssign[
                        $left: #NameExpr['@spec_file']
                        $right: #ApplyExpr[
                           $base: #NameExpr['File']
                           $recv: #NameExpr['join']
                           $param: #List[
                              $expression: #NameExpr['spec_dir']
                              $expression: #StringExpr[
                                 $inner: #NameExpr['full_name']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['spec_name']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #StringExpr[
                        $inner: #NameExpr['full_name']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['summary=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['str']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #NameExpr['@summary']
                        $right: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #NameExpr['str']
                                    $recv: #NameExpr['to_s']
                                 ]
                                 $recv: #NameExpr['strip']
                              ]
                              $recv: #NameExpr['gsub']
                              $param: #List[
                                 $expression: #Regex['/(\\w-)\\n[ \\t]*(\\w)/']
                                 $expression: #StringExpr['\\1\\2']
                              ]
                           ]
                           $recv: #NameExpr['gsub']
                           $param: #List[
                              $expression: #Regex['/\\n[ \\t]*/']
                              $expression: #StringExpr[' ']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_file']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #AndExpr[
                        $left: #AssignExpr[
                           $left: #NameExpr['val']
                           $right: #NameExpr['test_files']
                        ]
                        $right: #ApplyExpr[
                           $recv: #NameExpr['val']
                           $recv: #NameExpr['first']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_file=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['file']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #AssignExpr[
                        $left: #Field[
                           $base: #Self['self']
                           $name: #NameExpr['test_files']
                        ]
                        $right: #Array[
                           $index: #List[
                              $expression: #NameExpr['file']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['test_files']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $cond: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['defined?']
                              $param: #List[
                                 $expression: #NameExpr['@test_suite_file']
                              ]
                           ]
                           $then: #List[
                              $statement: #AssignExpr[
                                 $left: #NameExpr['@test_files']
                                 $right: #ApplyExpr[
                                    $recv: #Array[
                                       $index: #List[
                                          $expression: #NameExpr['@test_suite_file']
                                       ]
                                    ]
                                    $recv: #NameExpr['flatten']
                                 ]
                              ]
                              $statement: #AssignExpr[
                                 $left: #NameExpr['@test_suite_file']
                                 $right: #Nil['nil']
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #AndExpr[
                              $left: #Defined[
                                 $base: #NameExpr['@test_files']
                              ]
                              $right: #NameExpr['@test_files']
                           ]
                           $then: #NameExpr['@test_files']
                           $else: #AssignExpr[
                              $left: #NameExpr['@test_files']
                              $right: #Array['[]']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['to_ruby']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #NameExpr['mark_version']
                        $statement: #AssignExpr[
                           $left: #NameExpr['result']
                           $right: #Array['[]']
                        ]
                        $statement: #LShiftExpr[
                           $left: #NameExpr['result']
                           $right: #StringExpr['# -*- encoding: utf-8 -*-']
                        ]
                        $statement: #LShiftExpr[
                           $left: #NameExpr['result']
                           $right: #StringExpr[
                              $inner: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['StubSpecification']
                                 ]
                                 $name: #NameExpr['PREFIX']
                              ]
                              $inner: #NameExpr['name']
                              $inner: #NameExpr['version']
                              $inner: #NameExpr['platform']
                              $inner: #ApplyExpr[
                                 $recv: #NameExpr['raw_require_paths']
                                 $recv: #NameExpr['join']
                                 $param: #List[
                                    $expression: #StringExpr['\\0']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $then: #LShiftExpr[
                              $left: #NameExpr['result']
                              $right: #StringExpr[
                                 $inner: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['StubSpecification']
                                    ]
                                    $name: #NameExpr['PREFIX']
                                 ]
                                 $inner: #ApplyExpr[
                                    $base: #NameExpr['extensions']
                                    $recv: #NameExpr['join']
                                    $param: #List[
                                       $expression: #StringExpr['\\0']
                                    ]
                                 ]
                              ]
                           ]
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['extensions']
                              $recv: #NameExpr['empty?']
                           ]
                        ]
                        $statement: #LShiftExpr[
                           $left: #NameExpr['result']
                           $right: #Nil['nil']
                        ]
                        $statement: #LShiftExpr[
                           $left: #NameExpr['result']
                           $right: #StringExpr['Gem::Specification.new do |s|']
                        ]
                        $statement: #LShiftExpr[
                           $left: #NameExpr['result']
                           $right: #StringExpr[
                              $inner: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['ruby_code']
                                 $param: #List[
                                    $expression: #NameExpr['name']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #LShiftExpr[
                           $left: #NameExpr['result']
                           $right: #StringExpr[
                              $inner: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['ruby_code']
                                 $param: #List[
                                    $expression: #NameExpr['version']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $cond: #OrExpr[
                              $left: #ApplyExpr[
                                 $recv: #NameExpr['platform']
                                 $recv: #NameExpr['nil?']
                              ]
                              $right: #EqExpr[
                                 $left: #NameExpr['platform']
                                 $right: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Platform']
                                    ]
                                    $name: #NameExpr['RUBY']
                                 ]
                              ]
                           ]
                           $then: #LShiftExpr[
                              $left: #NameExpr['result']
                              $right: #StringExpr[
                                 $inner: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['ruby_code']
                                    $param: #List[
                                       $expression: #NameExpr['original_platform']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #LShiftExpr[
                           $left: #NameExpr['result']
                           $right: #StringExpr['']
                        ]
                        $statement: #LShiftExpr[
                           $left: #NameExpr['result']
                           $right: #StringExpr[
                              $inner: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['ruby_code']
                                 $param: #List[
                                    $expression: #NameExpr['required_rubygems_version']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #AndExpr[
                              $left: #NameExpr['metadata']
                              $right: #NotExpr[
                                 $expr: #ApplyExpr[
                                    $recv: #NameExpr['metadata']
                                    $recv: #NameExpr['empty?']
                                 ]
                              ]
                           ]
                           $then: #LShiftExpr[
                              $left: #NameExpr['result']
                              $right: #StringExpr[
                                 $inner: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['ruby_code']
                                    $param: #List[
                                       $expression: #NameExpr['metadata']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #LShiftExpr[
                           $left: #NameExpr['result']
                           $right: #StringExpr[
                              $inner: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['ruby_code']
                                 $param: #List[
                                    $expression: #NameExpr['raw_require_paths']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['handled']
                           $right: #Array[
                              $index: #List[
                                 $expression: #NameExpr['dependencies']
                                 $expression: #NameExpr['name']
                                 $expression: #NameExpr['platform']
                                 $expression: #NameExpr['require_paths']
                                 $expression: #NameExpr['required_rubygems_version']
                                 $expression: #NameExpr['specification_version']
                                 $expression: #NameExpr['version']
                                 $expression: #NameExpr['has_rdoc']
                                 $expression: #NameExpr['default_executable']
                                 $expression: #NameExpr['metadata']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@@attributes']
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['attr_name']
                              $body: #List[
                                 $statement: #IfExpr[
                                    $then: #Next['next']
                                    $cond: #ApplyExpr[
                                       $base: #NameExpr['handled']
                                       $recv: #NameExpr['include?']
                                       $param: #List[
                                          $expression: #NameExpr['attr_name']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['current_value']
                                    $right: #ApplyExpr[
                                       $recv: #Self['self']
                                       $recv: #NameExpr['send']
                                       $param: #List[
                                          $expression: #NameExpr['attr_name']
                                       ]
                                    ]
                                 ]
                                 $statement: #IfExpr[
                                    $cond: #OrExpr[
                                       $left: #NeExpr[
                                          $left: #NameExpr['current_value']
                                          $right: #ApplyExpr[
                                             #Self['self']
                                             $recv: #NameExpr['default_value']
                                             $param: #List[
                                                $expression: #NameExpr['attr_name']
                                             ]
                                          ]
                                       ]
                                       $right: #ApplyExpr[
                                          $base: #ApplyExpr[
                                             $recv: #Self['self']
                                             $recv: #NameExpr['class']
                                          ]
                                          $recv: #NameExpr['required_attribute?']
                                          $param: #List[
                                             $expression: #NameExpr['attr_name']
                                          ]
                                       ]
                                    ]
                                    $then: #LShiftExpr[
                                       $left: #NameExpr['result']
                                       $right: #StringExpr[
                                          $inner: #NameExpr['attr_name']
                                          $inner: #ApplyExpr[
                                             #Self['self']
                                             $recv: #NameExpr['ruby_code']
                                             $param: #List[
                                                $expression: #NameExpr['current_value']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #NameExpr['@installed_by_version']
                           $then: #List[
                              $statement: #LShiftExpr[
                                 $left: #NameExpr['result']
                                 $right: #Nil['nil']
                              ]
                              $statement: #LShiftExpr[
                                 $left: #NameExpr['result']
                                 $right: #StringExpr[
                                    $inner: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['VERSION']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['dependencies']
                              $recv: #NameExpr['empty?']
                           ]
                           $then: #List[
                              $statement: #LShiftExpr[
                                 $left: #NameExpr['result']
                                 $right: #Nil['nil']
                              ]
                              $statement: #LShiftExpr[
                                 $left: #NameExpr['result']
                                 $right: #StringExpr['  if s.respond_to? :specification_version then']
                              ]
                              $statement: #LShiftExpr[
                                 $left: #NameExpr['result']
                                 $right: #StringExpr[
                                    $inner: #NameExpr['specification_version']
                                 ]
                              ]
                              $statement: #LShiftExpr[
                                 $left: #NameExpr['result']
                                 $right: #Nil['nil']
                              ]
                              $statement: #LShiftExpr[
                                 $left: #NameExpr['result']
                                 $right: #StringExpr['    if Gem::Version.new(Gem::VERSION) >= Gem::Version.new(\'1.2.0\') then']
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['dependencies']
                                 $recv: #NameExpr['each']
                                 $body: #Block[
                                    $param: #NameExpr['dep']
                                    $body: #List[
                                       $statement: #AssignExpr[
                                          $left: #NameExpr['req']
                                          $right: #ApplyExpr[
                                             $recv: #ApplyExpr[
                                                $recv: #NameExpr['dep']
                                                $recv: #NameExpr['requirements_list']
                                             ]
                                             $recv: #NameExpr['inspect']
                                          ]
                                       ]
                                       $statement: #IfExpr[
                                          $then: #ApplyExpr[
                                             $base: #NameExpr['dep']
                                             $recv: #NameExpr['instance_variable_set']
                                             $param: #List[
                                                $expression: #NameExpr['@type']
                                                $expression: #NameExpr['runtime']
                                             ]
                                          ]
                                          $cond: #ApplyExpr[
                                             $recv: #ApplyExpr[
                                                $recv: #NameExpr['dep']
                                                $recv: #NameExpr['type']
                                             ]
                                             $recv: #NameExpr['nil?']
                                          ]
                                       ]
                                       $statement: #LShiftExpr[
                                          $left: #NameExpr['result']
                                          $right: #StringExpr[
                                             $inner: #ApplyExpr[
                                                $recv: #NameExpr['dep']
                                                $recv: #NameExpr['type']
                                             ]
                                             $inner: #ApplyExpr[
                                                $recv: #NameExpr['dep']
                                                $recv: #NameExpr['name']
                                             ]
                                             $inner: #NameExpr['req']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #LShiftExpr[
                                 $left: #NameExpr['result']
                                 $right: #StringExpr['    else']
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['dependencies']
                                 $recv: #NameExpr['each']
                                 $body: #Block[
                                    $param: #NameExpr['dep']
                                    $body: #List[
                                       $statement: #AssignExpr[
                                          $left: #NameExpr['version_reqs_param']
                                          $right: #ApplyExpr[
                                             $recv: #ApplyExpr[
                                                $recv: #NameExpr['dep']
                                                $recv: #NameExpr['requirements_list']
                                             ]
                                             $recv: #NameExpr['inspect']
                                          ]
                                       ]
                                       $statement: #LShiftExpr[
                                          $left: #NameExpr['result']
                                          $right: #StringExpr[
                                             $inner: #ApplyExpr[
                                                $recv: #NameExpr['dep']
                                                $recv: #NameExpr['name']
                                             ]
                                             $inner: #NameExpr['version_reqs_param']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #LShiftExpr[
                                 $left: #NameExpr['result']
                                 $right: #StringExpr['    end']
                              ]
                              $statement: #LShiftExpr[
                                 $left: #NameExpr['result']
                                 $right: #StringExpr['  else']
                              ]
                              $statement: #ApplyExpr[
                                 $recv: #NameExpr['dependencies']
                                 $recv: #NameExpr['each']
                                 $body: #Block[
                                    $param: #NameExpr['dep']
                                    $body: #List[
                                       $statement: #AssignExpr[
                                          $left: #NameExpr['version_reqs_param']
                                          $right: #ApplyExpr[
                                             $recv: #ApplyExpr[
                                                $recv: #NameExpr['dep']
                                                $recv: #NameExpr['requirements_list']
                                             ]
                                             $recv: #NameExpr['inspect']
                                          ]
                                       ]
                                       $statement: #LShiftExpr[
                                          $left: #NameExpr['result']
                                          $right: #StringExpr[
                                             $inner: #ApplyExpr[
                                                $recv: #NameExpr['dep']
                                                $recv: #NameExpr['name']
                                             ]
                                             $inner: #NameExpr['version_reqs_param']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                              $statement: #LShiftExpr[
                                 $left: #NameExpr['result']
                                 $right: #StringExpr['  end']
                              ]
                           ]
                        ]
                        $statement: #LShiftExpr[
                           $left: #NameExpr['result']
                           $right: #StringExpr['end']
                        ]
                        $statement: #LShiftExpr[
                           $left: #NameExpr['result']
                           $right: #Nil['nil']
                        ]
                        $statement: #ApplyExpr[
                           $base: #NameExpr['result']
                           $recv: #NameExpr['join']
                           $param: #List[
                              $expression: #StringExpr['\\n']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['to_ruby_for_cache']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #ApplyExpr[
                        $recv: #NameExpr['for_cache']
                        $recv: #NameExpr['to_ruby']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['to_s']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #StringExpr[
                        $inner: #NameExpr['@name']
                        $inner: #NameExpr['@version']
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['to_spec']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #Self['self']
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['to_yaml']
                  $param: #List[
                     $param: #OptionalParam[
                        $name: #NameExpr['opts']
                        $default: #List['{}']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #IfExpr[
                        $cond: #LOr[
                           $left: #ApplyExpr[
                              $base: #ApplyExpr[
                                 $recv: #NameExpr['YAML']
                                 $recv: #NameExpr['const_defined?']
                                 $param: #List[
                                    $expression: #NameExpr['ENGINE']
                                 ]
                              ]
                              $recv: #NameExpr['&']
                              $param: #List[
                                 $expression: #NotExpr[
                                    $expr: #ApplyExpr[
                                       $recv: #Field[
                                          $recv: #NameExpr['YAML']
                                          $name: #NameExpr['ENGINE']
                                       ]
                                       $recv: #NameExpr['syck?']
                                    ]
                                 ]
                              ]
                           ]
                           $right: #Defined[
                              $base: #LAnd[
                                 $left: #NameExpr['Psych']
                                 $right: #EqExpr[
                                    $left: #NameExpr['YAML']
                                    $right: #NameExpr['Psych']
                                 ]
                              ]
                           ]
                        ]
                        $then: #List[
                           $statement: #Unless[
                              $cond: #ApplyExpr[
                                 $recv: #NameExpr['Gem']
                                 $recv: #NameExpr['const_defined?']
                                 $param: #List[
                                    $expression: #NameExpr['NoAliasYAMLTree']
                                 ]
                              ]
                              $then: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['require']
                                 $param: #List[
                                    $expression: #StringExpr['rubygems/psych_tree']
                                 ]
                              ]
                           ]
                           $statement: #AssignExpr[
                              $left: #NameExpr['builder']
                              $right: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['NoAliasYAMLTree']
                                 ]
                                 $recv: #NameExpr['create']
                              ]
                           ]
                           $statement: #LShiftExpr[
                              $left: #NameExpr['builder']
                              $right: #Self['self']
                           ]
                           $statement: #AssignExpr[
                              $left: #NameExpr['ast']
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['builder']
                                 $recv: #NameExpr['tree']
                              ]
                           ]
                           $statement: #AssignExpr[
                              $left: #NameExpr['io']
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['StringIO']
                                 $recv: #NameExpr['new']
                              ]
                           ]
                           $statement: #IfExpr[
                              $then: #ApplyExpr[
                                 $base: #NameExpr['io']
                                 $recv: #NameExpr['set_encoding']
                                 $param: #List[
                                    $expression: #Field[
                                       $recv: #NameExpr['Encoding']
                                       $name: #NameExpr['UTF_8']
                                    ]
                                 ]
                              ]
                              $cond: #ApplyExpr[
                                 $base: #NameExpr['Object']
                                 $recv: #NameExpr['const_defined?']
                                 $param: #List[
                                    $expression: #NameExpr['Encoding']
                                 ]
                              ]
                           ]
                           $statement: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #Field[
                                    $recv: #Field[
                                       $recv: #NameExpr['Psych']
                                       $name: #NameExpr['Visitors']
                                    ]
                                    $name: #NameExpr['Emitter']
                                 ]
                                 $recv: #NameExpr['new']
                                 $param: #List[
                                    $expression: #NameExpr['io']
                                 ]
                              ]
                              $recv: #NameExpr['accept']
                              $param: #List[
                                 $expression: #NameExpr['ast']
                              ]
                           ]
                           $statement: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #NameExpr['io']
                                 $recv: #NameExpr['string']
                              ]
                              $recv: #NameExpr['gsub']
                              $param: #List[
                                 $expression: #Regex['/ !!null \\n/']
                                 $expression: #StringExpr[' \\n']
                              ]
                           ]
                        ]
                        $else: #ApplyExpr[
                           $base: #NameExpr['YAML']
                           $recv: #NameExpr['quick_emit']
                           $param: #List[
                              $expression: #NameExpr['object_id']
                              $expression: #ApplyExpr[
                                 #Self['self']
                                 $recv: #NameExpr['opts']
                                 $body: #Block[
                                    $param: #NameExpr['out']
                                    $body: #ApplyExpr[
                                       $base: #NameExpr['out']
                                       $recv: #NameExpr['map']
                                       $param: #List[
                                          $expression: #NameExpr['taguri']
                                          $expression: #ApplyExpr[
                                             #Self['self']
                                             $recv: #NameExpr['to_yaml_style']
                                             $body: #Block[
                                                $param: #NameExpr['map']
                                                $body: #ApplyExpr[
                                                   #Self['self']
                                                   $recv: #NameExpr['encode_with']
                                                   $param: #List[
                                                      $expression: #NameExpr['map']
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['traverse']
                  $param: #List[
                     $param: #OptionalParam[
                        $name: #NameExpr['trail']
                        $default: #Array['[]']
                     ]
                     $param: #OptionalParam[
                        $name: #NameExpr['visited']
                        $default: #List['{}']
                     ]
                     $param: #ProcedureParam[
                        $name: #NameExpr['block']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['trail']
                           $recv: #NameExpr['push']
                           $param: #List[
                              $expression: #Self['self']
                           ]
                        ]
                        $statement: #ExceptionBlock[
                           $main: #ApplyExpr[
                              $recv: #NameExpr['dependencies']
                              $recv: #NameExpr['each']
                              $body: #Block[
                                 $param: #NameExpr['dep']
                                 $body: #List[
                                    $statement: #Unless[
                                       $then: #Next['next']
                                       $cond: #ApplyExpr[
                                          $recv: #NameExpr['dep']
                                          $recv: #NameExpr['runtime?']
                                       ]
                                    ]
                                    $statement: #ApplyExpr[
                                       $recv: #ApplyExpr[
                                          $recv: #NameExpr['dep']
                                          $recv: #NameExpr['to_specs']
                                       ]
                                       $recv: #NameExpr['each']
                                       $body: #Block[
                                          $param: #NameExpr['dep_spec']
                                          $body: #List[
                                             $statement: #IfExpr[
                                                $then: #Next['next']
                                                $cond: #ApplyExpr[
                                                   $recv: #NameExpr['visited']
                                                   $recv: #NameExpr['has_key?']
                                                   $param: #List[
                                                      $expression: #NameExpr['dep_spec']
                                                   ]
                                                ]
                                             ]
                                             $statement: #AssignExpr[
                                                $left: #Indexer[
                                                   $base: #NameExpr['visited']
                                                   $index: #List[
                                                      $expression: #NameExpr['dep_spec']
                                                   ]
                                                ]
                                                $right: #TrueExpr['true']
                                             ]
                                             $statement: #ApplyExpr[
                                                $recv: #NameExpr['trail']
                                                $recv: #NameExpr['push']
                                                $param: #List[
                                                   $expression: #NameExpr['dep_spec']
                                                ]
                                             ]
                                             $statement: #ExceptionBlock[
                                                $main: #AssignExpr[
                                                   $left: #NameExpr['result']
                                                   $right: #Indexer[
                                                      $recv: #NameExpr['block']
                                                      $index: #List[
                                                         $expression: #Self['self']
                                                         $expression: #NameExpr['dep']
                                                         $expression: #NameExpr['dep_spec']
                                                         $expression: #NameExpr['trail']
                                                      ]
                                                   ]
                                                ]
                                                $ensure: #ApplyExpr[
                                                   $recv: #NameExpr['trail']
                                                   $recv: #NameExpr['pop']
                                                ]
                                             ]
                                             $statement: #Unless[
                                                $cond: #EqExpr[
                                                   $left: #NameExpr['result']
                                                   $right: #NameExpr['next']
                                                ]
                                                $then: #List[
                                                   $statement: #AssignExpr[
                                                      $left: #NameExpr['spec_name']
                                                      $right: #ApplyExpr[
                                                         $recv: #NameExpr['dep_spec']
                                                         $recv: #NameExpr['name']
                                                      ]
                                                   ]
                                                   $statement: #Unless[
                                                      $then: #ApplyExpr[
                                                         $recv: #NameExpr['dep_spec']
                                                         $recv: #NameExpr['traverse']
                                                         $param: #List[
                                                            $expression: #NameExpr['trail']
                                                            $expression: #NameExpr['visited']
                                                            $procedure: #Procedure[
                                                               $base: #NameExpr['block']
                                                            ]
                                                         ]
                                                      ]
                                                      $cond: #ApplyExpr[
                                                         $recv: #NameExpr['trail']
                                                         $recv: #NameExpr['any?']
                                                         $body: #Block[
                                                            $param: #NameExpr['s']
                                                            $body: #EqExpr[
                                                               $left: #ApplyExpr[
                                                                  $recv: #NameExpr['s']
                                                                  $recv: #NameExpr['name']
                                                               ]
                                                               $right: #NameExpr['spec_name']
                                                            ]
                                                         ]
                                                      ]
                                                   ]
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                           $ensure: #ApplyExpr[
                              $recv: #NameExpr['trail']
                              $recv: #NameExpr['pop']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['validate']
                  $param: #List[
                     $param: #OptionalParam[
                        $name: #NameExpr['packaging']
                        $default: #TrueExpr['true']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['@warnings']
                           $right: #IntExpr['0']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['require']
                           $param: #List[
                              $expression: #StringExpr['rubygems/user_interaction']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['extend']
                           $param: #List[
                              $expression: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['UserInteraction']
                              ]
                           ]
                        ]
                        $statement: #NameExpr['normalize']
                        $statement: #AssignExpr[
                           $left: #NameExpr['nil_attributes']
                           $right: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #Self['self']
                                    $recv: #NameExpr['class']
                                 ]
                                 $recv: #NameExpr['non_nil_attributes']
                              ]
                              $recv: #NameExpr['find_all']
                              $body: #Block[
                                 $param: #NameExpr['attrname']
                                 $body: #ApplyExpr[
                                    $recv: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['instance_variable_get']
                                       $param: #List[
                                          $expression: #StringExpr[
                                             $inner: #NameExpr['attrname']
                                          ]
                                       ]
                                    ]
                                    $recv: #NameExpr['nil?']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['nil_attributes']
                              $recv: #NameExpr['empty?']
                           ]
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                                 $expression: #StringExpr[
                                    $inner: #ApplyExpr[
                                       $base: #NameExpr['nil_attributes']
                                       $recv: #NameExpr['join']
                                       $param: #List[
                                          $expression: #StringExpr[', ']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #AndExpr[
                              $left: #NameExpr['packaging']
                              $right: #NeExpr[
                                 $left: #NameExpr['rubygems_version']
                                 $right: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['VERSION']
                                 ]
                              ]
                           ]
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                                 $expression: #StringExpr[
                                    $inner: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['VERSION']
                                    ]
                                    $inner: #NameExpr['rubygems_version']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@@required_attributes']
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['symbol']
                              $body: #Unless[
                                 $cond: #ApplyExpr[
                                    $base: #Self['self']
                                    $recv: #NameExpr['send']
                                    $param: #List[
                                       $expression: #NameExpr['symbol']
                                    ]
                                 ]
                                 $then: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['raise']
                                    $param: #List[
                                       $expression: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['InvalidSpecificationException']
                                       ]
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['symbol']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $cond: #StrictEquals[
                              $left: #NameExpr['String']
                              $right: #NameExpr['name']
                           ]
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                                 $expression: #StringExpr[
                                    $inner: #ApplyExpr[
                                       $recv: #NameExpr['name']
                                       $recv: #NameExpr['inspect']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['raw_require_paths']
                              $recv: #NameExpr['empty?']
                           ]
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                                 $expression: #StringExpr['specification must have at least one require_path']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@files']
                           $recv: #NameExpr['delete_if']
                           $body: #Block[
                              $param: #NameExpr['x']
                              $body: #ApplyExpr[
                                 $base: #ApplyExpr[
                                    $recv: #NameExpr['File']
                                    $recv: #NameExpr['directory?']
                                    $param: #List[
                                       $expression: #NameExpr['x']
                                    ]
                                 ]
                                 $recv: #NameExpr['&']
                                 $param: #List[
                                    $expression: #NotExpr[
                                       $expr: #ApplyExpr[
                                          $recv: #NameExpr['File']
                                          $recv: #NameExpr['symlink?']
                                          $param: #List[
                                             $expression: #NameExpr['x']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@test_files']
                           $recv: #NameExpr['delete_if']
                           $body: #Block[
                              $param: #NameExpr['x']
                              $body: #ApplyExpr[
                                 $base: #ApplyExpr[
                                    $recv: #NameExpr['File']
                                    $recv: #NameExpr['directory?']
                                    $param: #List[
                                       $expression: #NameExpr['x']
                                    ]
                                 ]
                                 $recv: #NameExpr['&']
                                 $param: #List[
                                    $expression: #NotExpr[
                                       $expr: #ApplyExpr[
                                          $recv: #NameExpr['File']
                                          $recv: #NameExpr['symlink?']
                                          $param: #List[
                                             $expression: #NameExpr['x']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@executables']
                           $recv: #NameExpr['delete_if']
                           $body: #Block[
                              $param: #NameExpr['x']
                              $body: #ApplyExpr[
                                 $recv: #NameExpr['File']
                                 $recv: #NameExpr['directory?']
                                 $param: #List[
                                    $expression: #ApplyExpr[
                                       $recv: #NameExpr['File']
                                       $recv: #NameExpr['join']
                                       $param: #List[
                                          $expression: #NameExpr['@bindir']
                                          $expression: #NameExpr['x']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@extra_rdoc_files']
                           $recv: #NameExpr['delete_if']
                           $body: #Block[
                              $param: #NameExpr['x']
                              $body: #ApplyExpr[
                                 $base: #ApplyExpr[
                                    $recv: #NameExpr['File']
                                    $recv: #NameExpr['directory?']
                                    $param: #List[
                                       $expression: #NameExpr['x']
                                    ]
                                 ]
                                 $recv: #NameExpr['&']
                                 $param: #List[
                                    $expression: #NotExpr[
                                       $expr: #ApplyExpr[
                                          $recv: #NameExpr['File']
                                          $recv: #NameExpr['symlink?']
                                          $param: #List[
                                             $expression: #NameExpr['x']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['@extensions']
                           $recv: #NameExpr['delete_if']
                           $body: #Block[
                              $param: #NameExpr['x']
                              $body: #ApplyExpr[
                                 $base: #ApplyExpr[
                                    $recv: #NameExpr['File']
                                    $recv: #NameExpr['directory?']
                                    $param: #List[
                                       $expression: #NameExpr['x']
                                    ]
                                 ]
                                 $recv: #NameExpr['&']
                                 $param: #List[
                                    $expression: #NotExpr[
                                       $expr: #ApplyExpr[
                                          $recv: #NameExpr['File']
                                          $recv: #NameExpr['symlink?']
                                          $param: #List[
                                             $expression: #NameExpr['x']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['non_files']
                           $right: #ApplyExpr[
                              $recv: #NameExpr['files']
                              $recv: #NameExpr['reject']
                              $body: #Block[
                                 $param: #NameExpr['x']
                                 $body: #LOr[
                                    $left: #ApplyExpr[
                                       $recv: #NameExpr['File']
                                       $recv: #NameExpr['file?']
                                       $param: #List[
                                          $expression: #NameExpr['x']
                                       ]
                                    ]
                                    $right: #ApplyExpr[
                                       $recv: #NameExpr['File']
                                       $recv: #NameExpr['symlink?']
                                       $param: #List[
                                          $expression: #NameExpr['x']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $cond: #OrExpr[
                              $left: #[
                                 $base: #NameExpr['packaging']
                              ]
                              $right: #ApplyExpr[
                                 $recv: #NameExpr['non_files']
                                 $recv: #NameExpr['empty?']
                              ]
                           ]
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                                 $expression: #StringExpr[
                                    $inner: #ApplyExpr[
                                       $base: #NameExpr['non_files']
                                       $recv: #NameExpr['join']
                                       $param: #List[
                                          $expression: #StringExpr['\\", \\"']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #ApplyExpr[
                              $base: #NameExpr['files']
                              $recv: #NameExpr['include?']
                              $param: #List[
                                 $expression: #NameExpr['file_name']
                              ]
                           ]
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                                 $expression: #StringExpr[
                                    $inner: #NameExpr['full_name']
                                    $inner: #NameExpr['file_name']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['specification_version']
                              $recv: #NameExpr['is_a?']
                              $param: #List[
                                 $expression: #NameExpr['Integer']
                              ]
                           ]
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                                 $expression: #StringExpr['specification_version must be an Integer (did you mean version?)']
                              ]
                           ]
                        ]
                        $statement: #Case[
                           $cond: #NameExpr['platform']
                           $body: #List[
                              $when: #When[
                                 $cond: #List[
                                    $expression: #Field[
                                       $recv: #NameExpr['Gem']
                                       $name: #NameExpr['Platform']
                                    ]
                                    $expression: #Field[
                                       $recv: #Field[
                                          $recv: #NameExpr['Gem']
                                          $name: #NameExpr['Platform']
                                       ]
                                       $name: #NameExpr['RUBY']
                                    ]
                                 ]
                                 $then: #Empty['']
                              ]
                           ]
                           $else: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                                 $expression: #StringExpr[
                                    $inner: #ApplyExpr[
                                       $recv: #NameExpr['platform']
                                       $recv: #NameExpr['inspect']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #Self['self']
                                 $recv: #NameExpr['class']
                              ]
                              $recv: #NameExpr['array_attributes']
                           ]
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['field']
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['val']
                                    $right: #ApplyExpr[
                                       $base: #Self['self']
                                       $recv: #NameExpr['send']
                                       $param: #List[
                                          $expression: #NameExpr['field']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['klass']
                                    $right: #Case[
                                       $cond: #NameExpr['field']
                                       $body: #List[
                                          $when: #When[
                                             $cond: #List[
                                                $expression: #NameExpr['dependencies']
                                             ]
                                             $then: #Field[
                                                $recv: #NameExpr['Gem']
                                                $name: #NameExpr['Dependency']
                                             ]
                                          ]
                                       ]
                                       $else: #NameExpr['String']
                                    ]
                                 ]
                                 $statement: #Unless[
                                    $cond: #AndExpr[
                                       $left: #StrictEquals[
                                          $left: #NameExpr['Array']
                                          $right: #NameExpr['val']
                                       ]
                                       $right: #ApplyExpr[
                                          $recv: #NameExpr['val']
                                          $recv: #NameExpr['all?']
                                          $body: #Block[
                                             $param: #NameExpr['x']
                                             $body: #ApplyExpr[
                                                $recv: #NameExpr['x']
                                                $recv: #NameExpr['kind_of?']
                                                $param: #List[
                                                   $expression: #NameExpr['klass']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                    $then: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['raise']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                          $expression: #StringExpr[
                                             $inner: #NameExpr['field']
                                             $inner: #NameExpr['klass']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #Array[
                              $index: #List[
                                 $expression: #NameExpr['authors']
                              ]
                           ]
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['field']
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['val']
                                    $right: #ApplyExpr[
                                       $base: #Self['self']
                                       $recv: #NameExpr['send']
                                       $param: #List[
                                          $expression: #NameExpr['field']
                                       ]
                                    ]
                                 ]
                                 $statement: #IfExpr[
                                    $then: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['raise']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                          $expression: #StringExpr[
                                             $inner: #NameExpr['field']
                                          ]
                                       ]
                                    ]
                                    $cond: #ApplyExpr[
                                       $recv: #NameExpr['val']
                                       $recv: #NameExpr['empty?']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $cond: #StrictEquals[
                              $left: #NameExpr['Hash']
                              $right: #NameExpr['metadata']
                           ]
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                                 $expression: #StringExpr['metadata must be a hash']
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #NameExpr['metadata']
                              $recv: #NameExpr['keys']
                           ]
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['k']
                              $body: #List[
                                 $statement: #IfExpr[
                                    $cond: #NotExpr[
                                       $expr: #ApplyExpr[
                                          $recv: #NameExpr['k']
                                          $recv: #NameExpr['kind_of?']
                                          $param: #List[
                                             $expression: #NameExpr['String']
                                          ]
                                       ]
                                    ]
                                    $then: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['raise']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                          $expression: #StringExpr['metadata keys must be a String']
                                       ]
                                    ]
                                 ]
                                 $statement: #IfExpr[
                                    $cond: #GtExpr[
                                       $left: #ApplyExpr[
                                          $recv: #NameExpr['k']
                                          $recv: #NameExpr['size']
                                       ]
                                       $right: #IntExpr['128']
                                    ]
                                    $then: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['raise']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                          $expression: #StringExpr[
                                             $inner: #ApplyExpr[
                                                $recv: #NameExpr['k']
                                                $recv: #NameExpr['size']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ApplyExpr[
                              $recv: #NameExpr['metadata']
                              $recv: #NameExpr['values']
                           ]
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['k']
                              $body: #List[
                                 $statement: #IfExpr[
                                    $cond: #NotExpr[
                                       $expr: #ApplyExpr[
                                          $recv: #NameExpr['k']
                                          $recv: #NameExpr['kind_of?']
                                          $param: #List[
                                             $expression: #NameExpr['String']
                                          ]
                                       ]
                                    ]
                                    $then: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['raise']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                          $expression: #StringExpr['metadata values must be a String']
                                       ]
                                    ]
                                 ]
                                 $statement: #IfExpr[
                                    $cond: #GtExpr[
                                       $left: #ApplyExpr[
                                          $recv: #NameExpr['k']
                                          $recv: #NameExpr['size']
                                       ]
                                       $right: #IntExpr['1024']
                                    ]
                                    $then: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['raise']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                          $expression: #StringExpr[
                                             $inner: #ApplyExpr[
                                                $recv: #NameExpr['k']
                                                $recv: #NameExpr['size']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['licenses']
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['license']
                              $body: #List[
                                 $statement: #IfExpr[
                                    $cond: #GtExpr[
                                       $left: #ApplyExpr[
                                          $recv: #NameExpr['license']
                                          $recv: #NameExpr['length']
                                       ]
                                       $right: #IntExpr['64']
                                    ]
                                    $then: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['raise']
                                       $param: #List[
                                          $expression: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['InvalidSpecificationException']
                                          ]
                                          $expression: #StringExpr['each license must be 64 characters or less']
                                       ]
                                    ]
                                 ]
                                 $statement: #IfExpr[
                                    $cond: #NotExpr[
                                       $expr: #ApplyExpr[
                                          $recv: #Field[
                                             $recv: #NameExpr['Gem']
                                             $name: #NameExpr['Licenses']
                                          ]
                                          $recv: #NameExpr['match?']
                                          $param: #List[
                                             $expression: #NameExpr['license']
                                          ]
                                       ]
                                    ]
                                    $then: #List[
                                       $statement: #AssignExpr[
                                          $left: #NameExpr['suggestions']
                                          $right: #ApplyExpr[
                                             $recv: #Field[
                                                $recv: #NameExpr['Gem']
                                                $name: #NameExpr['Licenses']
                                             ]
                                             $recv: #NameExpr['suggestions']
                                             $param: #List[
                                                $expression: #NameExpr['license']
                                             ]
                                          ]
                                       ]
                                       $statement: #AssignExpr[
                                          $left: #NameExpr['message']
                                          $right: #HereDocument['license value \'#{license}\' is invalid.  Use a license identifier from\nhttp://spdx.org/licenses or \'#{Gem::Licenses::NONSTANDARD}\' for a nonstandard license.\n']
                                       ]
                                       $statement: #Unless[
                                          $then: #AddAssign[
                                             $left: #NameExpr['message']
                                             $right: #StringExpr[
                                                $inner: #ApplyExpr[
                                                   $recv: #ApplyExpr[
                                                      $recv: #NameExpr['suggestions']
                                                      $recv: #NameExpr['map']
                                                      $body: #Block[
                                                         $param: #NameExpr['s']
                                                         $body: #StringExpr[
                                                            $inner: #NameExpr['s']
                                                         ]
                                                      ]
                                                   ]
                                                   $recv: #NameExpr['join']
                                                   $param: #List[
                                                      $expression: #StringExpr[', ']
                                                   ]
                                                ]
                                             ]
                                          ]
                                          $cond: #ApplyExpr[
                                             $recv: #NameExpr['suggestions']
                                             $recv: #NameExpr['nil?']
                                          ]
                                       ]
                                       $statement: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['warning']
                                          $param: #List[
                                             $expression: #NameExpr['message']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['warning']
                           $param: #List[
                              $expression: #HereDocument['licenses is empty, but is recommended.  Use a license identifier from\nhttp://spdx.org/licenses or \'#{Gem::Licenses::NONSTANDARD}\' for a nonstandard license.\n']
                           ]
                        ]
                        $statement: #NameExpr['validate_permissions']
                        $statement: #AssignExpr[
                           $left: #NameExpr['lazy']
                           $right: #ApplyExpr[
                              $recv: #StringExpr['"FIxxxXME" or "TOxxxDO"']
                              $recv: #NameExpr['gsub']
                              $param: #List[
                                 $expression: #Regex['/xxx/']
                                 $expression: #StringExpr['']
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $cond: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #NameExpr['authors']
                                 $recv: #NameExpr['grep']
                                 $param: #List[
                                    $expression: #Regex['/FI XME|TO DO/x']
                                 ]
                              ]
                              $recv: #NameExpr['empty?']
                           ]
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                                 $expression: #StringExpr[
                                    $inner: #NameExpr['lazy']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #Unless[
                           $cond: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['Array']
                                    $param: #List[
                                       $expression: #NameExpr['email']
                                    ]
                                 ]
                                 $recv: #NameExpr['grep']
                                 $param: #List[
                                    $expression: #Regex['/FI XME|TO DO/x']
                                 ]
                              ]
                              $recv: #NameExpr['empty?']
                           ]
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                                 $expression: #StringExpr[
                                    $inner: #NameExpr['lazy']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #AssignExpr[
                              $left: #NameExpr['description']
                              $right: #ComplExpr[
                                 $expr: #Regex['/FI XME|TO DO/x']
                              ]
                           ]
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                                 $expression: #StringExpr[
                                    $inner: #NameExpr['lazy']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #AssignExpr[
                              $left: #NameExpr['summary']
                              $right: #ComplExpr[
                                 $expr: #Regex['/FI XME|TO DO/x']
                              ]
                           ]
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                                 $expression: #StringExpr[
                                    $inner: #NameExpr['lazy']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #AndExpr[
                              $left: #AndExpr[
                                 $left: #NameExpr['homepage']
                                 $right: #[
                                    $base: #ApplyExpr[
                                       $recv: #NameExpr['homepage']
                                       $recv: #NameExpr['empty?']
                                    ]
                                 ]
                              ]
                              $right: #NotMatch[
                                 $left: #NameExpr['homepage']
                                 $right: #Regex['/\\A[a-z][a-z\\d+.-]*:/i']
                              ]
                           ]
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                                 $expression: #StringExpr[
                                    $inner: #NameExpr['homepage']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #ParcentNotation['%w[author email homepage summary]']
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['attribute']
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['value']
                                    $right: #ApplyExpr[
                                       $base: #Self['self']
                                       $recv: #NameExpr['send']
                                       $param: #List[
                                          $expression: #NameExpr['attribute']
                                       ]
                                    ]
                                 ]
                                 $statement: #IfExpr[
                                    $then: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['warning']
                                       $param: #List[
                                          $expression: #StringExpr[
                                             $inner: #NameExpr['attribute']
                                          ]
                                       ]
                                    ]
                                    $cond: #OrExpr[
                                       $left: #ApplyExpr[
                                          $recv: #NameExpr['value']
                                          $recv: #NameExpr['nil?']
                                       ]
                                       $right: #ApplyExpr[
                                          $recv: #NameExpr['value']
                                          $recv: #NameExpr['empty?']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #EqExpr[
                              $left: #NameExpr['description']
                              $right: #NameExpr['summary']
                           ]
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['warning']
                              $param: #List[
                                 $expression: #StringExpr['description and summary are identical']
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['warning']
                              $param: #List[
                                 $expression: #StringExpr['deprecated autorequire specified']
                              ]
                           ]
                           $cond: #NameExpr['autorequire']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['executables']
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['executable']
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['executable_path']
                                    $right: #ApplyExpr[
                                       $recv: #NameExpr['File']
                                       $recv: #NameExpr['join']
                                       $param: #List[
                                          $expression: #NameExpr['bindir']
                                          $expression: #NameExpr['executable']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['shebang']
                                    $right: #EqExpr[
                                       $left: #ApplyExpr[
                                          $recv: #NameExpr['File']
                                          $recv: #NameExpr['read']
                                          $param: #List[
                                             $expression: #NameExpr['executable_path']
                                             $expression: #IntExpr['2']
                                          ]
                                       ]
                                       $right: #StringExpr['#!']
                                    ]
                                 ]
                                 $statement: #Unless[
                                    $then: #ApplyExpr[
                                       #Self['self']
                                       $recv: #NameExpr['warning']
                                       $param: #List[
                                          $expression: #StringExpr[
                                             $inner: #NameExpr['executable_path']
                                          ]
                                       ]
                                    ]
                                    $cond: #NameExpr['shebang']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['files']
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['file']
                              $body: #List[
                                 $statement: #Unless[
                                    $then: #Next['next']
                                    $cond: #ApplyExpr[
                                       $recv: #NameExpr['File']
                                       $recv: #NameExpr['symlink?']
                                       $param: #List[
                                          $expression: #NameExpr['file']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['warning']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['file']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #NameExpr['validate_dependencies']
                        $statement: #TrueExpr['true']
                     ]
                     $ensure: #IfExpr[
                        $cond: #OrExpr[
                           $left: #BuiltInVariable['$!']
                           $right: #GtExpr[
                              $left: #NameExpr['@warnings']
                              $right: #IntExpr['0']
                           ]
                        ]
                        $then: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['alert_warning']
                           $param: #List[
                              $expression: #StringExpr['See http://guides.rubygems.org/specification-reference/ for help']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['validate_dependencies']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['seen']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['Dependency']
                                 ]
                                 $name: #NameExpr['TYPES']
                              ]
                              $recv: #NameExpr['inject']
                              $param: #List[
                                 $expression: #List['{}']
                              ]
                              $body: #Block[
                                 $param: #MultipleLeftHandSideExpression[
                                    $item: #NameExpr['types']
                                    $item: #NameExpr['type']
                                 ]
                                 $body: #ApplyExpr[
                                    $recv: #NameExpr['types']
                                    $recv: #NameExpr['merge']
                                    $param: #List[
                                       $expression: #List[
                                          $hash: #Hash[
                                             $key: #NameExpr['type']
                                             $value: #List['{}']
                                          ]
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['error_messages']
                           $right: #Array['[]']
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['warning_messages']
                           $right: #Array['[]']
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['dependencies']
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['dep']
                              $body: #List[
                                 $statement: #IfExpr[
                                    $cond: #AssignExpr[
                                       $left: #NameExpr['prev']
                                       $right: #Indexer[
                                          $recv: #Indexer[
                                             $recv: #NameExpr['seen']
                                             $index: #List[
                                                $expression: #ApplyExpr[
                                                   $recv: #NameExpr['dep']
                                                   $recv: #NameExpr['type']
                                                ]
                                             ]
                                          ]
                                          $index: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #NameExpr['dep']
                                                $recv: #NameExpr['name']
                                             ]
                                          ]
                                       ]
                                    ]
                                    $then: #LShiftExpr[
                                       $left: #NameExpr['error_messages']
                                       $right: #HereDocument['duplicate dependency on #{dep}, (#{prev.requirement}) use:\n    add_#{dep.type}_dependency \'#{dep.name}\', \'#{dep.requirement}\', \'#{prev.requirement}\'\n']
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #Indexer[
                                       $base: #Indexer[
                                          $recv: #NameExpr['seen']
                                          $index: #List[
                                             $expression: #ApplyExpr[
                                                $recv: #NameExpr['dep']
                                                $recv: #NameExpr['type']
                                             ]
                                          ]
                                       ]
                                       $index: #List[
                                          $expression: #ApplyExpr[
                                             $recv: #NameExpr['dep']
                                             $recv: #NameExpr['name']
                                          ]
                                       ]
                                    ]
                                    $right: #NameExpr['dep']
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['prerelease_dep']
                                    $right: #ApplyExpr[
                                       $recv: #ApplyExpr[
                                          $recv: #NameExpr['dep']
                                          $recv: #NameExpr['requirements_list']
                                       ]
                                       $recv: #NameExpr['any?']
                                       $body: #Block[
                                          $param: #NameExpr['req']
                                          $body: #ApplyExpr[
                                             $recv: #ApplyExpr[
                                                $recv: #Field[
                                                   $recv: #NameExpr['Gem']
                                                   $name: #NameExpr['Requirement']
                                                ]
                                                $recv: #NameExpr['new']
                                                $param: #List[
                                                   $expression: #NameExpr['req']
                                                ]
                                             ]
                                             $recv: #NameExpr['prerelease?']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #IfExpr[
                                    $then: #LShiftExpr[
                                       $left: #NameExpr['warning_messages']
                                       $right: #StringExpr[
                                          $inner: #NameExpr['dep']
                                       ]
                                    ]
                                    $cond: #ApplyExpr[
                                       $base: #NameExpr['prerelease_dep']
                                       $recv: #NameExpr['&']
                                       $param: #List[
                                          $expression: #NotExpr[
                                             $expr: #ApplyExpr[
                                                $recv: #NameExpr['version']
                                                $recv: #NameExpr['prerelease?']
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['overly_strict']
                                    $right: #LAnd[
                                       $left: #EqExpr[
                                          $left: #ApplyExpr[
                                             $recv: #ApplyExpr[
                                                $recv: #ApplyExpr[
                                                   $recv: #NameExpr['dep']
                                                   $recv: #NameExpr['requirement']
                                                ]
                                                $recv: #NameExpr['requirements']
                                             ]
                                             $recv: #NameExpr['length']
                                          ]
                                          $right: #IntExpr['1']
                                       ]
                                       $right: #ApplyExpr[
                                          $recv: #ApplyExpr[
                                             $recv: #ApplyExpr[
                                                $recv: #NameExpr['dep']
                                                $recv: #NameExpr['requirement']
                                             ]
                                             $recv: #NameExpr['requirements']
                                          ]
                                          $recv: #NameExpr['any?']
                                          $body: #Block[
                                             $param: #MultipleLeftHandSideExpression[
                                                $item: #NameExpr['op']
                                                $item: #NameExpr['version']
                                             ]
                                             $body: #AndExpr[
                                                $left: #AndExpr[
                                                   $left: #AndExpr[
                                                      $left: #EqExpr[
                                                         $left: #NameExpr['op']
                                                         $right: #StringExpr['~>']
                                                      ]
                                                      $right: #[
                                                         $base: #ApplyExpr[
                                                            $recv: #NameExpr['version']
                                                            $recv: #NameExpr['prerelease?']
                                                         ]
                                                      ]
                                                   ]
                                                   $right: #GtExpr[
                                                      $left: #ApplyExpr[
                                                         $recv: #ApplyExpr[
                                                            $recv: #NameExpr['version']
                                                            $recv: #NameExpr['segments']
                                                         ]
                                                         $recv: #NameExpr['length']
                                                      ]
                                                      $right: #IntExpr['2']
                                                   ]
                                                ]
                                                $right: #NeExpr[
                                                   $left: #ApplyExpr[
                                                      $recv: #ApplyExpr[
                                                         $recv: #NameExpr['version']
                                                         $recv: #NameExpr['segments']
                                                      ]
                                                      $recv: #NameExpr['first']
                                                   ]
                                                   $right: #IntExpr['0']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #IfExpr[
                                    $cond: #NameExpr['overly_strict']
                                    $then: #List[
                                       $statement: #MultipleAssign[
                                          $left: #MultipleLeftHandSideExpression[
                                             $item: #NameExpr['_']
                                             $item: #NameExpr['dep_version']
                                          ]
                                          $right: #ApplyExpr[
                                             $recv: #ApplyExpr[
                                                $recv: #ApplyExpr[
                                                   $recv: #NameExpr['dep']
                                                   $recv: #NameExpr['requirement']
                                                ]
                                                $recv: #NameExpr['requirements']
                                             ]
                                             $recv: #NameExpr['first']
                                          ]
                                       ]
                                       $statement: #AssignExpr[
                                          $left: #NameExpr['base']
                                          $right: #ApplyExpr[
                                             $base: #ApplyExpr[
                                                $recv: #NameExpr['dep_version']
                                                $recv: #NameExpr['segments']
                                             ]
                                             $recv: #NameExpr['first']
                                             $param: #List[
                                                $expression: #IntExpr['2']
                                             ]
                                          ]
                                       ]
                                       $statement: #LShiftExpr[
                                          $left: #NameExpr['warning_messages']
                                          $right: #HereDocument['pessimistic dependency on #{dep} may be overly strict\n  if #{dep.name} is semantically versioned, use:\n    add_#{dep.type}_dependency \'#{dep.name}\', \'~> #{base.join \'.\'}\', \'>= #{dep_version}\'\n']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['open_ended']
                                    $right: #ApplyExpr[
                                       $recv: #ApplyExpr[
                                          $recv: #ApplyExpr[
                                             $recv: #NameExpr['dep']
                                             $recv: #NameExpr['requirement']
                                          ]
                                          $recv: #NameExpr['requirements']
                                       ]
                                       $recv: #NameExpr['all?']
                                       $body: #Block[
                                          $param: #MultipleLeftHandSideExpression[
                                             $item: #NameExpr['op']
                                             $item: #NameExpr['version']
                                          ]
                                          $body: #AndExpr[
                                             $left: #[
                                                $base: #ApplyExpr[
                                                   $recv: #NameExpr['version']
                                                   $recv: #NameExpr['prerelease?']
                                                ]
                                             ]
                                             $right: #OrExpr[
                                                $left: #EqExpr[
                                                   $left: #NameExpr['op']
                                                   $right: #StringExpr['>']
                                                ]
                                                $right: #EqExpr[
                                                   $left: #NameExpr['op']
                                                   $right: #StringExpr['>=']
                                                ]
                                             ]
                                          ]
                                       ]
                                    ]
                                 ]
                                 $statement: #IfExpr[
                                    $cond: #NameExpr['open_ended']
                                    $then: #List[
                                       $statement: #MultipleAssign[
                                          $left: #MultipleLeftHandSideExpression[
                                             $item: #NameExpr['op']
                                             $item: #NameExpr['dep_version']
                                          ]
                                          $right: #ApplyExpr[
                                             $recv: #ApplyExpr[
                                                $recv: #ApplyExpr[
                                                   $recv: #NameExpr['dep']
                                                   $recv: #NameExpr['requirement']
                                                ]
                                                $recv: #NameExpr['requirements']
                                             ]
                                             $recv: #NameExpr['first']
                                          ]
                                       ]
                                       $statement: #AssignExpr[
                                          $left: #NameExpr['base']
                                          $right: #ApplyExpr[
                                             $base: #ApplyExpr[
                                                $recv: #NameExpr['dep_version']
                                                $recv: #NameExpr['segments']
                                             ]
                                             $recv: #NameExpr['first']
                                             $param: #List[
                                                $expression: #IntExpr['2']
                                             ]
                                          ]
                                       ]
                                       $statement: #AssignExpr[
                                          $left: #NameExpr['bugfix']
                                          $right: #IfExpr[
                                             $cond: #EqExpr[
                                                $left: #NameExpr['op']
                                                $right: #StringExpr['>']
                                             ]
                                             $then: #StringExpr[
                                                $inner: #NameExpr['dep_version']
                                             ]
                                             $else: #IfExpr[
                                                $cond: #AndExpr[
                                                   $left: #EqExpr[
                                                      $left: #NameExpr['op']
                                                      $right: #StringExpr['>=']
                                                   ]
                                                   $right: #NeExpr[
                                                      $left: #NameExpr['base']
                                                      $right: #ApplyExpr[
                                                         $recv: #NameExpr['dep_version']
                                                         $recv: #NameExpr['segments']
                                                      ]
                                                   ]
                                                ]
                                                $then: #StringExpr[
                                                   $inner: #NameExpr['dep_version']
                                                ]
                                             ]
                                          ]
                                       ]
                                       $statement: #LShiftExpr[
                                          $left: #NameExpr['warning_messages']
                                          $right: #HereDocument['open-ended dependency on #{dep} is not recommended\n  if #{dep.name} is semantically versioned, use:\n    add_#{dep.type}_dependency \'#{dep.name}\', \'~> #{base.join \'.\'}\'#{bugfix}\n']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['error_messages']
                              $recv: #NameExpr['any?']
                           ]
                           $then: #ApplyExpr[
                              #Self['self']
                              $recv: #NameExpr['raise']
                              $param: #List[
                                 $expression: #Field[
                                    $recv: #NameExpr['Gem']
                                    $name: #NameExpr['InvalidSpecificationException']
                                 ]
                                 $expression: #ApplyExpr[
                                    $recv: #NameExpr['error_messages']
                                    $recv: #NameExpr['join']
                                 ]
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['warning_messages']
                              $recv: #NameExpr['any?']
                           ]
                           $then: #ApplyExpr[
                              $recv: #NameExpr['warning_messages']
                              $recv: #NameExpr['each']
                              $body: #Block[
                                 $param: #NameExpr['warning_message']
                                 $body: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['warning']
                                    $param: #List[
                                       $expression: #NameExpr['warning_message']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['validate_permissions']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #IfExpr[
                           $then: #RReturnStmt['return']
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['Gem']
                              $recv: #NameExpr['win_platform?']
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['files']
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['file']
                              $body: #List[
                                 $statement: #Unless[
                                    $then: #Next['next']
                                    $cond: #ApplyExpr[
                                       $recv: #NameExpr['File']
                                       $recv: #NameExpr['file?']
                                       $param: #List[
                                          $expression: #NameExpr['file']
                                       ]
                                    ]
                                 ]
                                 $statement: #IfExpr[
                                    $then: #Next['next']
                                    $cond: #EqExpr[
                                       $left: #AndExpr[
                                          $left: #ApplyExpr[
                                             $recv: #ApplyExpr[
                                                $recv: #NameExpr['File']
                                                $recv: #NameExpr['stat']
                                                $param: #List[
                                                   $expression: #NameExpr['file']
                                                ]
                                             ]
                                             $recv: #NameExpr['mode']
                                          ]
                                          $right: #OctalInteger['0444']
                                       ]
                                       $right: #OctalInteger['0444']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['warning']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['file']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['executables']
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['name']
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['exec']
                                    $right: #ApplyExpr[
                                       $base: #NameExpr['File']
                                       $recv: #NameExpr['join']
                                       $param: #List[
                                          $expression: #NameExpr['@bindir']
                                          $expression: #NameExpr['name']
                                       ]
                                    ]
                                 ]
                                 $statement: #Unless[
                                    $then: #Next['next']
                                    $cond: #ApplyExpr[
                                       $recv: #NameExpr['File']
                                       $recv: #NameExpr['file?']
                                       $param: #List[
                                          $expression: #NameExpr['exec']
                                       ]
                                    ]
                                 ]
                                 $statement: #IfExpr[
                                    $then: #Next['next']
                                    $cond: #ApplyExpr[
                                       $recv: #ApplyExpr[
                                          $recv: #NameExpr['File']
                                          $recv: #NameExpr['stat']
                                          $param: #List[
                                             $expression: #NameExpr['exec']
                                          ]
                                       ]
                                       $recv: #NameExpr['executable?']
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['warning']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['exec']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['version=']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['version']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['@version']
                           $right: #ApplyExpr[
                              $recv: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Version']
                              ]
                              $recv: #NameExpr['create']
                              $param: #List[
                                 $expression: #NameExpr['version']
                              ]
                           ]
                        ]
                        $statement: #IfExpr[
                           $then: #AssignExpr[
                              $left: #Field[
                                 $base: #Self['self']
                                 $name: #NameExpr['required_rubygems_version']
                              ]
                              $right: #StringExpr['> 1.3.1']
                           ]
                           $cond: #ApplyExpr[
                              $recv: #NameExpr['@version']
                              $recv: #NameExpr['prerelease?']
                           ]
                        ]
                        $statement: #NameExpr['invalidate_memoized_attributes']
                        $statement: #RReturnStmt[
                           $expr: #List[
                              $expression: #NameExpr['@version']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['stubbed?']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #FalseExpr['false']
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['yaml_initialize']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['tag']
                     ]
                     $param: #Param[
                        $param: #NameExpr['vals']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['vals']
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #MultipleLeftHandSideExpression[
                                 $item: #NameExpr['ivar']
                                 $item: #NameExpr['val']
                              ]
                              $body: #Case[
                                 $cond: #NameExpr['ivar']
                                 $body: #List[
                                    $when: #When[
                                       $cond: #List[
                                          $expression: #StringExpr['date']
                                       ]
                                       $then: #AssignExpr[
                                          $left: #Field[
                                             $base: #Self['self']
                                             $name: #NameExpr['date']
                                          ]
                                          $right: #ApplyExpr[
                                             $recv: #NameExpr['val']
                                             $recv: #NameExpr['untaint']
                                          ]
                                       ]
                                    ]
                                 ]
                                 $else: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['instance_variable_set']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['ivar']
                                       ]
                                       $expression: #ApplyExpr[
                                          $recv: #NameExpr['val']
                                          $recv: #NameExpr['untaint']
                                       ]
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #AssignExpr[
                           $left: #NameExpr['@original_platform']
                           $right: #NameExpr['@platform']
                        ]
                        $statement: #AssignExpr[
                           $left: #Field[
                              $base: #Self['self']
                              $name: #NameExpr['platform']
                           ]
                           $right: #ApplyExpr[
                              $base: #Field[
                                 $recv: #NameExpr['Gem']
                                 $name: #NameExpr['Platform']
                              ]
                              $recv: #NameExpr['new']
                              $param: #List[
                                 $expression: #NameExpr['@platform']
                              ]
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['reset_nil_attributes_to_default']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AssignExpr[
                           $left: #NameExpr['nil_attributes']
                           $right: #ApplyExpr[
                              $recv: #ApplyExpr[
                                 $recv: #ApplyExpr[
                                    $recv: #Self['self']
                                    $recv: #NameExpr['class']
                                 ]
                                 $recv: #NameExpr['non_nil_attributes']
                              ]
                              $recv: #NameExpr['find_all']
                              $body: #Block[
                                 $param: #NameExpr['name']
                                 $body: #LOr[
                                    $left: #NotExpr[
                                       $expr: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['instance_variable_defined?']
                                          $param: #List[
                                             $expression: #StringExpr[
                                                $inner: #NameExpr['name']
                                             ]
                                          ]
                                       ]
                                    ]
                                    $right: #ApplyExpr[
                                       $recv: #ApplyExpr[
                                          #Self['self']
                                          $recv: #NameExpr['instance_variable_get']
                                          $param: #List[
                                             $expression: #StringExpr[
                                                $inner: #NameExpr['name']
                                             ]
                                          ]
                                       ]
                                       $recv: #NameExpr['nil?']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #ApplyExpr[
                           $recv: #NameExpr['nil_attributes']
                           $recv: #NameExpr['each']
                           $body: #Block[
                              $param: #NameExpr['attribute']
                              $body: #List[
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['default']
                                    $right: #ApplyExpr[
                                       $base: #Self['self']
                                       $recv: #NameExpr['default_value']
                                       $param: #List[
                                          $expression: #NameExpr['attribute']
                                       ]
                                    ]
                                 ]
                                 $statement: #AssignExpr[
                                    $left: #NameExpr['value']
                                    $right: #Case[
                                       $cond: #NameExpr['default']
                                       $body: #List[
                                          $when: #When[
                                             $cond: #List[
                                                $expression: #NameExpr['Time']
                                                $expression: #NameExpr['Numeric']
                                                $expression: #NameExpr['Symbol']
                                                $expression: #TrueExpr['true']
                                                $expression: #FalseExpr['false']
                                                $expression: #Nil['nil']
                                             ]
                                             $then: #NameExpr['default']
                                          ]
                                       ]
                                       $else: #ApplyExpr[
                                          $recv: #NameExpr['default']
                                          $recv: #NameExpr['dup']
                                       ]
                                    ]
                                 ]
                                 $statement: #ApplyExpr[
                                    #Self['self']
                                    $recv: #NameExpr['instance_variable_set']
                                    $param: #List[
                                       $expression: #StringExpr[
                                          $inner: #NameExpr['attribute']
                                       ]
                                       $expression: #NameExpr['value']
                                    ]
                                 ]
                              ]
                           ]
                        ]
                        $statement: #LOrAssign[
                           $left: #NameExpr['@installed_by_version']
                           $right: #Nil['nil']
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['warning']
                  $param: #List[
                     $param: #Param[
                        $param: #NameExpr['statement']
                     ]
                  ]
                  $body: #BlockExpr[
                     $main: #List[
                        $statement: #AddAssign[
                           $left: #NameExpr['@warnings']
                           $right: #IntExpr['1']
                        ]
                        $statement: #ApplyExpr[
                           #Self['self']
                           $recv: #NameExpr['alert_warning']
                           $param: #List[
                              $expression: #NameExpr['statement']
                           ]
                        ]
                     ]
                  ]
               ]
               $statement: #FuncDecl[
                  $name: #NameExpr['raw_require_paths']
                  $param: #List['']
                  $body: #BlockExpr[
                     $main: #NameExpr['@require_paths']
                  ]
               ]
               $statement: #ApplyExpr[
                  #Self['self']
                  $recv: #NameExpr['extend']
                  $param: #List[
                     $expression: #Field[
                        $recv: #NameExpr['Gem']
                        $name: #NameExpr['Deprecate']
                     ]
                  ]
               ]
            ]
         ]
      ]
      $statement: #ApplyExpr[
         $recv: #NameExpr['Gem']
         $recv: #NameExpr['clear_paths']
      ]
   ]
   #Comsumed['comsumed']
]
